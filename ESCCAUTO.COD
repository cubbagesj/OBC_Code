;	Static Name Aliases
;
	TITLE   c:\cb8\esccauto.cpp
	.286p
INCLUDELIB      LLIBCE
INCLUDELIB	OLDNAMES.LIB
ESCCAUTO_TEXT	SEGMENT  WORD PUBLIC 'CODE'
ESCCAUTO_TEXT	ENDS
_DATA	SEGMENT  WORD PUBLIC 'DATA'
_DATA	ENDS
CONST	SEGMENT  WORD PUBLIC 'CONST'
CONST	ENDS
_BSS	SEGMENT  WORD PUBLIC 'BSS'
_BSS	ENDS
DGROUP	GROUP	CONST, _BSS, _DATA
	ASSUME DS: DGROUP, SS: DGROUP
EXTRN	__inp:FAR
EXTRN	__fmemcpy:FAR
EXTRN	__disable:FAR
EXTRN	__ffree:FAR
EXTRN	__fmalloc:FAR
EXTRN	__dos_setvect:FAR
EXTRN	_inp:FAR
EXTRN	_inpw:FAR
EXTRN	?time_stamp@@ZAXPEUTIMER@@@Z:FAR
EXTRN	__enable:FAR
EXTRN	_outp:FAR
EXTRN	_outpw:FAR
EXTRN	__dos_getvect:FAR
EXTRN	?ln200_buffer@@3QIEI:BYTE
EXTRN	?ln200_new_data@@3IE:WORD
EXTRN	?ln200_data_frame@@3KE:DWORD
EXTRN	?frame@@3KE:DWORD
EXTRN	?ln200_time@@3UTIMER@@E:FWORD
EXTRN	?ln200_rx_num@@3KE:DWORD
_BSS      SEGMENT
PUBLIC  ?t1@@3PEVCescc@@E
?t1@@3PEVCescc@@E	DW 02H DUP (?)
_BSS      ENDS
ESCCAUTO_TEXT      SEGMENT
	ASSUME	CS: ESCCAUTO_TEXT
	PUBLIC	??0Cescc@@REC@XZ	; Cescc::Cescc
??0Cescc@@REC@XZ	PROC FAR	; Cescc::Cescc
;|*** // esccauto.cpp
;|*** 
;|*** // modified 2/25/2004 by jtm
;|*** // removed some code for unused modes
;|*** // improved code style
;|*** // added comments
;|*** // added application-specific code for autonomous model
;|*** // search for "jtm" to find changes from original
;|*** 
;|*** // original code supplied by Carl George
;|*** // of Commtech, Inc., Wichita, KS
;|*** // as a general purpose driver for 
;|*** // the ESCC-104 synchronous serial board
;|*** // check their web site for additional information
;|*** 
;|*** #include "esccauto.h"           
;|*** #include "conio.h"
;|*** #include "stdlib.h"
;|*** #include "malloc.h"
;|*** #include "dos.h"
;|*** #include "memory.h"
;|*** #include "dmmtest.h"
;|*** 
;|*** struct TIMER
;|***   {
;|***   unsigned long high;
;|***   unsigned int  low;
;|***   };
;|*** 
;|*** struct LN200
;|***   {
;|***   unsigned int  new_data;
;|***   long unsigned frame;
;|***   unsigned long time_high;
;|***   unsigned      time_low;
;|***   unsigned      data[16];
;|***   };
;|*** 
;|*** extern unsigned char ln200_buffer[32];
;|*** extern unsigned ln200_new_data;
;|*** extern unsigned long ln200_data_frame;
;|*** extern char pcm[96];
;|*** 
;|*** Cescc *t1; // makes the instance of Cescc class object visible to the ISR
;|***           
;|*** Cescc::Cescc()  // constructor
;|***   {
; Line 47
	*** 000000	c8 04 00 00 		enter	4,0
	*** 000004	57 			push	di
	*** 000005	56 			push	si
;	i = -2
;	j = -4
;	this = 6
;|***   unsigned i,j;
;|***   
;|***   t1 = this;
; Line 50
	*** 000006	8b 46 06 		mov	ax,WORD PTR [bp+6]	;this
	*** 000009	8b 56 08 		mov	dx,WORD PTR [bp+8]
	*** 00000c	a3 00 00 		mov	WORD PTR ?t1@@3PEVCescc@@E,ax	;t1
	*** 00000f	89 16 02 00 		mov	WORD PTR ?t1@@3PEVCescc@@E+2,dx	;t1
;|***   
;|***   for(i=0;i<MAX_PORTS;i++)
; Line 52
	*** 000013	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
	*** 000018	e9 03 00 		jmp	$F1419
					$FC1420:
	*** 00001b	ff 46 fe 		inc	WORD PTR [bp-2]	;i
					$F1419:
	*** 00001e	83 7e fe 02 		cmp	WORD PTR [bp-2],2	;i
	*** 000022	72 03 			jb	$JCC34
	*** 000024	e9 40 01 		jmp	$FB1421
					$JCC34:
;|***     {
; Line 53
;|***     port_list[i] = 0;
; Line 54
	*** 000027	8b 5e fe 		mov	bx,WORD PTR [bp-2]	;i
	*** 00002a	d1 e3 			shl	bx,1
	*** 00002c	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00002f	26 c7 00 00 00 		mov	WORD PTR es:[bx][si],0
;|***     port_open_list[i] = 0;                 
; Line 55
	*** 000034	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 000037	d1 e6 			shl	si,1
	*** 000039	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00003c	26 c7 40 04 00 00 	mov	WORD PTR es:[bx+4][si],0
;|***     interrupt_list[i] = 0;
; Line 56
	*** 000042	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 000045	d1 e6 			shl	si,1
	*** 000047	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00004a	26 c7 40 08 00 00 	mov	WORD PTR es:[bx+8][si],0
;|***     for(j=0;j<MAX_RBUFS;j++)rxbuffer[i][j] = 0;
; Line 57
	*** 000050	c7 46 fc 00 00 		mov	WORD PTR [bp-4],0	;j
	*** 000055	e9 03 00 		jmp	$F1422
					$FC1423:
	*** 000058	ff 46 fc 		inc	WORD PTR [bp-4]	;j
					$F1422:
	*** 00005b	83 7e fc 10 		cmp	WORD PTR [bp-4],16	;0010H	;j
	*** 00005f	72 03 			jb	$JCC95
	*** 000061	e9 1c 00 		jmp	$FB1424
					$JCC95:
	*** 000064	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 000067	c1 e6 04 		shl	si,4
	*** 00006a	03 76 fc 		add	si,WORD PTR [bp-4]	;j
	*** 00006d	c1 e6 02 		shl	si,2
	*** 000070	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000073	2b c0 			sub	ax,ax
	*** 000075	26 89 40 7c 		mov	WORD PTR es:[bx+124][si],ax
	*** 000079	26 89 40 7a 		mov	WORD PTR es:[bx+122][si],ax
	*** 00007d	e9 d8 ff 		jmp	$FC1423
					$FB1424:
;|***     for(j=0;j<MAX_TBUFS;j++)txbuffer[i][j] = 0;
; Line 58
	*** 000080	c7 46 fc 00 00 		mov	WORD PTR [bp-4],0	;j
	*** 000085	e9 03 00 		jmp	$F1425
					$FC1426:
	*** 000088	ff 46 fc 		inc	WORD PTR [bp-4]	;j
					$F1425:
	*** 00008b	83 7e fc 10 		cmp	WORD PTR [bp-4],16	;0010H	;j
	*** 00008f	72 03 			jb	$JCC143
	*** 000091	e9 1e 00 		jmp	$FB1427
					$JCC143:
	*** 000094	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 000097	c1 e6 04 		shl	si,4
	*** 00009a	03 76 fc 		add	si,WORD PTR [bp-4]	;j
	*** 00009d	c1 e6 02 		shl	si,2
	*** 0000a0	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0000a3	2b c0 			sub	ax,ax
	*** 0000a5	26 89 80 fc 00 		mov	WORD PTR es:[bx+252][si],ax
	*** 0000aa	26 89 80 fa 00 		mov	WORD PTR es:[bx+250][si],ax
	*** 0000af	e9 d6 ff 		jmp	$FC1426
					$FB1427:
;|***     timer_status[i] = 0;
; Line 59
	*** 0000b2	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0000b5	d1 e6 			shl	si,1
	*** 0000b7	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0000ba	26 c7 80 8a 01 00 00 	mov	WORD PTR es:[bx+394][si],0
;|***     current_rxbuf[i] = 0;
; Line 60
	*** 0000c1	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0000c4	d1 e6 			shl	si,1
	*** 0000c6	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0000c9	26 c7 80 7a 01 00 00 	mov	WORD PTR es:[bx+378][si],0
;|***     current_txbuf[i] = 0;
; Line 61
	*** 0000d0	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0000d3	d1 e6 			shl	si,1
	*** 0000d5	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0000d8	26 c7 80 7e 01 00 00 	mov	WORD PTR es:[bx+382][si],0
;|***     max_rxbuf[i] = 0;
; Line 62
	*** 0000df	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0000e2	d1 e6 			shl	si,1
	*** 0000e4	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0000e7	26 c7 80 82 01 00 00 	mov	WORD PTR es:[bx+386][si],0
;|***     max_txbuf[i] = 0;
; Line 63
	*** 0000ee	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0000f1	d1 e6 			shl	si,1
	*** 0000f3	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0000f6	26 c7 80 86 01 00 00 	mov	WORD PTR es:[bx+390][si],0
;|***     tx_type[i] = 0x08;
; Line 64
	*** 0000fd	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 000100	d1 e6 			shl	si,1
	*** 000102	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000105	26 c7 80 8e 01 08 00 	mov	WORD PTR es:[bx+398][si],8
;|***     istxing[i] = 0; //==1 if a frame is being sent ,==0 if no txing is going on
; Line 65
	*** 00010c	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 00010f	d1 e6 			shl	si,1
	*** 000111	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000114	26 c7 80 92 01 00 00 	mov	WORD PTR es:[bx+402][si],0
;|***     port_dmat_list[i] = 0;
; Line 66
	*** 00011b	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 00011e	d1 e6 			shl	si,1
	*** 000120	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000123	26 c7 40 0c 00 00 	mov	WORD PTR es:[bx+12][si],0
;|***     port_dmar_list[i] = 0;
; Line 67
	*** 000129	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 00012c	d1 e6 			shl	si,1
	*** 00012e	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000131	26 c7 40 10 00 00 	mov	WORD PTR es:[bx+16][si],0
;|***     port_status[i] = 0;
; Line 68
	*** 000137	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 00013a	d1 e6 			shl	si,1
	*** 00013c	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00013f	26 c7 80 96 01 00 00 	mov	WORD PTR es:[bx+406][si],0
;|***     channel[i] = 0;
; Line 69
	*** 000146	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 000149	d1 e6 			shl	si,1
	*** 00014b	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00014e	26 c7 80 9a 01 00 00 	mov	WORD PTR es:[bx+410][si],0
;|***     eopmode[i] = 0;
; Line 70
	*** 000155	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 000158	d1 e6 			shl	si,1
	*** 00015a	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00015d	26 c7 80 9e 01 00 00 	mov	WORD PTR es:[bx+414][si],0
;|***     }
; Line 71
	*** 000164	e9 b4 fe 		jmp	$FC1420
					$FB1421:
;|***     
;|***   for(i=0;i<16;i++)
; Line 73
	*** 000167	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
	*** 00016c	e9 03 00 		jmp	$F1428
					$FC1429:
	*** 00016f	ff 46 fe 		inc	WORD PTR [bp-2]	;i
					$F1428:
	*** 000172	83 7e fe 10 		cmp	WORD PTR [bp-2],16	;0010H	;i
	*** 000176	72 03 			jb	$JCC374
	*** 000178	e9 24 00 		jmp	$FB1430
					$JCC374:
;|***     {
; Line 74
;|***     hooked_irqs[i] = 0;
; Line 75
	*** 00017b	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 00017e	d1 e6 			shl	si,1
	*** 000180	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000183	26 c7 40 14 00 00 	mov	WORD PTR es:[bx+20][si],0
;|***     old_service_routines[i] = NULL;
; Line 76
	*** 000189	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 00018c	c1 e6 02 		shl	si,2
	*** 00018f	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000192	2b c0 			sub	ax,ax
	*** 000194	26 89 40 36 		mov	WORD PTR es:[bx+54][si],ax
	*** 000198	26 89 40 34 		mov	WORD PTR es:[bx+52][si],ax
;|***     }
; Line 77
	*** 00019c	e9 d0 ff 		jmp	$FC1429
					$FB1430:
;|***     
;|***   next_port = 0;
; Line 79
	*** 00019f	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0001a2	26 c7 47 74 00 00 	mov	WORD PTR es:[bx+116],0
;|***   next_irq =0;
; Line 80
	*** 0001a8	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0001ab	26 c7 47 76 00 00 	mov	WORD PTR es:[bx+118],0
;|***   upper_irq = 0;
; Line 81
	*** 0001b1	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0001b4	26 c7 47 78 00 00 	mov	WORD PTR es:[bx+120],0
;|*** 
;|***   // not needed once fixed settings PVR reg in init_escc for channela in
;|***   // ln200com.cpp  
;|***   //  outp(0x240 + PCR,inp(0x240 + PCR) & ~0x08);//set DTR to output
;|***   //  outp(0x240 + PVR,inp(0x240 + PVR) | 0x08);//set DTR
;|*** 
;|***   } // end constructor
; Line 88
	*** 0001ba	8b 46 06 		mov	ax,WORD PTR [bp+6]	;this
	*** 0001bd	8b 56 08 		mov	dx,WORD PTR [bp+8]
	*** 0001c0	e9 00 00 		jmp	$EX1416
					$EX1416:
	*** 0001c3	5e 			pop	si
	*** 0001c4	5f 			pop	di
	*** 0001c5	c9 			leave	
	*** 0001c6	ca 04 00 		ret	4

??0Cescc@@REC@XZ	ENDP
	PUBLIC	??1Cescc@@REC@XZ	; Cescc::~Cescc
??1Cescc@@REC@XZ	PROC FAR	; Cescc::~Cescc
;|*** 
;|*** 
;|*** 
;|*** Cescc::~Cescc()  // destructor
;|***   {
; Line 93
	*** 0001c9	c8 04 00 00 		enter	4,0
	*** 0001cd	57 			push	di
	*** 0001ce	56 			push	si
;	i = -2
;	j = -4
;	this = 6
;|***   unsigned i,j;
;|***   
;|***   //check if any open ports left if so then unhook unterrupts and kill them free any buffers etc
;|***   //printf("in destructor\n\r");
;|***   //walk the port list and turn off ints at the uarts
;|***   for(i=0;i<next_port;i++)
; Line 99
	*** 0001cf	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
	*** 0001d4	e9 03 00 		jmp	$F1436
					$FC1437:
	*** 0001d7	ff 46 fe 		inc	WORD PTR [bp-2]	;i
					$F1436:
	*** 0001da	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;i
	*** 0001dd	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0001e0	26 39 47 74 		cmp	WORD PTR es:[bx+116],ax
	*** 0001e4	77 03 			ja	$JCC484
	*** 0001e6	e9 72 02 		jmp	$FB1438
					$JCC484:
;|***     {
; Line 100
;|***     if(port_list[i]!=0)
; Line 101
	*** 0001e9	8b 5e fe 		mov	bx,WORD PTR [bp-2]	;i
	*** 0001ec	d1 e3 			shl	bx,1
	*** 0001ee	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0001f1	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 0001f5	75 03 			jne	$JCC501
	*** 0001f7	e9 5e 02 		jmp	$I1439
					$JCC501:
;|***       {
; Line 102
;|***       outp(port_list[i]+PVR,(inp(port_list[i]+PVR)&0xfe)+channel[i]); //set current channel (a or b)
; Line 103
	*** 0001fa	8b 5e fe 		mov	bx,WORD PTR [bp-2]	;i
	*** 0001fd	d1 e3 			shl	bx,1
	*** 0001ff	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000202	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000205	05 1c 00 		add	ax,28	;001cH
	*** 000208	50 			push	ax
	*** 000209	9a 00 00 00 00 		call	FAR PTR _inp
	*** 00020e	83 c4 02 		add	sp,2
	*** 000211	25 fe 00 		and	ax,254	;00feH
	*** 000214	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000217	81 c3 9a 01 		add	bx,410	;019aH
	*** 00021b	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 00021e	d1 e6 			shl	si,1
	*** 000220	26 03 00 		add	ax,WORD PTR es:[bx][si]
	*** 000223	50 			push	ax
	*** 000224	8b 5e fe 		mov	bx,WORD PTR [bp-2]	;i
	*** 000227	d1 e3 			shl	bx,1
	*** 000229	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00022c	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00022f	05 1c 00 		add	ax,28	;001cH
	*** 000232	50 			push	ax
	*** 000233	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000238	83 c4 04 		add	sp,4
;|***       outp(port_list[i]+IMR0,0xff);//disable interrupts at escc!!!
; Line 104
	*** 00023b	68 ff 00 		push	255	;00ffH
	*** 00023e	8b 5e fe 		mov	bx,WORD PTR [bp-2]	;i
	*** 000241	d1 e3 			shl	bx,1
	*** 000243	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000246	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000249	05 1a 00 		add	ax,26	;001aH
	*** 00024c	50 			push	ax
	*** 00024d	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000252	83 c4 04 		add	sp,4
;|***       outp(port_list[i]+IMR1,0xff);
; Line 105
	*** 000255	68 ff 00 		push	255	;00ffH
	*** 000258	8b 5e fe 		mov	bx,WORD PTR [bp-2]	;i
	*** 00025b	d1 e3 			shl	bx,1
	*** 00025d	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000260	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000263	05 1b 00 		add	ax,27	;001bH
	*** 000266	50 			push	ax
	*** 000267	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00026c	83 c4 04 		add	sp,4
;|***       outp(port_list[i]+PIM,0xff);
; Line 106
	*** 00026f	68 ff 00 		push	255	;00ffH
	*** 000272	8b 5e fe 		mov	bx,WORD PTR [bp-2]	;i
	*** 000275	d1 e3 			shl	bx,1
	*** 000277	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00027a	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00027d	05 1d 00 		add	ax,29	;001dH
	*** 000280	50 			push	ax
	*** 000281	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000286	83 c4 04 		add	sp,4
;|***       //if the port is open we need to free all the allocated buffer spaces
;|***       //ffree ignores NULL arguments so we should be safe freeing all of these pointers
;|***       //as the ones that were allocated will not be null, all others should be NULL!!!
;|***       for(j=0;j<max_rxbuf[i];j++) _ffree(rxbuffer[i][j]);
; Line 110
	*** 000289	c7 46 fc 00 00 		mov	WORD PTR [bp-4],0	;j
	*** 00028e	e9 03 00 		jmp	$F1440
					$FC1441:
	*** 000291	ff 46 fc 		inc	WORD PTR [bp-4]	;j
					$F1440:
	*** 000294	8b 46 fc 		mov	ax,WORD PTR [bp-4]	;j
	*** 000297	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00029a	81 c3 82 01 		add	bx,386	;0182H
	*** 00029e	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0002a1	d1 e6 			shl	si,1
	*** 0002a3	26 39 00 		cmp	WORD PTR es:[bx][si],ax
	*** 0002a6	77 03 			ja	$JCC678
	*** 0002a8	e9 22 00 		jmp	$FB1442
					$JCC678:
	*** 0002ab	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0002ae	c1 e6 04 		shl	si,4
	*** 0002b1	03 76 fc 		add	si,WORD PTR [bp-4]	;j
	*** 0002b4	c1 e6 02 		shl	si,2
	*** 0002b7	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0002ba	26 ff 70 7c 		push	WORD PTR es:[bx+124][si]
	*** 0002be	26 ff 70 7a 		push	WORD PTR es:[bx+122][si]
	*** 0002c2	9a 00 00 00 00 		call	FAR PTR __ffree
	*** 0002c7	83 c4 04 		add	sp,4
	*** 0002ca	e9 c4 ff 		jmp	$FC1441
					$FB1442:
;|***       for(j=0;j<max_txbuf[i];j++) _ffree(txbuffer[i][j]);
; Line 111
	*** 0002cd	c7 46 fc 00 00 		mov	WORD PTR [bp-4],0	;j
	*** 0002d2	e9 03 00 		jmp	$F1443
					$FC1444:
	*** 0002d5	ff 46 fc 		inc	WORD PTR [bp-4]	;j
					$F1443:
	*** 0002d8	8b 46 fc 		mov	ax,WORD PTR [bp-4]	;j
	*** 0002db	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0002de	81 c3 86 01 		add	bx,390	;0186H
	*** 0002e2	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0002e5	d1 e6 			shl	si,1
	*** 0002e7	26 39 00 		cmp	WORD PTR es:[bx][si],ax
	*** 0002ea	77 03 			ja	$JCC746
	*** 0002ec	e9 24 00 		jmp	$FB1445
					$JCC746:
	*** 0002ef	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0002f2	c1 e6 04 		shl	si,4
	*** 0002f5	03 76 fc 		add	si,WORD PTR [bp-4]	;j
	*** 0002f8	c1 e6 02 		shl	si,2
	*** 0002fb	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0002fe	26 ff b0 fc 00 		push	WORD PTR es:[bx+252][si]
	*** 000303	26 ff b0 fa 00 		push	WORD PTR es:[bx+250][si]
	*** 000308	9a 00 00 00 00 		call	FAR PTR __ffree
	*** 00030d	83 c4 04 		add	sp,4
	*** 000310	e9 c2 ff 		jmp	$FC1444
					$FB1445:
;|***       
;|***       if(port_dmat_list[i]!=0)
; Line 113
	*** 000313	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000316	83 c3 0c 		add	bx,12	;000cH
	*** 000319	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 00031c	d1 e6 			shl	si,1
	*** 00031e	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 000322	75 03 			jne	$JCC802
	*** 000324	e9 9b 00 		jmp	$I1446
					$JCC802:
;|***         {
; Line 114
;|***         if(port_dmat_list[i]==1) outp(DMA_MASK_LO,5);
; Line 115
	*** 000327	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00032a	83 c3 0c 		add	bx,12	;000cH
	*** 00032d	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 000330	d1 e6 			shl	si,1
	*** 000332	26 83 38 01 		cmp	WORD PTR es:[bx][si],1
	*** 000336	74 03 			je	$JCC822
	*** 000338	e9 0c 00 		jmp	$I1447
					$JCC822:
	*** 00033b	6a 05 			push	5
	*** 00033d	6a 0a 			push	10	;000aH
	*** 00033f	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000344	83 c4 04 		add	sp,4
;|***         if(port_dmat_list[i]==3) outp(DMA_MASK_LO,7);
; Line 116
					$I1447:
	*** 000347	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00034a	83 c3 0c 		add	bx,12	;000cH
	*** 00034d	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 000350	d1 e6 			shl	si,1
	*** 000352	26 83 38 03 		cmp	WORD PTR es:[bx][si],3
	*** 000356	74 03 			je	$JCC854
	*** 000358	e9 0c 00 		jmp	$I1448
					$JCC854:
	*** 00035b	6a 07 			push	7
	*** 00035d	6a 0a 			push	10	;000aH
	*** 00035f	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000364	83 c4 04 		add	sp,4
;|***         if(port_dmat_list[i]==5) outp(DMA_MASK_HI,5);
; Line 117
					$I1448:
	*** 000367	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00036a	83 c3 0c 		add	bx,12	;000cH
	*** 00036d	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 000370	d1 e6 			shl	si,1
	*** 000372	26 83 38 05 		cmp	WORD PTR es:[bx][si],5
	*** 000376	74 03 			je	$JCC886
	*** 000378	e9 0d 00 		jmp	$I1449
					$JCC886:
	*** 00037b	6a 05 			push	5
	*** 00037d	68 d4 00 		push	212	;00d4H
	*** 000380	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000385	83 c4 04 		add	sp,4
;|***         if(port_dmat_list[i]==7) outp(DMA_MASK_HI,7);
; Line 118
					$I1449:
	*** 000388	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00038b	83 c3 0c 		add	bx,12	;000cH
	*** 00038e	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 000391	d1 e6 			shl	si,1
	*** 000393	26 83 38 07 		cmp	WORD PTR es:[bx][si],7
	*** 000397	74 03 			je	$JCC919
	*** 000399	e9 0d 00 		jmp	$I1450
					$JCC919:
	*** 00039c	6a 07 			push	7
	*** 00039e	68 d4 00 		push	212	;00d4H
	*** 0003a1	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0003a6	83 c4 04 		add	sp,4
;|***         outp(port_list[i]+XBCH,0);//turn DMA off
; Line 119
					$I1450:
	*** 0003a9	6a 00 			push	0
	*** 0003ab	8b 5e fe 		mov	bx,WORD PTR [bp-2]	;i
	*** 0003ae	d1 e3 			shl	bx,1
	*** 0003b0	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0003b3	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0003b6	05 0b 00 		add	ax,11	;000bH
	*** 0003b9	50 			push	ax
	*** 0003ba	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0003bf	83 c4 04 		add	sp,4
;|***         }
; Line 120
;|***         
;|***       if(port_dmar_list[i]!=0)
; Line 122
					$I1446:
	*** 0003c2	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0003c5	83 c3 10 		add	bx,16	;0010H
	*** 0003c8	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0003cb	d1 e6 			shl	si,1
	*** 0003cd	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 0003d1	75 03 			jne	$JCC977
	*** 0003d3	e9 82 00 		jmp	$I1451
					$JCC977:
;|***         {
; Line 123
;|***         if(port_dmar_list[i]==1) outp(DMA_MASK_LO,5);
; Line 124
	*** 0003d6	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0003d9	83 c3 10 		add	bx,16	;0010H
	*** 0003dc	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0003df	d1 e6 			shl	si,1
	*** 0003e1	26 83 38 01 		cmp	WORD PTR es:[bx][si],1
	*** 0003e5	74 03 			je	$JCC997
	*** 0003e7	e9 0c 00 		jmp	$I1452
					$JCC997:
	*** 0003ea	6a 05 			push	5
	*** 0003ec	6a 0a 			push	10	;000aH
	*** 0003ee	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0003f3	83 c4 04 		add	sp,4
;|***         if(port_dmar_list[i]==3) outp(DMA_MASK_LO,7);
; Line 125
					$I1452:
	*** 0003f6	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0003f9	83 c3 10 		add	bx,16	;0010H
	*** 0003fc	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0003ff	d1 e6 			shl	si,1
	*** 000401	26 83 38 03 		cmp	WORD PTR es:[bx][si],3
	*** 000405	74 03 			je	$JCC1029
	*** 000407	e9 0c 00 		jmp	$I1453
					$JCC1029:
	*** 00040a	6a 07 			push	7
	*** 00040c	6a 0a 			push	10	;000aH
	*** 00040e	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000413	83 c4 04 		add	sp,4
;|***         if(port_dmar_list[i]==5) outp(DMA_MASK_HI,5);
; Line 126
					$I1453:
	*** 000416	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000419	83 c3 10 		add	bx,16	;0010H
	*** 00041c	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 00041f	d1 e6 			shl	si,1
	*** 000421	26 83 38 05 		cmp	WORD PTR es:[bx][si],5
	*** 000425	74 03 			je	$JCC1061
	*** 000427	e9 0d 00 		jmp	$I1454
					$JCC1061:
	*** 00042a	6a 05 			push	5
	*** 00042c	68 d4 00 		push	212	;00d4H
	*** 00042f	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000434	83 c4 04 		add	sp,4
;|***         if(port_dmar_list[i]==7) outp(DMA_MASK_HI,7);
; Line 127
					$I1454:
	*** 000437	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00043a	83 c3 10 		add	bx,16	;0010H
	*** 00043d	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 000440	d1 e6 			shl	si,1
	*** 000442	26 83 38 07 		cmp	WORD PTR es:[bx][si],7
	*** 000446	74 03 			je	$JCC1094
	*** 000448	e9 0d 00 		jmp	$I1455
					$JCC1094:
	*** 00044b	6a 07 			push	7
	*** 00044d	68 d4 00 		push	212	;00d4H
	*** 000450	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000455	83 c4 04 		add	sp,4
;|***         }
; Line 128
					$I1455:
;|***       }
; Line 129
					$I1451:
;|***     }
; Line 130
					$I1439:
	*** 000458	e9 7c fd 		jmp	$FC1437
					$FB1438:
;|***   
;|***   //walk the hooked IRQ list and replace the ISR's
;|***   for(i=0;i<next_irq;i++)
; Line 133
	*** 00045b	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
	*** 000460	e9 03 00 		jmp	$F1456
					$FC1457:
	*** 000463	ff 46 fe 		inc	WORD PTR [bp-2]	;i
					$F1456:
	*** 000466	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;i
	*** 000469	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00046c	26 39 47 76 		cmp	WORD PTR es:[bx+118],ax
	*** 000470	77 03 			ja	$JCC1136
	*** 000472	e9 ad 01 		jmp	$FB1458
					$JCC1136:
;|***     {
; Line 134
;|***     if(hooked_irqs[i]<8)
; Line 135
	*** 000475	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000478	83 c3 14 		add	bx,20	;0014H
	*** 00047b	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 00047e	d1 e6 			shl	si,1
	*** 000480	26 83 38 08 		cmp	WORD PTR es:[bx][si],8
	*** 000484	72 03 			jb	$JCC1156
	*** 000486	e9 c0 00 		jmp	$I1459
					$JCC1156:
;|***       {
; Line 136
;|***       _dos_setvect(hooked_irqs[i]+8,old_service_routines[i]);
; Line 137
	*** 000489	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00048c	83 c3 34 		add	bx,52	;0034H
	*** 00048f	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 000492	c1 e6 02 		shl	si,2
	*** 000495	26 ff 70 02 		push	WORD PTR es:[bx+2][si]
	*** 000499	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 00049c	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00049f	83 c3 14 		add	bx,20	;0014H
	*** 0004a2	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0004a5	d1 e6 			shl	si,1
	*** 0004a7	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0004aa	05 08 00 		add	ax,8
	*** 0004ad	50 			push	ax
	*** 0004ae	9a 00 00 00 00 		call	FAR PTR __dos_setvect
	*** 0004b3	83 c4 06 		add	sp,6
;|***       //be nice and mask the IRQ at the PIC...could be bad I suppose... but it is nicer
;|***       j = inp(0x21);
; Line 139
	*** 0004b6	6a 21 			push	33	;0021H
	*** 0004b8	9a 00 00 00 00 		call	FAR PTR _inp
	*** 0004bd	83 c4 02 		add	sp,2
	*** 0004c0	89 46 fc 		mov	WORD PTR [bp-4],ax	;j
;|***       if(hooked_irqs[i] ==3) j = j|0x08;
; Line 140
	*** 0004c3	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0004c6	83 c3 14 		add	bx,20	;0014H
	*** 0004c9	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0004cc	d1 e6 			shl	si,1
	*** 0004ce	26 83 38 03 		cmp	WORD PTR es:[bx][si],3
	*** 0004d2	74 03 			je	$JCC1234
	*** 0004d4	e9 04 00 		jmp	$I1460
					$JCC1234:
	*** 0004d7	83 4e fc 08 		or	WORD PTR [bp-4],8	;j
;|***       if(hooked_irqs[i] ==4) j = j|0x10;
; Line 141
					$I1460:
	*** 0004db	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0004de	83 c3 14 		add	bx,20	;0014H
	*** 0004e1	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0004e4	d1 e6 			shl	si,1
	*** 0004e6	26 83 38 04 		cmp	WORD PTR es:[bx][si],4
	*** 0004ea	74 03 			je	$JCC1258
	*** 0004ec	e9 04 00 		jmp	$I1461
					$JCC1258:
	*** 0004ef	83 4e fc 10 		or	WORD PTR [bp-4],16	;0010H	;j
;|***       if(hooked_irqs[i] ==5) j = j|0x20;
; Line 142
					$I1461:
	*** 0004f3	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0004f6	83 c3 14 		add	bx,20	;0014H
	*** 0004f9	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0004fc	d1 e6 			shl	si,1
	*** 0004fe	26 83 38 05 		cmp	WORD PTR es:[bx][si],5
	*** 000502	74 03 			je	$JCC1282
	*** 000504	e9 04 00 		jmp	$I1462
					$JCC1282:
	*** 000507	83 4e fc 20 		or	WORD PTR [bp-4],32	;0020H	;j
;|***       if(hooked_irqs[i] ==6) j = j|0x40;
; Line 143
					$I1462:
	*** 00050b	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00050e	83 c3 14 		add	bx,20	;0014H
	*** 000511	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 000514	d1 e6 			shl	si,1
	*** 000516	26 83 38 06 		cmp	WORD PTR es:[bx][si],6
	*** 00051a	74 03 			je	$JCC1306
	*** 00051c	e9 04 00 		jmp	$I1463
					$JCC1306:
	*** 00051f	83 4e fc 40 		or	WORD PTR [bp-4],64	;0040H	;j
;|***       if(hooked_irqs[i] ==7) j = j|0x80;
; Line 144
					$I1463:
	*** 000523	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000526	83 c3 14 		add	bx,20	;0014H
	*** 000529	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 00052c	d1 e6 			shl	si,1
	*** 00052e	26 83 38 07 		cmp	WORD PTR es:[bx][si],7
	*** 000532	74 03 			je	$JCC1330
	*** 000534	e9 05 00 		jmp	$I1464
					$JCC1330:
	*** 000537	81 4e fc 80 00 		or	WORD PTR [bp-4],128	;0080H	;j
;|***       outp(0x21,j);
; Line 145
					$I1464:
	*** 00053c	ff 76 fc 		push	WORD PTR [bp-4]	;j
	*** 00053f	6a 21 			push	33	;0021H
	*** 000541	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000546	83 c4 04 		add	sp,4
;|***       }
; Line 146
;|***         
;|***     if(hooked_irqs[i]>8)
; Line 148
					$I1459:
	*** 000549	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00054c	83 c3 14 		add	bx,20	;0014H
	*** 00054f	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 000552	d1 e6 			shl	si,1
	*** 000554	26 83 38 08 		cmp	WORD PTR es:[bx][si],8
	*** 000558	77 03 			ja	$JCC1368
	*** 00055a	e9 c2 00 		jmp	$I1465
					$JCC1368:
;|***       {    
; Line 149
;|***       _dos_setvect(hooked_irqs[i]-8+0x70,old_service_routines[i]);
; Line 150
	*** 00055d	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000560	83 c3 34 		add	bx,52	;0034H
	*** 000563	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 000566	c1 e6 02 		shl	si,2
	*** 000569	26 ff 70 02 		push	WORD PTR es:[bx+2][si]
	*** 00056d	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 000570	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000573	83 c3 14 		add	bx,20	;0014H
	*** 000576	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 000579	d1 e6 			shl	si,1
	*** 00057b	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00057e	05 68 00 		add	ax,104	;0068H
	*** 000581	50 			push	ax
	*** 000582	9a 00 00 00 00 		call	FAR PTR __dos_setvect
	*** 000587	83 c4 06 		add	sp,6
;|***       j = inp(0xa1);
; Line 151
	*** 00058a	68 a1 00 		push	161	;00a1H
	*** 00058d	9a 00 00 00 00 		call	FAR PTR _inp
	*** 000592	83 c4 02 		add	sp,2
	*** 000595	89 46 fc 		mov	WORD PTR [bp-4],ax	;j
;|***       if(hooked_irqs[i] ==9)  j = j|0x02;
; Line 152
	*** 000598	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00059b	83 c3 14 		add	bx,20	;0014H
	*** 00059e	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0005a1	d1 e6 			shl	si,1
	*** 0005a3	26 83 38 09 		cmp	WORD PTR es:[bx][si],9
	*** 0005a7	74 03 			je	$JCC1447
	*** 0005a9	e9 04 00 		jmp	$I1466
					$JCC1447:
	*** 0005ac	83 4e fc 02 		or	WORD PTR [bp-4],2	;j
;|***       if(hooked_irqs[i] ==10) j = j|0x04;
; Line 153
					$I1466:
	*** 0005b0	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0005b3	83 c3 14 		add	bx,20	;0014H
	*** 0005b6	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0005b9	d1 e6 			shl	si,1
	*** 0005bb	26 83 38 0a 		cmp	WORD PTR es:[bx][si],10	;000aH
	*** 0005bf	74 03 			je	$JCC1471
	*** 0005c1	e9 04 00 		jmp	$I1467
					$JCC1471:
	*** 0005c4	83 4e fc 04 		or	WORD PTR [bp-4],4	;j
;|***       if(hooked_irqs[i] ==11) j = j|0x08;
; Line 154
					$I1467:
	*** 0005c8	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0005cb	83 c3 14 		add	bx,20	;0014H
	*** 0005ce	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0005d1	d1 e6 			shl	si,1
	*** 0005d3	26 83 38 0b 		cmp	WORD PTR es:[bx][si],11	;000bH
	*** 0005d7	74 03 			je	$JCC1495
	*** 0005d9	e9 04 00 		jmp	$I1468
					$JCC1495:
	*** 0005dc	83 4e fc 08 		or	WORD PTR [bp-4],8	;j
;|***       if(hooked_irqs[i] ==12) j = j|0x10;
; Line 155
					$I1468:
	*** 0005e0	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0005e3	83 c3 14 		add	bx,20	;0014H
	*** 0005e6	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 0005e9	d1 e6 			shl	si,1
	*** 0005eb	26 83 38 0c 		cmp	WORD PTR es:[bx][si],12	;000cH
	*** 0005ef	74 03 			je	$JCC1519
	*** 0005f1	e9 04 00 		jmp	$I1469
					$JCC1519:
	*** 0005f4	83 4e fc 10 		or	WORD PTR [bp-4],16	;0010H	;j
;|***       if(hooked_irqs[i] ==15) j = j|0x80;
; Line 156
					$I1469:
	*** 0005f8	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0005fb	83 c3 14 		add	bx,20	;0014H
	*** 0005fe	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 000601	d1 e6 			shl	si,1
	*** 000603	26 83 38 0f 		cmp	WORD PTR es:[bx][si],15	;000fH
	*** 000607	74 03 			je	$JCC1543
	*** 000609	e9 05 00 		jmp	$I1470
					$JCC1543:
	*** 00060c	81 4e fc 80 00 		or	WORD PTR [bp-4],128	;0080H	;j
;|***       outp(0xa1,j);
; Line 157
					$I1470:
	*** 000611	ff 76 fc 		push	WORD PTR [bp-4]	;j
	*** 000614	68 a1 00 		push	161	;00a1H
	*** 000617	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00061c	83 c4 04 		add	sp,4
;|***       } 
; Line 158
;|***     }
; Line 159
					$I1465:
	*** 00061f	e9 41 fe 		jmp	$FC1457
					$FB1458:
;|***   }  // end destructor
; Line 160
	*** 000622	e9 00 00 		jmp	$EX1433
					$EX1433:
	*** 000625	5e 			pop	si
	*** 000626	5f 			pop	di
	*** 000627	c9 			leave	
	*** 000628	ca 04 00 		ret	4

??1Cescc@@REC@XZ	ENDP
	PUBLIC	?add_port@Cescc@@RECIIIIII@Z	; Cescc::add_port
?add_port@Cescc@@RECIIIIII@Z	PROC FAR	; Cescc::add_port
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** unsigned Cescc::add_port(unsigned base, unsigned chan, unsigned irq, unsigned dmar, unsigned dmat)
;|***   {
; Line 167
	*** 00062b	c8 04 00 00 		enter	4,0
	*** 00062f	57 			push	di
	*** 000630	56 			push	si
;	i = -2
;	avail = -4
;	this = 6
;	base = 18
;	chan = 16
;	irq = 14
;	dmar = 12
;	dmat = 10
;|***   unsigned i;
;|***   unsigned avail;
;|***   
;|***   avail = next_port;      // next_port is reset to 0 in Cescc() contructor
; Line 171
	*** 000631	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000634	26 8b 47 74 		mov	ax,WORD PTR es:[bx+116]
	*** 000638	89 46 fc 		mov	WORD PTR [bp-4],ax	;avail
;|***                           // then incremented at end of this function  
;|***   for(i=0;i<=next_port;i++)
; Line 173
	*** 00063b	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
	*** 000640	e9 03 00 		jmp	$F1480
					$FC1481:
	*** 000643	ff 46 fe 		inc	WORD PTR [bp-2]	;i
					$F1480:
	*** 000646	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;i
	*** 000649	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00064c	26 39 47 74 		cmp	WORD PTR es:[bx+116],ax
	*** 000650	73 03 			jae	$JCC1616
	*** 000652	e9 1d 00 		jmp	$FB1482
					$JCC1616:
;|***     {
; Line 174
;|***     if(port_list[i]==0)   //port_list is the table of escc base addresses for each port
; Line 175
	*** 000655	8b 5e fe 		mov	bx,WORD PTR [bp-2]	;i
	*** 000658	d1 e3 			shl	bx,1
	*** 00065a	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00065d	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 000661	74 03 			je	$JCC1633
	*** 000663	e9 09 00 		jmp	$I1483
					$JCC1633:
;|***       {                   //find first unused (available) slot in port_list table
; Line 176
;|***       avail = i;          //and use the slot for the port you are adding now
; Line 177
	*** 000666	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;i
	*** 000669	89 46 fc 		mov	WORD PTR [bp-4],ax	;avail
;|***       break;
; Line 178
	*** 00066c	e9 03 00 		jmp	$FB1482
;|***       }
; Line 179
;|***     }
; Line 180
					$I1483:
	*** 00066f	e9 d1 ff 		jmp	$FC1481
					$FB1482:
;|***     
;|***   port_list[avail] = base;            //store port base address
; Line 182
	*** 000672	8b 5e fc 		mov	bx,WORD PTR [bp-4]	;avail
	*** 000675	d1 e3 			shl	bx,1
	*** 000677	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00067a	8b 46 12 		mov	ax,WORD PTR [bp+18]	;base
	*** 00067d	26 89 00 		mov	WORD PTR es:[bx][si],ax
;|***   interrupt_list[avail] = irq;        //store port irq
; Line 183
	*** 000680	8b 46 0e 		mov	ax,WORD PTR [bp+14]	;irq
	*** 000683	8b 76 fc 		mov	si,WORD PTR [bp-4]	;avail
	*** 000686	d1 e6 			shl	si,1
	*** 000688	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00068b	26 89 40 08 		mov	WORD PTR es:[bx+8][si],ax
;|***   port_dmar_list[avail] = dmar;       //store port rx dma channel
; Line 184
	*** 00068f	8b 46 0c 		mov	ax,WORD PTR [bp+12]	;dmar
	*** 000692	8b 76 fc 		mov	si,WORD PTR [bp-4]	;avail
	*** 000695	d1 e6 			shl	si,1
	*** 000697	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00069a	26 89 40 10 		mov	WORD PTR es:[bx+16][si],ax
;|***   port_dmat_list[avail] = dmat;       //store port tx dma channel                     
; Line 185
	*** 00069e	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;dmat
	*** 0006a1	8b 76 fc 		mov	si,WORD PTR [bp-4]	;avail
	*** 0006a4	d1 e6 			shl	si,1
	*** 0006a6	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0006a9	26 89 40 0c 		mov	WORD PTR es:[bx+12][si],ax
;|***   channel[avail] = chan;              //store port channel number 0 or 1 (A or B)
; Line 186
	*** 0006ad	8b 46 10 		mov	ax,WORD PTR [bp+16]	;chan
	*** 0006b0	8b 76 fc 		mov	si,WORD PTR [bp-4]	;avail
	*** 0006b3	d1 e6 			shl	si,1
	*** 0006b5	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0006b8	26 89 80 9a 01 		mov	WORD PTR es:[bx+410][si],ax
;|*** 
;|***   //set up the ESCC port register so we can access both channels   
;|***   //note this *****MUST***** be the first access to the escc or we can't rely on talking to a specific
;|***   //channel (defaults to channel 1, or the upper channel when bit 0 is defined as an input)
;|***   //this is because bit 0 of the escc universal port is wired to select either channel A or B
;|***   outp(base+PCR,0xe0);  //bit 0 = channel select  (output; 0 selects channel A; 1 selects channel B)
; Line 192
	*** 0006bd	68 e0 00 		push	224	;00e0H
	*** 0006c0	8b 46 12 		mov	ax,WORD PTR [bp+18]	;base
	*** 0006c3	05 1e 00 		add	ax,30	;001eH
	*** 0006c6	50 			push	ax
	*** 0006c7	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0006cc	83 c4 04 		add	sp,4
;|***             //bit 1 = not used      (output)
;|***             //bit 2 = not used      (output)
;|***             //bit 3 = DTR channel 0   (output)
;|***             //bit 4 = DTR channel 1   (output)
;|***             //bit 5 = DSR channel 0   (input)
;|***             //bit 6 = DSR channel 1   (input)
;|***             //bit 7 = TC for DMA (off ISA bus)(input)
;|***             
;|***   outp(base+IPC,0x03);  //escc int pin must be slave mode active high push pull to work.
; Line 201
	*** 0006cf	6a 03 			push	3
	*** 0006d1	8b 46 12 		mov	ax,WORD PTR [bp+18]	;base
	*** 0006d4	05 19 00 		add	ax,25	;0019H
	*** 0006d7	50 			push	ax
	*** 0006d8	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0006dd	83 c4 04 		add	sp,4
;|***   
;|***   //check current interrupts against ones that are hooked and hook new interrupt if necessary
;|***   for(i=0;i<16;i++)
; Line 204
	*** 0006e0	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
	*** 0006e5	e9 03 00 		jmp	$F1484
					$FC1485:
	*** 0006e8	ff 46 fe 		inc	WORD PTR [bp-2]	;i
					$F1484:
	*** 0006eb	83 7e fe 10 		cmp	WORD PTR [bp-2],16	;0010H	;i
	*** 0006ef	72 03 			jb	$JCC1775
	*** 0006f1	e9 1f 00 		jmp	$FB1486
					$JCC1775:
;|***     {
; Line 205
;|***     if(hooked_irqs[i]==irq) goto skip_irqsetup;
; Line 206
	*** 0006f4	8b 46 0e 		mov	ax,WORD PTR [bp+14]	;irq
	*** 0006f7	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0006fa	83 c3 14 		add	bx,20	;0014H
	*** 0006fd	8b 76 fe 		mov	si,WORD PTR [bp-2]	;i
	*** 000700	d1 e6 			shl	si,1
	*** 000702	26 39 00 		cmp	WORD PTR es:[bx][si],ax
	*** 000705	74 03 			je	$JCC1797
	*** 000707	e9 06 00 		jmp	$I1487
					$JCC1797:
	*** 00070a	e9 ee 01 		jmp	$TH161489
	*** 00070d	e9 cf 01 		jmp	$skip_irqsetup1488
;|***     }                                          
; Line 207
					$I1487:
	*** 000710	e9 d5 ff 		jmp	$FC1485
					$FB1486:
;|*** 
;|***   _disable();
; Line 209
	*** 000713	9a 00 00 00 00 		call	FAR PTR __disable
;|***   
;|***   //next_irq reset to 0 at end of Cescc constructor then incremented at end of add_port()
;|***   if(irq<8)
; Line 212
	*** 000718	83 7e 0e 08 		cmp	WORD PTR [bp+14],8	;irq
	*** 00071c	72 03 			jb	$JCC1820
	*** 00071e	e9 f3 00 		jmp	$I1490
					$JCC1820:
;|***     {
; Line 213
;|***     old_service_routines[next_irq] = _dos_getvect(irq+8); //get old vector and save
; Line 214
	*** 000721	8b 46 0e 		mov	ax,WORD PTR [bp+14]	;irq
	*** 000724	05 08 00 		add	ax,8
	*** 000727	50 			push	ax
	*** 000728	9a 00 00 00 00 		call	FAR PTR __dos_getvect
	*** 00072d	83 c4 02 		add	sp,2
	*** 000730	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000733	26 8b 77 76 		mov	si,WORD PTR es:[bx+118]
	*** 000737	c1 e6 02 		shl	si,2
	*** 00073a	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00073d	26 89 40 34 		mov	WORD PTR es:[bx+52][si],ax
	*** 000741	26 89 50 36 		mov	WORD PTR es:[bx+54][si],dx
;|***     _dos_setvect(irq+8,escc_isr);   //put in our routine
; Line 215
	*** 000745	68 00 00 		push	SEG ?escc_isr@Cescc@@JEAXXZ	;Cescc::escc_isr
	*** 000748	68 00 00 		push	OFFSET ?escc_isr@Cescc@@JEAXXZ	;Cescc::escc_isr
	*** 00074b	8b 46 0e 		mov	ax,WORD PTR [bp+14]	;irq
	*** 00074e	05 08 00 		add	ax,8
	*** 000751	50 			push	ax
	*** 000752	9a 00 00 00 00 		call	FAR PTR __dos_setvect
	*** 000757	83 c4 06 		add	sp,6
;|***     outp(base+PVR,(inp(base+PVR)&0xfe)+chan); //set current channel (a or b)
; Line 216
	*** 00075a	8b 46 12 		mov	ax,WORD PTR [bp+18]	;base
	*** 00075d	05 1c 00 		add	ax,28	;001cH
	*** 000760	50 			push	ax
	*** 000761	9a 00 00 00 00 		call	FAR PTR _inp
	*** 000766	83 c4 02 		add	sp,2
	*** 000769	25 fe 00 		and	ax,254	;00feH
	*** 00076c	03 46 10 		add	ax,WORD PTR [bp+16]	;chan
	*** 00076f	50 			push	ax
	*** 000770	8b 46 12 		mov	ax,WORD PTR [bp+18]	;base
	*** 000773	05 1c 00 		add	ax,28	;001cH
	*** 000776	50 			push	ax
	*** 000777	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00077c	83 c4 04 		add	sp,4
;|***     outp(base+IMR0,0xff);//disable ints from uart
; Line 217
	*** 00077f	68 ff 00 		push	255	;00ffH
	*** 000782	8b 46 12 		mov	ax,WORD PTR [bp+18]	;base
	*** 000785	05 1a 00 		add	ax,26	;001aH
	*** 000788	50 			push	ax
	*** 000789	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00078e	83 c4 04 		add	sp,4
;|***     outp(base+IMR1,0xff);//disable ints from uart
; Line 218
	*** 000791	68 ff 00 		push	255	;00ffH
	*** 000794	8b 46 12 		mov	ax,WORD PTR [bp+18]	;base
	*** 000797	05 1b 00 		add	ax,27	;001bH
	*** 00079a	50 			push	ax
	*** 00079b	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0007a0	83 c4 04 		add	sp,4
;|***     outp(base+PIM,0xff);//disable ints from universal port
; Line 219
	*** 0007a3	68 ff 00 		push	255	;00ffH
	*** 0007a6	8b 46 12 		mov	ax,WORD PTR [bp+18]	;base
	*** 0007a9	05 1d 00 		add	ax,29	;001dH
	*** 0007ac	50 			push	ax
	*** 0007ad	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0007b2	83 c4 04 		add	sp,4
;|***     i = inp(0x21);
; Line 220
	*** 0007b5	6a 21 			push	33	;0021H
	*** 0007b7	9a 00 00 00 00 		call	FAR PTR _inp
	*** 0007bc	83 c4 02 		add	sp,2
	*** 0007bf	89 46 fe 		mov	WORD PTR [bp-2],ax	;i
;|***     if(irq ==3) i = i&0xf7;
; Line 221
	*** 0007c2	83 7e 0e 03 		cmp	WORD PTR [bp+14],3	;irq
	*** 0007c6	74 03 			je	$JCC1990
	*** 0007c8	e9 05 00 		jmp	$I1491
					$JCC1990:
	*** 0007cb	81 66 fe f7 00 		and	WORD PTR [bp-2],247	;00f7H	;i
;|***     if(irq ==4) i = i&0xef;
; Line 222
					$I1491:
	*** 0007d0	83 7e 0e 04 		cmp	WORD PTR [bp+14],4	;irq
	*** 0007d4	74 03 			je	$JCC2004
	*** 0007d6	e9 05 00 		jmp	$I1492
					$JCC2004:
	*** 0007d9	81 66 fe ef 00 		and	WORD PTR [bp-2],239	;00efH	;i
;|***     if(irq ==5) i = i&0xdf;
; Line 223
					$I1492:
	*** 0007de	83 7e 0e 05 		cmp	WORD PTR [bp+14],5	;irq
	*** 0007e2	74 03 			je	$JCC2018
	*** 0007e4	e9 05 00 		jmp	$I1493
					$JCC2018:
	*** 0007e7	81 66 fe df 00 		and	WORD PTR [bp-2],223	;00dfH	;i
;|***     if(irq ==6) i = i&0xbf;
; Line 224
					$I1493:
	*** 0007ec	83 7e 0e 06 		cmp	WORD PTR [bp+14],6	;irq
	*** 0007f0	74 03 			je	$JCC2032
	*** 0007f2	e9 05 00 		jmp	$I1494
					$JCC2032:
	*** 0007f5	81 66 fe bf 00 		and	WORD PTR [bp-2],191	;00bfH	;i
;|***     if(irq ==7) i = i&0x7f;
; Line 225
					$I1494:
	*** 0007fa	83 7e 0e 07 		cmp	WORD PTR [bp+14],7	;irq
	*** 0007fe	74 03 			je	$JCC2046
	*** 000800	e9 04 00 		jmp	$I1495
					$JCC2046:
	*** 000803	83 66 fe 7f 		and	WORD PTR [bp-2],127	;007fH	;i
;|***     outp(0x21,i);
; Line 226
					$I1495:
	*** 000807	ff 76 fe 		push	WORD PTR [bp-2]	;i
	*** 00080a	6a 21 			push	33	;0021H
	*** 00080c	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000811	83 c4 04 		add	sp,4
;|***     }
; Line 227
;|*** 
;|***   if(irq>8)
; Line 229
					$I1490:
	*** 000814	83 7e 0e 08 		cmp	WORD PTR [bp+14],8	;irq
	*** 000818	77 03 			ja	$JCC2072
	*** 00081a	e9 a3 00 		jmp	$I1496
					$JCC2072:
;|***     {
; Line 230
;|***     old_service_routines[next_irq] = _dos_getvect(irq+0x70 -8);
; Line 231
	*** 00081d	8b 46 0e 		mov	ax,WORD PTR [bp+14]	;irq
	*** 000820	05 68 00 		add	ax,104	;0068H
	*** 000823	50 			push	ax
	*** 000824	9a 00 00 00 00 		call	FAR PTR __dos_getvect
	*** 000829	83 c4 02 		add	sp,2
	*** 00082c	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00082f	26 8b 77 76 		mov	si,WORD PTR es:[bx+118]
	*** 000833	c1 e6 02 		shl	si,2
	*** 000836	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000839	26 89 40 34 		mov	WORD PTR es:[bx+52][si],ax
	*** 00083d	26 89 50 36 		mov	WORD PTR es:[bx+54][si],dx
;|***     _dos_setvect(irq+0x70-8,escc_isr);
; Line 232
	*** 000841	68 00 00 		push	SEG ?escc_isr@Cescc@@JEAXXZ	;Cescc::escc_isr
	*** 000844	68 00 00 		push	OFFSET ?escc_isr@Cescc@@JEAXXZ	;Cescc::escc_isr
	*** 000847	8b 46 0e 		mov	ax,WORD PTR [bp+14]	;irq
	*** 00084a	05 68 00 		add	ax,104	;0068H
	*** 00084d	50 			push	ax
	*** 00084e	9a 00 00 00 00 		call	FAR PTR __dos_setvect
	*** 000853	83 c4 06 		add	sp,6
;|***     i = inp(0xa1);
; Line 233
	*** 000856	68 a1 00 		push	161	;00a1H
	*** 000859	9a 00 00 00 00 		call	FAR PTR _inp
	*** 00085e	83 c4 02 		add	sp,2
	*** 000861	89 46 fe 		mov	WORD PTR [bp-2],ax	;i
;|***     if(irq ==9)         i = i&0xfd;
; Line 234
	*** 000864	83 7e 0e 09 		cmp	WORD PTR [bp+14],9	;irq
	*** 000868	74 03 			je	$JCC2152
	*** 00086a	e9 05 00 		jmp	$I1497
					$JCC2152:
	*** 00086d	81 66 fe fd 00 		and	WORD PTR [bp-2],253	;00fdH	;i
;|***     if(irq ==10)        i = i&0xfb;
; Line 235
					$I1497:
	*** 000872	83 7e 0e 0a 		cmp	WORD PTR [bp+14],10	;000aH	;irq
	*** 000876	74 03 			je	$JCC2166
	*** 000878	e9 05 00 		jmp	$I1498
					$JCC2166:
	*** 00087b	81 66 fe fb 00 		and	WORD PTR [bp-2],251	;00fbH	;i
;|***     if(irq ==11)        i = i&0xf7;
; Line 236
					$I1498:
	*** 000880	83 7e 0e 0b 		cmp	WORD PTR [bp+14],11	;000bH	;irq
	*** 000884	74 03 			je	$JCC2180
	*** 000886	e9 05 00 		jmp	$I1499
					$JCC2180:
	*** 000889	81 66 fe f7 00 		and	WORD PTR [bp-2],247	;00f7H	;i
;|***     if(irq ==12)        i = i&0xef;
; Line 237
					$I1499:
	*** 00088e	83 7e 0e 0c 		cmp	WORD PTR [bp+14],12	;000cH	;irq
	*** 000892	74 03 			je	$JCC2194
	*** 000894	e9 05 00 		jmp	$I1500
					$JCC2194:
	*** 000897	81 66 fe ef 00 		and	WORD PTR [bp-2],239	;00efH	;i
;|***     if(irq ==15)        i = i&0x7f;
; Line 238
					$I1500:
	*** 00089c	83 7e 0e 0f 		cmp	WORD PTR [bp+14],15	;000fH	;irq
	*** 0008a0	74 03 			je	$JCC2208
	*** 0008a2	e9 04 00 		jmp	$I1501
					$JCC2208:
	*** 0008a5	83 66 fe 7f 		and	WORD PTR [bp-2],127	;007fH	;i
;|***     outp(0xa1,i);
; Line 239
					$I1501:
	*** 0008a9	ff 76 fe 		push	WORD PTR [bp-2]	;i
	*** 0008ac	68 a1 00 		push	161	;00a1H
	*** 0008af	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0008b4	83 c4 04 		add	sp,4
;|***     upper_irq = 1;
; Line 240
	*** 0008b7	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0008ba	26 c7 47 78 01 00 	mov	WORD PTR es:[bx+120],1
;|***     }
; Line 241
;|***     
;|***   _enable();
; Line 243
					$I1496:
	*** 0008c0	9a 00 00 00 00 		call	FAR PTR __enable
;|*** 
;|***   hooked_irqs[next_irq] = irq;
; Line 245
	*** 0008c5	8b 46 0e 		mov	ax,WORD PTR [bp+14]	;irq
	*** 0008c8	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0008cb	26 8b 77 76 		mov	si,WORD PTR es:[bx+118]
	*** 0008cf	d1 e6 			shl	si,1
	*** 0008d1	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0008d4	26 89 40 14 		mov	WORD PTR es:[bx+20][si],ax
;|***   next_irq++;
; Line 246
	*** 0008d8	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0008db	26 ff 47 76 		inc	WORD PTR es:[bx+118]
;|*** 
;|***   //note we will wait until we get the init_port call before enabling the ints at the uart
;|***   //this will prevent bad things from happening like not having a buffer to put data in !!:)  
;|***   skip_irqsetup:
; Line 250
					$skip_irqsetup1488:
;|***   if(avail==next_port) next_port++;
; Line 251
	*** 0008df	8b 46 fc 		mov	ax,WORD PTR [bp-4]	;avail
	*** 0008e2	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0008e5	26 39 47 74 		cmp	WORD PTR es:[bx+116],ax
	*** 0008e9	74 03 			je	$JCC2281
	*** 0008eb	e9 07 00 		jmp	$I1502
					$JCC2281:
	*** 0008ee	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0008f1	26 ff 47 74 		inc	WORD PTR es:[bx+116]
;|***   return (avail);
; Line 252
					$I1502:
	*** 0008f5	8b 46 fc 		mov	ax,WORD PTR [bp-4]	;avail
	*** 0008f8	e9 03 00 		jmp	$EX1477
;|***   }     //  end add_port()
; Line 253
					$TH161489:
	*** 0008fb	e9 e1 ff 		jmp	$skip_irqsetup1488
					$EX1477:
	*** 0008fe	5e 			pop	si
	*** 0008ff	5f 			pop	di
	*** 000900	c9 			leave	
	*** 000901	ca 0e 00 		ret	14	;0000000eH

?add_port@Cescc@@RECIIIIII@Z	ENDP
	PUBLIC	?kill_port@Cescc@@RECII@Z	; Cescc::kill_port
?kill_port@Cescc@@RECII@Z	PROC FAR	; Cescc::kill_port
;|*** 
;|*** 
;|*** 
;|*** 
;|*** unsigned Cescc::kill_port(unsigned port)
;|***   {
; Line 259
	*** 000904	c8 02 00 00 		enter	2,0
	*** 000908	57 			push	di
	*** 000909	56 			push	si
;	i = -2
;	this = 6
;	port = 10
;|***   //here we should set the port list stuff to 0, and unhook the irq
;|***   //walk the port list and check the irq to see if any other ports are using it, if not then 
;|***   //unhook the irq, and mask it at the pic
;|***   
;|***   unsigned i;
;|***   
;|***   //free the buffers for this port
;|***   for(i=0;i<max_rxbuf[port];i++)
; Line 267
	*** 00090a	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
	*** 00090f	e9 03 00 		jmp	$F1507
					$FC1508:
	*** 000912	ff 46 fe 		inc	WORD PTR [bp-2]	;i
					$F1507:
	*** 000915	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;i
	*** 000918	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00091b	81 c3 82 01 		add	bx,386	;0182H
	*** 00091f	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 000922	d1 e6 			shl	si,1
	*** 000924	26 39 00 		cmp	WORD PTR es:[bx][si],ax
	*** 000927	77 03 			ja	$JCC2343
	*** 000929	e9 3b 00 		jmp	$FB1509
					$JCC2343:
;|***     {
; Line 268
;|***     _ffree(rxbuffer[port][i]);
; Line 269
	*** 00092c	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 00092f	c1 e6 04 		shl	si,4
	*** 000932	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 000935	c1 e6 02 		shl	si,2
	*** 000938	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00093b	26 ff 70 7c 		push	WORD PTR es:[bx+124][si]
	*** 00093f	26 ff 70 7a 		push	WORD PTR es:[bx+122][si]
	*** 000943	9a 00 00 00 00 		call	FAR PTR __ffree
	*** 000948	83 c4 04 		add	sp,4
;|***     rxbuffer[port][i] = NULL; //wipe them since they are now gone
; Line 270
	*** 00094b	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 00094e	c1 e6 04 		shl	si,4
	*** 000951	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 000954	c1 e6 02 		shl	si,2
	*** 000957	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00095a	2b c0 			sub	ax,ax
	*** 00095c	26 89 40 7c 		mov	WORD PTR es:[bx+124][si],ax
	*** 000960	26 89 40 7a 		mov	WORD PTR es:[bx+122][si],ax
;|***     }
; Line 271
	*** 000964	e9 ab ff 		jmp	$FC1508
					$FB1509:
;|***     
;|***   for(i=0;i<max_txbuf[port];i++)
; Line 273
	*** 000967	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
	*** 00096c	e9 03 00 		jmp	$F1510
					$FC1511:
	*** 00096f	ff 46 fe 		inc	WORD PTR [bp-2]	;i
					$F1510:
	*** 000972	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;i
	*** 000975	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000978	81 c3 86 01 		add	bx,390	;0186H
	*** 00097c	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 00097f	d1 e6 			shl	si,1
	*** 000981	26 39 00 		cmp	WORD PTR es:[bx][si],ax
	*** 000984	77 03 			ja	$JCC2436
	*** 000986	e9 3f 00 		jmp	$FB1512
					$JCC2436:
;|***     {
; Line 274
;|***     _ffree(txbuffer[port][i]);
; Line 275
	*** 000989	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 00098c	c1 e6 04 		shl	si,4
	*** 00098f	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 000992	c1 e6 02 		shl	si,2
	*** 000995	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000998	26 ff b0 fc 00 		push	WORD PTR es:[bx+252][si]
	*** 00099d	26 ff b0 fa 00 		push	WORD PTR es:[bx+250][si]
	*** 0009a2	9a 00 00 00 00 		call	FAR PTR __ffree
	*** 0009a7	83 c4 04 		add	sp,4
;|***     txbuffer[port][i] = NULL;
; Line 276
	*** 0009aa	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 0009ad	c1 e6 04 		shl	si,4
	*** 0009b0	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 0009b3	c1 e6 02 		shl	si,2
	*** 0009b6	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0009b9	2b c0 			sub	ax,ax
	*** 0009bb	26 89 80 fc 00 		mov	WORD PTR es:[bx+252][si],ax
	*** 0009c0	26 89 80 fa 00 		mov	WORD PTR es:[bx+250][si],ax
;|***     }
; Line 277
	*** 0009c5	e9 a7 ff 		jmp	$FC1511
					$FB1512:
;|***   
;|***   //we are done with the base address so kill the links
;|***   outp(port_list[port]+PVR,(inp(port_list[port]+PVR)&0xfe)+channel[port]); //set current channel (a or b)
; Line 280
	*** 0009c8	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 0009cb	d1 e3 			shl	bx,1
	*** 0009cd	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0009d0	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0009d3	05 1c 00 		add	ax,28	;001cH
	*** 0009d6	50 			push	ax
	*** 0009d7	9a 00 00 00 00 		call	FAR PTR _inp
	*** 0009dc	83 c4 02 		add	sp,2
	*** 0009df	25 fe 00 		and	ax,254	;00feH
	*** 0009e2	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0009e5	81 c3 9a 01 		add	bx,410	;019aH
	*** 0009e9	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 0009ec	d1 e6 			shl	si,1
	*** 0009ee	26 03 00 		add	ax,WORD PTR es:[bx][si]
	*** 0009f1	50 			push	ax
	*** 0009f2	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 0009f5	d1 e3 			shl	bx,1
	*** 0009f7	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0009fa	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0009fd	05 1c 00 		add	ax,28	;001cH
	*** 000a00	50 			push	ax
	*** 000a01	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000a06	83 c4 04 		add	sp,4
;|***   outp(port_list[port]+IMR0,0xff); //turn off channel specific interrupts
; Line 281
	*** 000a09	68 ff 00 		push	255	;00ffH
	*** 000a0c	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 000a0f	d1 e3 			shl	bx,1
	*** 000a11	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000a14	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000a17	05 1a 00 		add	ax,26	;001aH
	*** 000a1a	50 			push	ax
	*** 000a1b	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000a20	83 c4 04 		add	sp,4
;|***   outp(port_list[port]+IMR1,0xff);
; Line 282
	*** 000a23	68 ff 00 		push	255	;00ffH
	*** 000a26	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 000a29	d1 e3 			shl	bx,1
	*** 000a2b	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000a2e	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000a31	05 1b 00 		add	ax,27	;001bH
	*** 000a34	50 			push	ax
	*** 000a35	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000a3a	83 c4 04 		add	sp,4
;|***   //should also turn off DSR/DTR interrupts here...since we will no longer have the port address
;|***   //after the next line and if it fires we will have a stuck int line.
;|***   //need Interrupt masks stored somewhere since we cannot read them back (write only)
;|*** 
;|***   port_list[port] = 0;
; Line 287
	*** 000a3d	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 000a40	d1 e3 			shl	bx,1
	*** 000a42	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000a45	26 c7 00 00 00 		mov	WORD PTR es:[bx][si],0
;|***   port_open_list[port] = 0;
; Line 288
	*** 000a4a	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 000a4d	d1 e6 			shl	si,1
	*** 000a4f	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000a52	26 c7 40 04 00 00 	mov	WORD PTR es:[bx+4][si],0
;|***   port_dmar_list[port] = 0;
; Line 289
	*** 000a58	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 000a5b	d1 e6 			shl	si,1
	*** 000a5d	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000a60	26 c7 40 10 00 00 	mov	WORD PTR es:[bx+16][si],0
;|***   port_dmat_list[port] = 0;
; Line 290
	*** 000a66	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 000a69	d1 e6 			shl	si,1
	*** 000a6b	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000a6e	26 c7 40 0c 00 00 	mov	WORD PTR es:[bx+12][si],0
;|***   interrupt_list[port] = 0;
; Line 291
	*** 000a74	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 000a77	d1 e6 			shl	si,1
	*** 000a79	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000a7c	26 c7 40 08 00 00 	mov	WORD PTR es:[bx+8][si],0
;|***   
;|***   if(port == (next_port-1)) next_port--; //if it was the last port then we can safely decrement the
; Line 293
	*** 000a82	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000a85	26 8b 47 74 		mov	ax,WORD PTR es:[bx+116]
	*** 000a89	2b 46 0a 		sub	ax,WORD PTR [bp+10]	;port
	*** 000a8c	48 			dec	ax
	*** 000a8d	74 03 			je	$JCC2701
	*** 000a8f	e9 07 00 		jmp	$I1513
					$JCC2701:
	*** 000a92	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000a95	26 ff 4f 74 		dec	WORD PTR es:[bx+116]
;|***                                          //next_port specifier
;|***   return TRUE;
; Line 295
					$I1513:
	*** 000a99	b8 00 00 		mov	ax,0
	*** 000a9c	e9 00 00 		jmp	$EX1505
;|***   }  // end kill_port()
; Line 296
					$EX1505:
	*** 000a9f	5e 			pop	si
	*** 000aa0	5f 			pop	di
	*** 000aa1	c9 			leave	
	*** 000aa2	ca 06 00 		ret	6

?kill_port@Cescc@@RECII@Z	ENDP
	PUBLIC	?init_port@Cescc@@RECIIIPEUescc_regs@@II@Z	; Cescc::init_port
?init_port@Cescc@@RECIIIPEUescc_regs@@II@Z	PROC FAR	; Cescc::init_port
;|*** 
;|*** 
;|*** 
;|*** 
;|*** unsigned Cescc::init_port(  unsigned port,
;|***               unsigned opmode,
;|***               struct escc_regs *esccregs,
;|***               unsigned rbufs,
;|***               unsigned tbufs)
;|***   {
; Line 306
	*** 000aa5	c8 06 00 00 		enter	6,0
	*** 000aa9	57 			push	di
	*** 000aaa	56 			push	si
;	timeout_cntr = -6
;	i = -2
;	this = 6
;	port = 20
;	opmode = 18
;	esccregs = 14
;	rbufs = 12
;	tbufs = 10
;|***   //set the port (from the list, make sure it is in the list...) to the settings given
;|***   //probably a good idea to verify all params before continuing
;|***   //set up the registers and reset the 82526 here
;|***   if(rbufs<2) return FALSE;
; Line 310
	*** 000aab	83 7e 0c 02 		cmp	WORD PTR [bp+12],2	;rbufs
	*** 000aaf	72 03 			jb	$JCC2735
	*** 000ab1	e9 06 00 		jmp	$I1521
					$JCC2735:
	*** 000ab4	b8 01 00 		mov	ax,1
	*** 000ab7	e9 51 0b 		jmp	$EX1520
;|***   if(rbufs>MAX_RBUFS) return FALSE;
; Line 311
					$I1521:
	*** 000aba	83 7e 0c 10 		cmp	WORD PTR [bp+12],16	;0010H	;rbufs
	*** 000abe	77 03 			ja	$JCC2750
	*** 000ac0	e9 06 00 		jmp	$I1522
					$JCC2750:
	*** 000ac3	b8 01 00 		mov	ax,1
	*** 000ac6	e9 42 0b 		jmp	$EX1520
;|***   if(tbufs<2) return FALSE;        
; Line 312
					$I1522:
	*** 000ac9	83 7e 0a 02 		cmp	WORD PTR [bp+10],2	;tbufs
	*** 000acd	72 03 			jb	$JCC2765
	*** 000acf	e9 06 00 		jmp	$I1523
					$JCC2765:
	*** 000ad2	b8 01 00 		mov	ax,1
	*** 000ad5	e9 33 0b 		jmp	$EX1520
;|***   if(tbufs>MAX_TBUFS) return FALSE;
; Line 313
					$I1523:
	*** 000ad8	83 7e 0a 10 		cmp	WORD PTR [bp+10],16	;0010H	;tbufs
	*** 000adc	77 03 			ja	$JCC2780
	*** 000ade	e9 06 00 		jmp	$I1524
					$JCC2780:
	*** 000ae1	b8 01 00 		mov	ax,1
	*** 000ae4	e9 24 0b 		jmp	$EX1520
;|***   if((opmode!=OPMODE_HDLC)&&(opmode!=OPMODE_BISYNC)&&(opmode!=OPMODE_ASYNC)) return FALSE;
; Line 314
					$I1524:
	*** 000ae7	83 7e 12 00 		cmp	WORD PTR [bp+18],0	;opmode
	*** 000aeb	75 03 			jne	$JCC2795
	*** 000aed	e9 18 00 		jmp	$I1525
					$JCC2795:
	*** 000af0	83 7e 12 02 		cmp	WORD PTR [bp+18],2	;opmode
	*** 000af4	75 03 			jne	$JCC2804
	*** 000af6	e9 0f 00 		jmp	$I1525
					$JCC2804:
	*** 000af9	83 7e 12 01 		cmp	WORD PTR [bp+18],1	;opmode
	*** 000afd	75 03 			jne	$JCC2813
	*** 000aff	e9 06 00 		jmp	$I1525
					$JCC2813:
	*** 000b02	b8 01 00 		mov	ax,1
	*** 000b05	e9 03 0b 		jmp	$EX1520
;|***   
;|***   //allocate the memory for the buffers
;|***   //unsigned long datasize;      
;|***   unsigned i;
; Line 318
					$I1525:
;|***   for(i=0;i<max_rxbuf[port];i++)
; Line 319
	*** 000b08	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
	*** 000b0d	e9 03 00 		jmp	$F1527
					$FC1528:
	*** 000b10	ff 46 fe 		inc	WORD PTR [bp-2]	;i
					$F1527:
	*** 000b13	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;i
	*** 000b16	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000b19	81 c3 82 01 		add	bx,386	;0182H
	*** 000b1d	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000b20	d1 e6 			shl	si,1
	*** 000b22	26 39 00 		cmp	WORD PTR es:[bx][si],ax
	*** 000b25	77 03 			ja	$JCC2853
	*** 000b27	e9 3b 00 		jmp	$FB1529
					$JCC2853:
;|***     {
; Line 320
;|***     _ffree(rxbuffer[port][i]);//just in case this isn't the first call to here
; Line 321
	*** 000b2a	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000b2d	c1 e6 04 		shl	si,4
	*** 000b30	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 000b33	c1 e6 02 		shl	si,2
	*** 000b36	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000b39	26 ff 70 7c 		push	WORD PTR es:[bx+124][si]
	*** 000b3d	26 ff 70 7a 		push	WORD PTR es:[bx+122][si]
	*** 000b41	9a 00 00 00 00 		call	FAR PTR __ffree
	*** 000b46	83 c4 04 		add	sp,4
;|***     rxbuffer[port][i]=NULL;   
; Line 322
	*** 000b49	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000b4c	c1 e6 04 		shl	si,4
	*** 000b4f	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 000b52	c1 e6 02 		shl	si,2
	*** 000b55	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000b58	2b c0 			sub	ax,ax
	*** 000b5a	26 89 40 7c 		mov	WORD PTR es:[bx+124][si],ax
	*** 000b5e	26 89 40 7a 		mov	WORD PTR es:[bx+122][si],ax
;|***     }                       
; Line 323
	*** 000b62	e9 ab ff 		jmp	$FC1528
					$FB1529:
;|***   
;|***   for(i=0;i<max_txbuf[port];i++)
; Line 325
	*** 000b65	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
	*** 000b6a	e9 03 00 		jmp	$F1530
					$FC1531:
	*** 000b6d	ff 46 fe 		inc	WORD PTR [bp-2]	;i
					$F1530:
	*** 000b70	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;i
	*** 000b73	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000b76	81 c3 86 01 		add	bx,390	;0186H
	*** 000b7a	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000b7d	d1 e6 			shl	si,1
	*** 000b7f	26 39 00 		cmp	WORD PTR es:[bx][si],ax
	*** 000b82	77 03 			ja	$JCC2946
	*** 000b84	e9 3f 00 		jmp	$FB1532
					$JCC2946:
;|***     {
; Line 326
;|***     _ffree(txbuffer[port][i]);//just in case this isn't the first call to here
; Line 327
	*** 000b87	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000b8a	c1 e6 04 		shl	si,4
	*** 000b8d	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 000b90	c1 e6 02 		shl	si,2
	*** 000b93	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000b96	26 ff b0 fc 00 		push	WORD PTR es:[bx+252][si]
	*** 000b9b	26 ff b0 fa 00 		push	WORD PTR es:[bx+250][si]
	*** 000ba0	9a 00 00 00 00 		call	FAR PTR __ffree
	*** 000ba5	83 c4 04 		add	sp,4
;|***     txbuffer[port][i]=NULL;
; Line 328
	*** 000ba8	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000bab	c1 e6 04 		shl	si,4
	*** 000bae	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 000bb1	c1 e6 02 		shl	si,2
	*** 000bb4	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000bb7	2b c0 			sub	ax,ax
	*** 000bb9	26 89 80 fc 00 		mov	WORD PTR es:[bx+252][si],ax
	*** 000bbe	26 89 80 fa 00 		mov	WORD PTR es:[bx+250][si],ax
;|***     }
; Line 329
	*** 000bc3	e9 a7 ff 		jmp	$FC1531
					$FB1532:
;|*** 
;|***   //datasize = (unsigned long)rbufs * sizeof(struct buf);
;|***   for(i=0;i<rbufs;i++)
; Line 332
	*** 000bc6	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
	*** 000bcb	e9 03 00 		jmp	$F1533
					$FC1534:
	*** 000bce	ff 46 fe 		inc	WORD PTR [bp-2]	;i
					$F1533:
	*** 000bd1	8b 46 0c 		mov	ax,WORD PTR [bp+12]	;rbufs
	*** 000bd4	39 46 fe 		cmp	WORD PTR [bp-2],ax	;i
	*** 000bd7	72 03 			jb	$JCC3031
	*** 000bd9	e9 47 00 		jmp	$FB1535
					$JCC3031:
;|***     {
; Line 333
;|***     rxbuffer[port][i] = (struct buf huge *)_fmalloc(sizeof(struct buf)); //create rxbuffers for this port
; Line 334
	*** 000bdc	68 06 04 		push	1030	;0406H
	*** 000bdf	9a 00 00 00 00 		call	FAR PTR __fmalloc
	*** 000be4	83 c4 02 		add	sp,2
	*** 000be7	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000bea	c1 e6 04 		shl	si,4
	*** 000bed	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 000bf0	c1 e6 02 		shl	si,2
	*** 000bf3	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000bf6	26 89 40 7a 		mov	WORD PTR es:[bx+122][si],ax
	*** 000bfa	26 89 50 7c 		mov	WORD PTR es:[bx+124][si],dx
;|***     if(rxbuffer[port][i]==NULL) return FALSE;                            //something failed
; Line 335
	*** 000bfe	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000c01	c1 e6 04 		shl	si,4
	*** 000c04	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 000c07	c1 e6 02 		shl	si,2
	*** 000c0a	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000c0d	26 8b 40 7c 		mov	ax,WORD PTR es:[bx+124][si]
	*** 000c11	26 0b 40 7a 		or	ax,WORD PTR es:[bx+122][si]
	*** 000c15	74 03 			je	$JCC3093
	*** 000c17	e9 06 00 		jmp	$I1538
					$JCC3093:
	*** 000c1a	b8 01 00 		mov	ax,1
	*** 000c1d	e9 eb 09 		jmp	$EX1520
;|***     }
; Line 336
					$I1538:
	*** 000c20	e9 ab ff 		jmp	$FC1534
					$FB1535:
;|***   
;|***   //datasize = (unsigned long)tbufs * sizeof(struct buf);
;|***   for(i=0;i<tbufs;i++)
; Line 339
	*** 000c23	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
	*** 000c28	e9 03 00 		jmp	$F1539
					$FC1540:
	*** 000c2b	ff 46 fe 		inc	WORD PTR [bp-2]	;i
					$F1539:
	*** 000c2e	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;tbufs
	*** 000c31	39 46 fe 		cmp	WORD PTR [bp-2],ax	;i
	*** 000c34	72 03 			jb	$JCC3124
	*** 000c36	e9 4b 00 		jmp	$FB1541
					$JCC3124:
;|***     {
; Line 340
;|***     txbuffer[port][i] = (struct buf huge *)_fmalloc(sizeof(struct buf)); //create txbuffers for this port     
; Line 341
	*** 000c39	68 06 04 		push	1030	;0406H
	*** 000c3c	9a 00 00 00 00 		call	FAR PTR __fmalloc
	*** 000c41	83 c4 02 		add	sp,2
	*** 000c44	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000c47	c1 e6 04 		shl	si,4
	*** 000c4a	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 000c4d	c1 e6 02 		shl	si,2
	*** 000c50	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000c53	26 89 80 fa 00 		mov	WORD PTR es:[bx+250][si],ax
	*** 000c58	26 89 90 fc 00 		mov	WORD PTR es:[bx+252][si],dx
;|***     if(txbuffer[port][i]==NULL) return FALSE;
; Line 342
	*** 000c5d	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000c60	c1 e6 04 		shl	si,4
	*** 000c63	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 000c66	c1 e6 02 		shl	si,2
	*** 000c69	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000c6c	26 8b 80 fc 00 		mov	ax,WORD PTR es:[bx+252][si]
	*** 000c71	26 0b 80 fa 00 		or	ax,WORD PTR es:[bx+250][si]
	*** 000c76	74 03 			je	$JCC3190
	*** 000c78	e9 06 00 		jmp	$I1544
					$JCC3190:
	*** 000c7b	b8 01 00 		mov	ax,1
	*** 000c7e	e9 8a 09 		jmp	$EX1520
;|***     }
; Line 343
					$I1544:
	*** 000c81	e9 a7 ff 		jmp	$FC1540
					$FB1541:
;|***     
;|***   current_rxbuf[port] = 0;
; Line 345
	*** 000c84	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000c87	d1 e6 			shl	si,1
	*** 000c89	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000c8c	26 c7 80 7a 01 00 00 	mov	WORD PTR es:[bx+378][si],0
;|***   current_txbuf[port] = 0;
; Line 346
	*** 000c93	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000c96	d1 e6 			shl	si,1
	*** 000c98	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000c9b	26 c7 80 7e 01 00 00 	mov	WORD PTR es:[bx+382][si],0
;|***   max_rxbuf[port] = rbufs;
; Line 347
	*** 000ca2	8b 46 0c 		mov	ax,WORD PTR [bp+12]	;rbufs
	*** 000ca5	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000ca8	d1 e6 			shl	si,1
	*** 000caa	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000cad	26 89 80 82 01 		mov	WORD PTR es:[bx+386][si],ax
;|***   max_txbuf[port] = tbufs;
; Line 348
	*** 000cb2	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;tbufs
	*** 000cb5	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000cb8	d1 e6 			shl	si,1
	*** 000cba	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000cbd	26 89 80 86 01 		mov	WORD PTR es:[bx+390][si],ax
;|*** 
;|***   for(i=0;i<rbufs;i++)
; Line 350
	*** 000cc2	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
	*** 000cc7	e9 03 00 		jmp	$F1545
					$FC1546:
	*** 000cca	ff 46 fe 		inc	WORD PTR [bp-2]	;i
					$F1545:
	*** 000ccd	8b 46 0c 		mov	ax,WORD PTR [bp+12]	;rbufs
	*** 000cd0	39 46 fe 		cmp	WORD PTR [bp-2],ax	;i
	*** 000cd3	72 03 			jb	$JCC3283
	*** 000cd5	e9 4d 00 		jmp	$FB1547
					$JCC3283:
;|***     {
; Line 351
;|***     rxbuffer[port][i]->valid = 0;
; Line 352
	*** 000cd8	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000cdb	c1 e6 04 		shl	si,4
	*** 000cde	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 000ce1	c1 e6 02 		shl	si,2
	*** 000ce4	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000ce7	26 c4 58 7a 		les	bx,DWORD PTR es:[bx+122][si]
	*** 000ceb	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
;|***     rxbuffer[port][i]->no_bytes = 0;
; Line 353
	*** 000cf0	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000cf3	c1 e6 04 		shl	si,4
	*** 000cf6	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 000cf9	c1 e6 02 		shl	si,2
	*** 000cfc	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000cff	26 c4 58 7a 		les	bx,DWORD PTR es:[bx+122][si]
	*** 000d03	26 c7 47 02 00 00 	mov	WORD PTR es:[bx+2],0
;|***     rxbuffer[port][i]->max = 0;
; Line 354
	*** 000d09	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000d0c	c1 e6 04 		shl	si,4
	*** 000d0f	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 000d12	c1 e6 02 		shl	si,2
	*** 000d15	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000d18	26 c4 58 7a 		les	bx,DWORD PTR es:[bx+122][si]
	*** 000d1c	26 c7 47 04 00 00 	mov	WORD PTR es:[bx+4],0
;|***     }
; Line 355
	*** 000d22	e9 a5 ff 		jmp	$FC1546
					$FB1547:
;|***   
;|***   for(i=0;i<tbufs;i++)
; Line 357
	*** 000d25	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
	*** 000d2a	e9 03 00 		jmp	$F1548
					$FC1549:
	*** 000d2d	ff 46 fe 		inc	WORD PTR [bp-2]	;i
					$F1548:
	*** 000d30	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;tbufs
	*** 000d33	39 46 fe 		cmp	WORD PTR [bp-2],ax	;i
	*** 000d36	72 03 			jb	$JCC3382
	*** 000d38	e9 50 00 		jmp	$FB1550
					$JCC3382:
;|***     {
; Line 358
;|***     txbuffer[port][i]->valid = 0;      //valid indicates data (1) or garbage (0)
; Line 359
	*** 000d3b	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000d3e	c1 e6 04 		shl	si,4
	*** 000d41	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 000d44	c1 e6 02 		shl	si,2
	*** 000d47	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000d4a	26 c4 98 fa 00 		les	bx,DWORD PTR es:[bx+250][si]
	*** 000d4f	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
;|***     txbuffer[port][i]->no_bytes = 0;   //no_bytes is the number of bytes in the frame <= FRAME_SIZE
; Line 360
	*** 000d54	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000d57	c1 e6 04 		shl	si,4
	*** 000d5a	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 000d5d	c1 e6 02 		shl	si,2
	*** 000d60	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000d63	26 c4 98 fa 00 		les	bx,DWORD PTR es:[bx+250][si]
	*** 000d68	26 c7 47 02 00 00 	mov	WORD PTR es:[bx+2],0
;|***     txbuffer[port][i]->max = 0;        //max is the number of bytes to be tx'ed this time <= 32
; Line 361
	*** 000d6e	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000d71	c1 e6 04 		shl	si,4
	*** 000d74	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 000d77	c1 e6 02 		shl	si,2
	*** 000d7a	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000d7d	26 c4 98 fa 00 		les	bx,DWORD PTR es:[bx+250][si]
	*** 000d82	26 c7 47 04 00 00 	mov	WORD PTR es:[bx+4],0
;|***     }
; Line 362
	*** 000d88	e9 a2 ff 		jmp	$FC1549
					$FB1550:
;|*** 
;|***   //set channel for this port; PVR bit0 selects channel A (bit0 = 0) or B (bit0 = 1)
;|***   outp(port_list[port]+PVR,(inp(port_list[port]+PVR)&0xfe)+channel[port]);  //select channel A or B
; Line 365
	*** 000d8b	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 000d8e	d1 e3 			shl	bx,1
	*** 000d90	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000d93	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000d96	05 1c 00 		add	ax,28	;001cH
	*** 000d99	50 			push	ax
	*** 000d9a	9a 00 00 00 00 		call	FAR PTR _inp
	*** 000d9f	83 c4 02 		add	sp,2
	*** 000da2	25 fe 00 		and	ax,254	;00feH
	*** 000da5	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000da8	81 c3 9a 01 		add	bx,410	;019aH
	*** 000dac	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000daf	d1 e6 			shl	si,1
	*** 000db1	26 03 00 		add	ax,WORD PTR es:[bx][si]
	*** 000db4	50 			push	ax
	*** 000db5	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 000db8	d1 e3 			shl	bx,1
	*** 000dba	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000dbd	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000dc0	05 1c 00 		add	ax,28	;001cH
	*** 000dc3	50 			push	ax
	*** 000dc4	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000dc9	83 c4 04 		add	sp,4
;|*** 
;|***   eopmode[port] = opmode;
; Line 367
	*** 000dcc	8b 46 12 		mov	ax,WORD PTR [bp+18]	;opmode
	*** 000dcf	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000dd2	d1 e6 			shl	si,1
	*** 000dd4	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000dd7	26 89 80 9e 01 		mov	WORD PTR es:[bx+414][si],ax
;|*** 
;|***   if(opmode == OPMODE_ASYNC)    //ASYNC not used by LN200 or biphase-M 5/18/98
; Line 369
	*** 000ddc	83 7e 12 01 		cmp	WORD PTR [bp+18],1	;opmode
	*** 000de0	74 03 			je	$JCC3552
	*** 000de2	e9 7b 01 		jmp	$I1551
					$JCC3552:
;|***     {
; Line 370
;|***     outp(port_list[port]+MODE,esccregs->mode);
; Line 371
	*** 000de5	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 000de8	26 ff 77 02 		push	WORD PTR es:[bx+2]
	*** 000dec	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 000def	d1 e3 			shl	bx,1
	*** 000df1	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000df4	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000df7	05 02 00 		add	ax,2
	*** 000dfa	50 			push	ax
	*** 000dfb	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000e00	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+TIMR,esccregs->timr);
; Line 372
	*** 000e03	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 000e06	26 ff 77 04 		push	WORD PTR es:[bx+4]
	*** 000e0a	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 000e0d	d1 e3 			shl	bx,1
	*** 000e0f	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000e12	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000e15	05 03 00 		add	ax,3
	*** 000e18	50 			push	ax
	*** 000e19	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000e1e	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+TCR,esccregs->tcr);
; Line 373
	*** 000e21	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 000e24	26 ff 77 34 		push	WORD PTR es:[bx+52]
	*** 000e28	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 000e2b	d1 e3 			shl	bx,1
	*** 000e2d	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000e30	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000e33	05 06 00 		add	ax,6
	*** 000e36	50 			push	ax
	*** 000e37	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000e3c	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+DAFO,esccregs->dafo);
; Line 374
	*** 000e3f	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 000e42	26 ff 77 36 		push	WORD PTR es:[bx+54]
	*** 000e46	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 000e49	d1 e3 			shl	bx,1
	*** 000e4b	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000e4e	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000e51	05 07 00 		add	ax,7
	*** 000e54	50 			push	ax
	*** 000e55	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000e5a	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+RFC,esccregs->rfc);
; Line 375
	*** 000e5d	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 000e60	26 ff 77 38 		push	WORD PTR es:[bx+56]
	*** 000e64	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 000e67	d1 e3 			shl	bx,1
	*** 000e69	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000e6c	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000e6f	05 08 00 		add	ax,8
	*** 000e72	50 			push	ax
	*** 000e73	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000e78	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+XBCL,esccregs->xbcl);
; Line 376
	*** 000e7b	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 000e7e	26 ff 77 06 		push	WORD PTR es:[bx+6]
	*** 000e82	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 000e85	d1 e3 			shl	bx,1
	*** 000e87	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000e8a	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000e8d	05 0a 00 		add	ax,10	;000aH
	*** 000e90	50 			push	ax
	*** 000e91	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000e96	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+XBCH,esccregs->xbch);
; Line 377
	*** 000e99	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 000e9c	26 ff 77 08 		push	WORD PTR es:[bx+8]
	*** 000ea0	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 000ea3	d1 e3 			shl	bx,1
	*** 000ea5	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000ea8	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000eab	05 0b 00 		add	ax,11	;000bH
	*** 000eae	50 			push	ax
	*** 000eaf	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000eb4	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+CCR0,esccregs->ccr0);
; Line 378
	*** 000eb7	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 000eba	26 ff 77 0a 		push	WORD PTR es:[bx+10]
	*** 000ebe	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 000ec1	d1 e3 			shl	bx,1
	*** 000ec3	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000ec6	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000ec9	05 0c 00 		add	ax,12	;000cH
	*** 000ecc	50 			push	ax
	*** 000ecd	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000ed2	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+CCR1,esccregs->ccr1);
; Line 379
	*** 000ed5	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 000ed8	26 ff 77 0c 		push	WORD PTR es:[bx+12]
	*** 000edc	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 000edf	d1 e3 			shl	bx,1
	*** 000ee1	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000ee4	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000ee7	05 0d 00 		add	ax,13	;000dH
	*** 000eea	50 			push	ax
	*** 000eeb	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000ef0	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+CCR2,esccregs->ccr2);
; Line 380
	*** 000ef3	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 000ef6	26 ff 77 0e 		push	WORD PTR es:[bx+14]
	*** 000efa	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 000efd	d1 e3 			shl	bx,1
	*** 000eff	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000f02	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000f05	05 0e 00 		add	ax,14	;000eH
	*** 000f08	50 			push	ax
	*** 000f09	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000f0e	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+BGR,esccregs->bgr);
; Line 381
	*** 000f11	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 000f14	26 ff 77 14 		push	WORD PTR es:[bx+20]
	*** 000f18	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 000f1b	d1 e3 			shl	bx,1
	*** 000f1d	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000f20	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000f23	05 14 00 		add	ax,20	;0014H
	*** 000f26	50 			push	ax
	*** 000f27	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000f2c	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+PVR,(esccregs->pvr&0xfe)+channel[port]);
; Line 382
	*** 000f2f	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 000f32	26 8a 47 1e 		mov	al,BYTE PTR es:[bx+30]
	*** 000f36	25 fe 00 		and	ax,254	;00feH
	*** 000f39	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 000f3c	81 c3 9a 01 		add	bx,410	;019aH
	*** 000f40	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 000f43	d1 e6 			shl	si,1
	*** 000f45	26 03 00 		add	ax,WORD PTR es:[bx][si]
	*** 000f48	50 			push	ax
	*** 000f49	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 000f4c	d1 e3 			shl	bx,1
	*** 000f4e	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000f51	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000f54	05 1c 00 		add	ax,28	;001cH
	*** 000f57	50 			push	ax
	*** 000f58	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000f5d	83 c4 04 		add	sp,4
;|***     }
; Line 383
;|*** 
;|***   if(opmode==OPMODE_HDLC)
; Line 385
					$I1551:
	*** 000f60	83 7e 12 00 		cmp	WORD PTR [bp+18],0	;opmode
	*** 000f64	74 03 			je	$JCC3940
	*** 000f66	e9 4b 02 		jmp	$I1552
					$JCC3940:
;|***     {
; Line 386
;|***     //this is mode specific to hdlc/sdlc...need to do various things for different modes
;|***     //copy the regset to the escc in question
;|***     //outp(port_list[port]+register,esccregs->register);
;|*** 
;|***     outp(port_list[port]+CCR4,esccregs->ccr4); //code to access CCR4 for biphase-M
; Line 391
	*** 000f69	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 000f6c	26 ff 77 12 		push	WORD PTR es:[bx+18]
	*** 000f70	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 000f73	d1 e3 			shl	bx,1
	*** 000f75	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000f78	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000f7b	05 1f 00 		add	ax,31	;001fH
	*** 000f7e	50 			push	ax
	*** 000f7f	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000f84	83 c4 04 		add	sp,4
;|***     
;|***     outp(port_list[port]+MODE,esccregs->mode);
; Line 393
	*** 000f87	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 000f8a	26 ff 77 02 		push	WORD PTR es:[bx+2]
	*** 000f8e	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 000f91	d1 e3 			shl	bx,1
	*** 000f93	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000f96	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000f99	05 02 00 		add	ax,2
	*** 000f9c	50 			push	ax
	*** 000f9d	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000fa2	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+TIMR,esccregs->timr);
; Line 394
	*** 000fa5	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 000fa8	26 ff 77 04 		push	WORD PTR es:[bx+4]
	*** 000fac	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 000faf	d1 e3 			shl	bx,1
	*** 000fb1	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000fb4	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000fb7	05 03 00 		add	ax,3
	*** 000fba	50 			push	ax
	*** 000fbb	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000fc0	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+XAD1,esccregs->xad1);
; Line 395
	*** 000fc3	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 000fc6	26 ff 77 24 		push	WORD PTR es:[bx+36]
	*** 000fca	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 000fcd	d1 e3 			shl	bx,1
	*** 000fcf	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000fd2	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000fd5	05 04 00 		add	ax,4
	*** 000fd8	50 			push	ax
	*** 000fd9	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000fde	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+XAD2,esccregs->xad2);
; Line 396
	*** 000fe1	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 000fe4	26 ff 77 26 		push	WORD PTR es:[bx+38]
	*** 000fe8	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 000feb	d1 e3 			shl	bx,1
	*** 000fed	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 000ff0	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 000ff3	05 05 00 		add	ax,5
	*** 000ff6	50 			push	ax
	*** 000ff7	9a 00 00 00 00 		call	FAR PTR _outp
	*** 000ffc	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+RAH1,esccregs->rah1);
; Line 397
	*** 000fff	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 001002	26 ff 77 28 		push	WORD PTR es:[bx+40]
	*** 001006	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 001009	d1 e3 			shl	bx,1
	*** 00100b	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00100e	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001011	05 06 00 		add	ax,6
	*** 001014	50 			push	ax
	*** 001015	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00101a	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+RAH2,esccregs->rah2);
; Line 398
	*** 00101d	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 001020	26 ff 77 2a 		push	WORD PTR es:[bx+42]
	*** 001024	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 001027	d1 e3 			shl	bx,1
	*** 001029	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00102c	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00102f	05 07 00 		add	ax,7
	*** 001032	50 			push	ax
	*** 001033	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001038	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+RAL1,esccregs->ral1);
; Line 399
	*** 00103b	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 00103e	26 ff 77 2c 		push	WORD PTR es:[bx+44]
	*** 001042	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 001045	d1 e3 			shl	bx,1
	*** 001047	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00104a	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00104d	05 08 00 		add	ax,8
	*** 001050	50 			push	ax
	*** 001051	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001056	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+RAL2,esccregs->ral2);
; Line 400
	*** 001059	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 00105c	26 ff 77 2e 		push	WORD PTR es:[bx+46]
	*** 001060	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 001063	d1 e3 			shl	bx,1
	*** 001065	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001068	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00106b	05 09 00 		add	ax,9
	*** 00106e	50 			push	ax
	*** 00106f	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001074	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+XBCL,esccregs->xbcl);
; Line 401
	*** 001077	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 00107a	26 ff 77 06 		push	WORD PTR es:[bx+6]
	*** 00107e	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 001081	d1 e3 			shl	bx,1
	*** 001083	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001086	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001089	05 0a 00 		add	ax,10	;000aH
	*** 00108c	50 			push	ax
	*** 00108d	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001092	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+XBCH,esccregs->xbch);
; Line 402
	*** 001095	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 001098	26 ff 77 08 		push	WORD PTR es:[bx+8]
	*** 00109c	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 00109f	d1 e3 			shl	bx,1
	*** 0010a1	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0010a4	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0010a7	05 0b 00 		add	ax,11	;000bH
	*** 0010aa	50 			push	ax
	*** 0010ab	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0010b0	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+CCR0,esccregs->ccr0);
; Line 403
	*** 0010b3	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 0010b6	26 ff 77 0a 		push	WORD PTR es:[bx+10]
	*** 0010ba	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 0010bd	d1 e3 			shl	bx,1
	*** 0010bf	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0010c2	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0010c5	05 0c 00 		add	ax,12	;000cH
	*** 0010c8	50 			push	ax
	*** 0010c9	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0010ce	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+CCR1,esccregs->ccr1);
; Line 404
	*** 0010d1	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 0010d4	26 ff 77 0c 		push	WORD PTR es:[bx+12]
	*** 0010d8	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 0010db	d1 e3 			shl	bx,1
	*** 0010dd	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0010e0	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0010e3	05 0d 00 		add	ax,13	;000dH
	*** 0010e6	50 			push	ax
	*** 0010e7	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0010ec	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+CCR2,esccregs->ccr2);
; Line 405
	*** 0010ef	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 0010f2	26 ff 77 0e 		push	WORD PTR es:[bx+14]
	*** 0010f6	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 0010f9	d1 e3 			shl	bx,1
	*** 0010fb	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0010fe	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001101	05 0e 00 		add	ax,14	;000eH
	*** 001104	50 			push	ax
	*** 001105	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00110a	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+CCR3,esccregs->ccr3);
; Line 406
	*** 00110d	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 001110	26 ff 77 10 		push	WORD PTR es:[bx+16]
	*** 001114	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 001117	d1 e3 			shl	bx,1
	*** 001119	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00111c	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00111f	05 0f 00 		add	ax,15	;000fH
	*** 001122	50 			push	ax
	*** 001123	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001128	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+BGR,esccregs->bgr);
; Line 407
	*** 00112b	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 00112e	26 ff 77 14 		push	WORD PTR es:[bx+20]
	*** 001132	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 001135	d1 e3 			shl	bx,1
	*** 001137	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00113a	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00113d	05 14 00 		add	ax,20	;0014H
	*** 001140	50 			push	ax
	*** 001141	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001146	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+RLCR,esccregs->rlcr);
; Line 408
	*** 001149	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 00114c	26 ff 77 30 		push	WORD PTR es:[bx+48]
	*** 001150	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 001153	d1 e3 			shl	bx,1
	*** 001155	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001158	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00115b	05 15 00 		add	ax,21	;0015H
	*** 00115e	50 			push	ax
	*** 00115f	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001164	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+PRE,esccregs->pre);
; Line 409
	*** 001167	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 00116a	26 ff 77 32 		push	WORD PTR es:[bx+50]
	*** 00116e	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 001171	d1 e3 			shl	bx,1
	*** 001173	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001176	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001179	40 			inc	ax
	*** 00117a	50 			push	ax
	*** 00117b	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001180	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+PVR,(esccregs->pvr&0xfe)+channel[port]);
; Line 410
	*** 001183	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 001186	26 8a 47 1e 		mov	al,BYTE PTR es:[bx+30]
	*** 00118a	25 fe 00 		and	ax,254	;00feH
	*** 00118d	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001190	81 c3 9a 01 		add	bx,410	;019aH
	*** 001194	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 001197	d1 e6 			shl	si,1
	*** 001199	26 03 00 		add	ax,WORD PTR es:[bx][si]
	*** 00119c	50 			push	ax
	*** 00119d	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 0011a0	d1 e3 			shl	bx,1
	*** 0011a2	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0011a5	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0011a8	05 1c 00 		add	ax,28	;001cH
	*** 0011ab	50 			push	ax
	*** 0011ac	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0011b1	83 c4 04 		add	sp,4
;|***     }
; Line 411
;|*** 
;|***   if(opmode == OPMODE_BISYNC)
; Line 413
					$I1552:
	*** 0011b4	83 7e 12 02 		cmp	WORD PTR [bp+18],2	;opmode
	*** 0011b8	74 03 			je	$JCC4536
	*** 0011ba	e9 f1 01 		jmp	$I1553
					$JCC4536:
;|***     {
; Line 414
;|***     outp(port_list[port]+MODE,esccregs->mode);
; Line 415
	*** 0011bd	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 0011c0	26 ff 77 02 		push	WORD PTR es:[bx+2]
	*** 0011c4	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 0011c7	d1 e3 			shl	bx,1
	*** 0011c9	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0011cc	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0011cf	05 02 00 		add	ax,2
	*** 0011d2	50 			push	ax
	*** 0011d3	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0011d8	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+TIMR,esccregs->timr);
; Line 416
	*** 0011db	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 0011de	26 ff 77 04 		push	WORD PTR es:[bx+4]
	*** 0011e2	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 0011e5	d1 e3 			shl	bx,1
	*** 0011e7	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0011ea	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0011ed	05 03 00 		add	ax,3
	*** 0011f0	50 			push	ax
	*** 0011f1	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0011f6	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+XAD1,esccregs->synl);
; Line 417
	*** 0011f9	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 0011fc	26 ff 77 3a 		push	WORD PTR es:[bx+58]
	*** 001200	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 001203	d1 e3 			shl	bx,1
	*** 001205	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001208	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00120b	05 04 00 		add	ax,4
	*** 00120e	50 			push	ax
	*** 00120f	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001214	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+XAD2,esccregs->synh);
; Line 418
	*** 001217	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 00121a	26 ff 77 3c 		push	WORD PTR es:[bx+60]
	*** 00121e	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 001221	d1 e3 			shl	bx,1
	*** 001223	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001226	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001229	05 05 00 		add	ax,5
	*** 00122c	50 			push	ax
	*** 00122d	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001232	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+RAH1,esccregs->tcr);
; Line 419
	*** 001235	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 001238	26 ff 77 34 		push	WORD PTR es:[bx+52]
	*** 00123c	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 00123f	d1 e3 			shl	bx,1
	*** 001241	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001244	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001247	05 06 00 		add	ax,6
	*** 00124a	50 			push	ax
	*** 00124b	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001250	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+RAH2,esccregs->dafo);
; Line 420
	*** 001253	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 001256	26 ff 77 36 		push	WORD PTR es:[bx+54]
	*** 00125a	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 00125d	d1 e3 			shl	bx,1
	*** 00125f	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001262	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001265	05 07 00 		add	ax,7
	*** 001268	50 			push	ax
	*** 001269	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00126e	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+RAL1,esccregs->rfc);
; Line 421
	*** 001271	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 001274	26 ff 77 38 		push	WORD PTR es:[bx+56]
	*** 001278	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 00127b	d1 e3 			shl	bx,1
	*** 00127d	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001280	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001283	05 08 00 		add	ax,8
	*** 001286	50 			push	ax
	*** 001287	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00128c	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+XBCL,esccregs->xbcl);
; Line 422
	*** 00128f	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 001292	26 ff 77 06 		push	WORD PTR es:[bx+6]
	*** 001296	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 001299	d1 e3 			shl	bx,1
	*** 00129b	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00129e	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0012a1	05 0a 00 		add	ax,10	;000aH
	*** 0012a4	50 			push	ax
	*** 0012a5	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0012aa	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+XBCH,esccregs->xbch);
; Line 423
	*** 0012ad	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 0012b0	26 ff 77 08 		push	WORD PTR es:[bx+8]
	*** 0012b4	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 0012b7	d1 e3 			shl	bx,1
	*** 0012b9	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0012bc	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0012bf	05 0b 00 		add	ax,11	;000bH
	*** 0012c2	50 			push	ax
	*** 0012c3	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0012c8	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+CCR0,esccregs->ccr0);
; Line 424
	*** 0012cb	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 0012ce	26 ff 77 0a 		push	WORD PTR es:[bx+10]
	*** 0012d2	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 0012d5	d1 e3 			shl	bx,1
	*** 0012d7	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0012da	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0012dd	05 0c 00 		add	ax,12	;000cH
	*** 0012e0	50 			push	ax
	*** 0012e1	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0012e6	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+CCR1,esccregs->ccr1);
; Line 425
	*** 0012e9	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 0012ec	26 ff 77 0c 		push	WORD PTR es:[bx+12]
	*** 0012f0	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 0012f3	d1 e3 			shl	bx,1
	*** 0012f5	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0012f8	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0012fb	05 0d 00 		add	ax,13	;000dH
	*** 0012fe	50 			push	ax
	*** 0012ff	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001304	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+CCR2,esccregs->ccr2);
; Line 426
	*** 001307	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 00130a	26 ff 77 0e 		push	WORD PTR es:[bx+14]
	*** 00130e	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 001311	d1 e3 			shl	bx,1
	*** 001313	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001316	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001319	05 0e 00 		add	ax,14	;000eH
	*** 00131c	50 			push	ax
	*** 00131d	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001322	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+CCR3,esccregs->ccr3);
; Line 427
	*** 001325	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 001328	26 ff 77 10 		push	WORD PTR es:[bx+16]
	*** 00132c	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 00132f	d1 e3 			shl	bx,1
	*** 001331	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001334	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001337	05 0f 00 		add	ax,15	;000fH
	*** 00133a	50 			push	ax
	*** 00133b	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001340	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+BGR,esccregs->bgr);
; Line 428
	*** 001343	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 001346	26 ff 77 14 		push	WORD PTR es:[bx+20]
	*** 00134a	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 00134d	d1 e3 			shl	bx,1
	*** 00134f	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001352	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001355	05 14 00 		add	ax,20	;0014H
	*** 001358	50 			push	ax
	*** 001359	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00135e	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+PRE,esccregs->pre);
; Line 429
	*** 001361	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 001364	26 ff 77 32 		push	WORD PTR es:[bx+50]
	*** 001368	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 00136b	d1 e3 			shl	bx,1
	*** 00136d	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001370	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001373	40 			inc	ax
	*** 001374	50 			push	ax
	*** 001375	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00137a	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+PVR,(esccregs->pvr&0xfe)+channel[port]);
; Line 430
	*** 00137d	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 001380	26 8a 47 1e 		mov	al,BYTE PTR es:[bx+30]
	*** 001384	25 fe 00 		and	ax,254	;00feH
	*** 001387	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00138a	81 c3 9a 01 		add	bx,410	;019aH
	*** 00138e	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 001391	d1 e6 			shl	si,1
	*** 001393	26 03 00 		add	ax,WORD PTR es:[bx][si]
	*** 001396	50 			push	ax
	*** 001397	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 00139a	d1 e3 			shl	bx,1
	*** 00139c	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00139f	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0013a2	05 1c 00 		add	ax,28	;001cH
	*** 0013a5	50 			push	ax
	*** 0013a6	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0013ab	83 c4 04 		add	sp,4
;|***     }
; Line 431
;|*** 
;|***   //not really necessary because it will be done in txframe but just in case....
;|***   if(port_dmar_list[port]!=0) setupdmar(port,rxbuffer[port][current_rxbuf[port]]->frame);
; Line 434
					$I1553:
	*** 0013ae	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0013b1	83 c3 10 		add	bx,16	;0010H
	*** 0013b4	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 0013b7	d1 e6 			shl	si,1
	*** 0013b9	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 0013bd	75 03 			jne	$JCC5053
	*** 0013bf	e9 36 00 		jmp	$I1554
					$JCC5053:
	*** 0013c2	ff 76 14 		push	WORD PTR [bp+20]	;port
	*** 0013c5	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0013c8	81 c3 7a 01 		add	bx,378	;017aH
	*** 0013cc	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 0013cf	d1 e6 			shl	si,1
	*** 0013d1	8b 7e 14 		mov	di,WORD PTR [bp+20]	;port
	*** 0013d4	c1 e7 04 		shl	di,4
	*** 0013d7	26 03 38 		add	di,WORD PTR es:[bx][si]
	*** 0013da	c1 e7 02 		shl	di,2
	*** 0013dd	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0013e0	26 8b 41 7a 		mov	ax,WORD PTR es:[bx+122][di]
	*** 0013e4	26 8b 51 7c 		mov	dx,WORD PTR es:[bx+124][di]
	*** 0013e8	05 06 00 		add	ax,6
	*** 0013eb	52 			push	dx
	*** 0013ec	50 			push	ax
	*** 0013ed	ff 76 08 		push	WORD PTR [bp+8]
	*** 0013f0	ff 76 06 		push	WORD PTR [bp+6]	;this
	*** 0013f3	9a 00 00 00 00 		call	FAR PTR ?setupdmar@Cescc@@JECXIPEX@Z	; Cescc::setupdmar
;|***   if(port_dmat_list[port]!=0) setupdmat(port,txbuffer[port][current_txbuf[port]]->frame,FRAME_SIZE);
; Line 435
					$I1554:
	*** 0013f8	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0013fb	83 c3 0c 		add	bx,12	;000cH
	*** 0013fe	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 001401	d1 e6 			shl	si,1
	*** 001403	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 001407	75 03 			jne	$JCC5127
	*** 001409	e9 3b 00 		jmp	$I1555
					$JCC5127:
	*** 00140c	ff 76 14 		push	WORD PTR [bp+20]	;port
	*** 00140f	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001412	81 c3 7e 01 		add	bx,382	;017eH
	*** 001416	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 001419	d1 e6 			shl	si,1
	*** 00141b	8b 7e 14 		mov	di,WORD PTR [bp+20]	;port
	*** 00141e	c1 e7 04 		shl	di,4
	*** 001421	26 03 38 		add	di,WORD PTR es:[bx][si]
	*** 001424	c1 e7 02 		shl	di,2
	*** 001427	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00142a	26 8b 81 fa 00 		mov	ax,WORD PTR es:[bx+250][di]
	*** 00142f	26 8b 91 fc 00 		mov	dx,WORD PTR es:[bx+252][di]
	*** 001434	05 06 00 		add	ax,6
	*** 001437	52 			push	dx
	*** 001438	50 			push	ax
	*** 001439	68 00 04 		push	1024	;0400H
	*** 00143c	ff 76 08 		push	WORD PTR [bp+8]
	*** 00143f	ff 76 06 		push	WORD PTR [bp+6]	;this
	*** 001442	9a 00 00 00 00 		call	FAR PTR ?setupdmat@Cescc@@JECXIPEXI@Z	; Cescc::setupdmat
;|***   
;|***   outp(port_list[port]+CMDR,XRES);//reset transmitter
; Line 437
					$I1555:
	*** 001447	6a 01 			push	1
	*** 001449	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 00144c	d1 e3 			shl	bx,1
	*** 00144e	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001451	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 001454	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001459	83 c4 04 		add	sp,4
;|***   
;|***   unsigned long timeout_cntr = 0;
; Line 439
	*** 00145c	2b c0 			sub	ax,ax
	*** 00145e	89 46 fc 		mov	WORD PTR [bp-4],ax
	*** 001461	89 46 fa 		mov	WORD PTR [bp-6],ax	;timeout_cntr
;|*** 
;|***   while((inp(port_list[port]+STAR)&CEC)==CEC)
; Line 441
					$FC1558:
	*** 001464	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 001467	d1 e3 			shl	bx,1
	*** 001469	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00146c	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 00146f	9a 00 00 00 00 		call	FAR PTR _inp
	*** 001474	83 c4 02 		add	sp,2
	*** 001477	24 04 			and	al,4
	*** 001479	3c 04 			cmp	al,4
	*** 00147b	74 03 			je	$JCC5243
	*** 00147d	e9 5d 00 		jmp	$FB1559
					$JCC5243:
;|***     {
; Line 442
;|***     timeout_cntr++;
; Line 443
	*** 001480	83 46 fa 01 		add	WORD PTR [bp-6],1	;timeout_cntr
	*** 001484	83 56 fc 00 		adc	WORD PTR [bp-4],0
;|***     if(timeout_cntr>1000000)
; Line 444
	*** 001488	83 7e fc 0f 		cmp	WORD PTR [bp-4],15	;000fH
	*** 00148c	73 03 			jae	$JCC5260
	*** 00148e	e9 49 00 		jmp	$I1560
					$JCC5260:
	*** 001491	76 03 			jbe	$JCC5265
	*** 001493	e9 0a 00 		jmp	$L2037
					$JCC5265:
	*** 001496	81 7e fa 40 42 		cmp	WORD PTR [bp-6],16960	;4240H	;timeout_cntr
	*** 00149b	77 03 			ja	$JCC5275
	*** 00149d	e9 3a 00 		jmp	$I1560
					$JCC5275:
					$L2037:
;|***       {
; Line 445
;|***       //bad error condition here must indicate that we are not ready for business
;|***       outp(port_list[port]+IMR0,0xff);
; Line 447
	*** 0014a0	68 ff 00 		push	255	;00ffH
	*** 0014a3	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 0014a6	d1 e3 			shl	bx,1
	*** 0014a8	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0014ab	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0014ae	05 1a 00 		add	ax,26	;001aH
	*** 0014b1	50 			push	ax
	*** 0014b2	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0014b7	83 c4 04 		add	sp,4
;|***       outp(port_list[port]+IMR1,0xff);
; Line 448
	*** 0014ba	68 ff 00 		push	255	;00ffH
	*** 0014bd	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 0014c0	d1 e3 			shl	bx,1
	*** 0014c2	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0014c5	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0014c8	05 1b 00 		add	ax,27	;001bH
	*** 0014cb	50 			push	ax
	*** 0014cc	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0014d1	83 c4 04 		add	sp,4
;|***       return FALSE;
; Line 449
	*** 0014d4	b8 01 00 		mov	ax,1
	*** 0014d7	e9 31 01 		jmp	$EX1520
;|***       }
; Line 450
;|***     }//wait for CEC = 0//need a timeout loop here (only wait so long...now it could be infinite if no txclock input to hscx)
; Line 451
					$I1560:
	*** 0014da	e9 87 ff 		jmp	$FC1558
					$FB1559:
;|***   
;|***   outp(port_list[port]+CMDR,RHR); //reset receiver
; Line 453
	*** 0014dd	6a 40 			push	64	;0040H
	*** 0014df	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 0014e2	d1 e3 			shl	bx,1
	*** 0014e4	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0014e7	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 0014ea	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0014ef	83 c4 04 		add	sp,4
;|***   timeout_cntr=0;
; Line 454
	*** 0014f2	2b c0 			sub	ax,ax
	*** 0014f4	89 46 fc 		mov	WORD PTR [bp-4],ax
	*** 0014f7	89 46 fa 		mov	WORD PTR [bp-6],ax	;timeout_cntr
;|***   while((inp(port_list[port]+STAR)&CEC)==CEC)
; Line 455
					$FC1562:
	*** 0014fa	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 0014fd	d1 e3 			shl	bx,1
	*** 0014ff	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001502	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 001505	9a 00 00 00 00 		call	FAR PTR _inp
	*** 00150a	83 c4 02 		add	sp,2
	*** 00150d	24 04 			and	al,4
	*** 00150f	3c 04 			cmp	al,4
	*** 001511	74 03 			je	$JCC5393
	*** 001513	e9 5d 00 		jmp	$FB1563
					$JCC5393:
;|***     {
; Line 456
;|***     timeout_cntr++;
; Line 457
	*** 001516	83 46 fa 01 		add	WORD PTR [bp-6],1	;timeout_cntr
	*** 00151a	83 56 fc 00 		adc	WORD PTR [bp-4],0
;|***     if(timeout_cntr>1000000)
; Line 458
	*** 00151e	83 7e fc 0f 		cmp	WORD PTR [bp-4],15	;000fH
	*** 001522	73 03 			jae	$JCC5410
	*** 001524	e9 49 00 		jmp	$I1564
					$JCC5410:
	*** 001527	76 03 			jbe	$JCC5415
	*** 001529	e9 0a 00 		jmp	$L2038
					$JCC5415:
	*** 00152c	81 7e fa 40 42 		cmp	WORD PTR [bp-6],16960	;4240H	;timeout_cntr
	*** 001531	77 03 			ja	$JCC5425
	*** 001533	e9 3a 00 		jmp	$I1564
					$JCC5425:
					$L2038:
;|***       {
; Line 459
;|***       //bad error condition here must indicate that we are not ready for business
;|***       outp(port_list[port]+IMR0,0xff);//mask all interrupts 
; Line 461
	*** 001536	68 ff 00 		push	255	;00ffH
	*** 001539	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 00153c	d1 e3 			shl	bx,1
	*** 00153e	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001541	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001544	05 1a 00 		add	ax,26	;001aH
	*** 001547	50 			push	ax
	*** 001548	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00154d	83 c4 04 		add	sp,4
;|***       outp(port_list[port]+IMR1,0xff);
; Line 462
	*** 001550	68 ff 00 		push	255	;00ffH
	*** 001553	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 001556	d1 e3 			shl	bx,1
	*** 001558	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00155b	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00155e	05 1b 00 		add	ax,27	;001bH
	*** 001561	50 			push	ax
	*** 001562	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001567	83 c4 04 		add	sp,4
;|***       return FALSE;
; Line 463
	*** 00156a	b8 01 00 		mov	ax,1
	*** 00156d	e9 9b 00 		jmp	$EX1520
;|***       }
; Line 464
;|***     }//wait for CEC = 0//need a timeout loop here (only wait so long...now it could be infinite if no txclock input to hscx)
; Line 465
					$I1564:
	*** 001570	e9 87 ff 		jmp	$FC1562
					$FB1563:
;|*** 
;|***   port_open_list[port] = 1;  //flag this port open
; Line 467
	*** 001573	8b 76 14 		mov	si,WORD PTR [bp+20]	;port
	*** 001576	d1 e6 			shl	si,1
	*** 001578	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00157b	26 c7 40 04 01 00 	mov	WORD PTR es:[bx+4][si],1
;|***   
;|***   outp(port_list[port]+IMR0,esccregs->imr0);//flame on, unmask escc interrupts
; Line 469
	*** 001581	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 001584	26 ff 77 1a 		push	WORD PTR es:[bx+26]
	*** 001588	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 00158b	d1 e3 			shl	bx,1
	*** 00158d	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001590	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001593	05 1a 00 		add	ax,26	;001aH
	*** 001596	50 			push	ax
	*** 001597	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00159c	83 c4 04 		add	sp,4
;|***   outp(port_list[port]+IMR1,esccregs->imr1);
; Line 470
	*** 00159f	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 0015a2	26 ff 77 1c 		push	WORD PTR es:[bx+28]
	*** 0015a6	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 0015a9	d1 e3 			shl	bx,1
	*** 0015ab	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0015ae	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0015b1	05 1b 00 		add	ax,27	;001bH
	*** 0015b4	50 			push	ax
	*** 0015b5	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0015ba	83 c4 04 		add	sp,4
;|***   outp(port_list[port]+PIM,esccregs->pim);
; Line 471
	*** 0015bd	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 0015c0	26 ff 77 20 		push	WORD PTR es:[bx+32]
	*** 0015c4	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 0015c7	d1 e3 			shl	bx,1
	*** 0015c9	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0015cc	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0015cf	05 1d 00 		add	ax,29	;001dH
	*** 0015d2	50 			push	ax
	*** 0015d3	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0015d8	83 c4 04 		add	sp,4
;|***   
;|***   if(opmode==OPMODE_BISYNC) outp(port_list[port]+CMDR,HUNT);//start receive engine...search for SYN
; Line 473
	*** 0015db	83 7e 12 02 		cmp	WORD PTR [bp+18],2	;opmode
	*** 0015df	74 03 			je	$JCC5599
	*** 0015e1	e9 15 00 		jmp	$I1565
					$JCC5599:
	*** 0015e4	6a 04 			push	4
	*** 0015e6	8b 5e 14 		mov	bx,WORD PTR [bp+20]	;port
	*** 0015e9	d1 e3 			shl	bx,1
	*** 0015eb	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0015ee	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 0015f1	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0015f6	83 c4 04 		add	sp,4
;|***   if(esccregs->cmdr !=0);//could write the command if we wanted to but we won't for now
; Line 474
					$I1565:
	*** 0015f9	c4 5e 0e 		les	bx,DWORD PTR [bp+14]	;esccregs
	*** 0015fc	26 83 3f 00 		cmp	WORD PTR es:[bx],0
	*** 001600	75 03 			jne	$JCC5632
	*** 001602	e9 00 00 		jmp	$I1566
					$JCC5632:
;|***   return TRUE;
; Line 475
					$I1566:
	*** 001605	b8 00 00 		mov	ax,0
	*** 001608	e9 00 00 		jmp	$EX1520
;|***   }  //  end init_port()
; Line 476
					$EX1520:
	*** 00160b	5e 			pop	si
	*** 00160c	5f 			pop	di
	*** 00160d	c9 			leave	
	*** 00160e	ca 10 00 		ret	16	;00000010H

?init_port@Cescc@@RECIIIPEUescc_regs@@II@Z	ENDP
	PUBLIC	?rx_port@Cescc@@RECIIPEDI@Z	; Cescc::rx_port
?rx_port@Cescc@@RECIIPEDI@Z	PROC FAR	; Cescc::rx_port
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** unsigned Cescc::rx_port(unsigned port,char far *buf, unsigned num_bytes)
;|***   {
; Line 484
	*** 001611	c8 04 00 00 		enter	4,0
	*** 001615	57 			push	di
	*** 001616	56 			push	si
;	i = -2
;	j = -4
;	this = 6
;	port = 16
;	buf = 12
;	num_bytes = 10
;|***   //returns the number of bytes transfered to buf (one frame worth)
;|***   //retval = rxbuffer[port][next_rbuf].no_bytes
;|***   //buf = rxbuffer[port][next_rbuf].frame
;|***   //rxbuffer[port][next_rbuf].valid = 0;
;|***   // next_rbuf++;
;|***   // if (next_rbuf > max_rbufs) next_rbuf =0 ;
;|***   unsigned i,j;
;|***   
;|***   // select channel A or B
;|***   outp(port_list[port]+PVR,(inp(port_list[port]+PVR)&0xfe)+channel[port]);
; Line 494
	*** 001617	8b 5e 10 		mov	bx,WORD PTR [bp+16]	;port
	*** 00161a	d1 e3 			shl	bx,1
	*** 00161c	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00161f	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001622	05 1c 00 		add	ax,28	;001cH
	*** 001625	50 			push	ax
	*** 001626	9a 00 00 00 00 		call	FAR PTR _inp
	*** 00162b	83 c4 02 		add	sp,2
	*** 00162e	25 fe 00 		and	ax,254	;00feH
	*** 001631	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001634	81 c3 9a 01 		add	bx,410	;019aH
	*** 001638	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 00163b	d1 e6 			shl	si,1
	*** 00163d	26 03 00 		add	ax,WORD PTR es:[bx][si]
	*** 001640	50 			push	ax
	*** 001641	8b 5e 10 		mov	bx,WORD PTR [bp+16]	;port
	*** 001644	d1 e3 			shl	bx,1
	*** 001646	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001649	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00164c	05 1c 00 		add	ax,28	;001cH
	*** 00164f	50 			push	ax
	*** 001650	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001655	83 c4 04 		add	sp,4
;|***   
;|***   // this is the section for autonomous model jtm
;|***   if((eopmode[port]==OPMODE_HDLC)||(eopmode[port]==OPMODE_BISYNC))
; Line 497
	*** 001658	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00165b	81 c3 9e 01 		add	bx,414	;019eH
	*** 00165f	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001662	d1 e6 			shl	si,1
	*** 001664	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 001668	75 03 			jne	$JCC5736
	*** 00166a	e9 15 00 		jmp	$I1575
					$JCC5736:
	*** 00166d	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001670	81 c3 9e 01 		add	bx,414	;019eH
	*** 001674	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001677	d1 e6 			shl	si,1
	*** 001679	26 83 38 02 		cmp	WORD PTR es:[bx][si],2
	*** 00167d	74 03 			je	$JCC5757
	*** 00167f	e9 1e 01 		jmp	$I1574
					$JCC5757:
					$I1575:
;|***     {
; Line 498
;|***     // select the escc buffer pool assigned to this channel
;|***     i = current_rxbuf[port];
; Line 500
	*** 001682	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001685	81 c3 7a 01 		add	bx,378	;017aH
	*** 001689	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 00168c	d1 e6 			shl	si,1
	*** 00168e	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001691	89 46 fe 		mov	WORD PTR [bp-2],ax	;i
;|***     i++;
; Line 501
	*** 001694	ff 46 fe 		inc	WORD PTR [bp-2]	;i
;|***     if(i==max_rxbuf[port]) i = 0;
; Line 502
	*** 001697	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;i
	*** 00169a	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00169d	81 c3 82 01 		add	bx,386	;0182H
	*** 0016a1	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 0016a4	d1 e6 			shl	si,1
	*** 0016a6	26 39 00 		cmp	WORD PTR es:[bx][si],ax
	*** 0016a9	74 03 			je	$JCC5801
	*** 0016ab	e9 05 00 		jmp	$I1576
					$JCC5801:
	*** 0016ae	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
;|***     
;|***     // step through the buffer pool to see if any has a message
;|***     do{
; Line 505
					$I1576:
					$D1577:
;|***       if(rxbuffer[port][i]->valid == 1)
; Line 506
	*** 0016b3	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 0016b6	c1 e6 04 		shl	si,4
	*** 0016b9	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 0016bc	c1 e6 02 		shl	si,2
	*** 0016bf	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0016c2	26 c4 58 7a 		les	bx,DWORD PTR es:[bx+122][si]
	*** 0016c6	26 83 3f 01 		cmp	WORD PTR es:[bx],1
	*** 0016ca	74 03 			je	$JCC5834
	*** 0016cc	e9 95 00 		jmp	$I1580
					$JCC5834:
;|***         {
; Line 507
;|***         // this escc buffer claims it has a message
;|***         // check for error conditions
;|***         // fail if the escc buffer holds more than the user's buffer can hold
;|***         if(rxbuffer[port][i]->no_bytes > num_bytes) return 0;
; Line 511
	*** 0016cf	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;num_bytes
	*** 0016d2	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 0016d5	c1 e6 04 		shl	si,4
	*** 0016d8	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 0016db	c1 e6 02 		shl	si,2
	*** 0016de	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0016e1	26 c4 58 7a 		les	bx,DWORD PTR es:[bx+122][si]
	*** 0016e5	26 39 47 02 		cmp	WORD PTR es:[bx+2],ax
	*** 0016e9	77 03 			ja	$JCC5865
	*** 0016eb	e9 06 00 		jmp	$I1581
					$JCC5865:
	*** 0016ee	b8 00 00 		mov	ax,0
	*** 0016f1	e9 e5 01 		jmp	$EX1571
;|***         
;|***         // user's buffer is ok so copy the message over
;|***         for(j=0;j<rxbuffer[port][i]->no_bytes;j++)
; Line 514
					$I1581:
	*** 0016f4	c7 46 fc 00 00 		mov	WORD PTR [bp-4],0	;j
	*** 0016f9	e9 03 00 		jmp	$F1582
					$FC1583:
	*** 0016fc	ff 46 fc 		inc	WORD PTR [bp-4]	;j
					$F1582:
	*** 0016ff	8b 46 fc 		mov	ax,WORD PTR [bp-4]	;j
	*** 001702	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001705	c1 e6 04 		shl	si,4
	*** 001708	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 00170b	c1 e6 02 		shl	si,2
	*** 00170e	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001711	26 c4 58 7a 		les	bx,DWORD PTR es:[bx+122][si]
	*** 001715	26 39 47 02 		cmp	WORD PTR es:[bx+2],ax
	*** 001719	77 03 			ja	$JCC5913
	*** 00171b	e9 28 00 		jmp	$FB1584
					$JCC5913:
;|***           {
; Line 515
;|***           buf[j] = (rxbuffer[port][i]->frame[j]);
; Line 516
	*** 00171e	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001721	c1 e6 04 		shl	si,4
	*** 001724	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 001727	c1 e6 02 		shl	si,2
	*** 00172a	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00172d	26 c4 58 7a 		les	bx,DWORD PTR es:[bx+122][si]
	*** 001731	83 c3 06 		add	bx,6
	*** 001734	8b 76 fc 		mov	si,WORD PTR [bp-4]	;j
	*** 001737	26 8a 00 		mov	al,BYTE PTR es:[bx][si]
	*** 00173a	c4 5e 0c 		les	bx,DWORD PTR [bp+12]	;buf
	*** 00173d	8b 76 fc 		mov	si,WORD PTR [bp-4]	;j
	*** 001740	26 88 00 		mov	BYTE PTR es:[bx][si],al
;|***           }
; Line 517
	*** 001743	e9 b6 ff 		jmp	$FC1583
					$FB1584:
;|***         
;|***         // release the escc buffer to be used again  
;|***         rxbuffer[port][i]->valid = 0;
; Line 520
	*** 001746	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001749	c1 e6 04 		shl	si,4
	*** 00174c	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 00174f	c1 e6 02 		shl	si,2
	*** 001752	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001755	26 c4 58 7a 		les	bx,DWORD PTR es:[bx+122][si]
	*** 001759	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
;|***         
;|***         // tell the user how many chars were in the message
;|***         return j;
; Line 523
	*** 00175e	8b 46 fc 		mov	ax,WORD PTR [bp-4]	;j
	*** 001761	e9 75 01 		jmp	$EX1571
;|***         }
; Line 524
;|***       
;|***       i++; // this escc buffer has no message so try the next one
; Line 526
					$I1580:
	*** 001764	ff 46 fe 		inc	WORD PTR [bp-2]	;i
;|***       
;|***       //wrap back to 0 if at end of buffer pool
;|***       if(i==max_rxbuf[port])i = 0;
; Line 529
	*** 001767	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;i
	*** 00176a	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00176d	81 c3 82 01 		add	bx,386	;0182H
	*** 001771	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001774	d1 e6 			shl	si,1
	*** 001776	26 39 00 		cmp	WORD PTR es:[bx][si],ax
	*** 001779	74 03 			je	$JCC6009
	*** 00177b	e9 05 00 		jmp	$I1585
					$JCC6009:
	*** 00177e	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
;|***       
;|***       // repeat the do loop until you've checked all the buffers
;|***       // or until you find one with a message
;|***       }while(i!=current_rxbuf[port]);
; Line 533
					$I1585:
					$DC1578:
	*** 001783	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;i
	*** 001786	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001789	81 c3 7a 01 		add	bx,378	;017aH
	*** 00178d	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001790	d1 e6 			shl	si,1
	*** 001792	26 39 00 		cmp	WORD PTR es:[bx][si],ax
	*** 001795	74 03 			je	$JCC6037
	*** 001797	e9 19 ff 		jmp	$D1577
					$JCC6037:
					$DB1579:
;|***     
;|***     // tell the user that no messages were found
;|***     return 0;
; Line 536
	*** 00179a	b8 00 00 		mov	ax,0
	*** 00179d	e9 39 01 		jmp	$EX1571
;|***     }
; Line 537
;|*** 
;|***   if(eopmode[port]==OPMODE_ASYNC)
; Line 539
					$I1574:
	*** 0017a0	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0017a3	81 c3 9e 01 		add	bx,414	;019eH
	*** 0017a7	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 0017aa	d1 e6 			shl	si,1
	*** 0017ac	26 83 38 01 		cmp	WORD PTR es:[bx][si],1
	*** 0017b0	74 03 			je	$JCC6064
	*** 0017b2	e9 1e 01 		jmp	$I1586
					$JCC6064:
;|***     {
; Line 540
;|***     i = current_rxbuf[port];
; Line 541
	*** 0017b5	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0017b8	81 c3 7a 01 		add	bx,378	;017aH
	*** 0017bc	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 0017bf	d1 e6 			shl	si,1
	*** 0017c1	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0017c4	89 46 fe 		mov	WORD PTR [bp-2],ax	;i
;|***     i++;
; Line 542
	*** 0017c7	ff 46 fe 		inc	WORD PTR [bp-2]	;i
;|***     if(i==max_rxbuf[port]) i = 0;
; Line 543
	*** 0017ca	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;i
	*** 0017cd	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0017d0	81 c3 82 01 		add	bx,386	;0182H
	*** 0017d4	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 0017d7	d1 e6 			shl	si,1
	*** 0017d9	26 39 00 		cmp	WORD PTR es:[bx][si],ax
	*** 0017dc	74 03 			je	$JCC6108
	*** 0017de	e9 05 00 		jmp	$I1587
					$JCC6108:
	*** 0017e1	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
;|***     do{
; Line 544
					$I1587:
					$D1588:
;|***       if(rxbuffer[port][i]->valid ==1)
; Line 545
	*** 0017e6	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 0017e9	c1 e6 04 		shl	si,4
	*** 0017ec	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 0017ef	c1 e6 02 		shl	si,2
	*** 0017f2	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0017f5	26 c4 58 7a 		les	bx,DWORD PTR es:[bx+122][si]
	*** 0017f9	26 83 3f 01 		cmp	WORD PTR es:[bx],1
	*** 0017fd	74 03 			je	$JCC6141
	*** 0017ff	e9 95 00 		jmp	$I1591
					$JCC6141:
;|***         {
; Line 546
;|***         //we got a frame so copy the .frame to the buf and invalidate it 
;|***         //always assume that async will store both byte and status 
;|***         //such that data is allways multiples of 2
;|***         if((rxbuffer[port][i]->no_bytes) > num_bytes) return 0;
; Line 550
	*** 001802	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;num_bytes
	*** 001805	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001808	c1 e6 04 		shl	si,4
	*** 00180b	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 00180e	c1 e6 02 		shl	si,2
	*** 001811	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001814	26 c4 58 7a 		les	bx,DWORD PTR es:[bx+122][si]
	*** 001818	26 39 47 02 		cmp	WORD PTR es:[bx+2],ax
	*** 00181c	77 03 			ja	$JCC6172
	*** 00181e	e9 06 00 		jmp	$I1592
					$JCC6172:
	*** 001821	b8 00 00 		mov	ax,0
	*** 001824	e9 b2 00 		jmp	$EX1571
;|***         for(j=0;j<(rxbuffer[port][i]->no_bytes);j++)
; Line 551
					$I1592:
	*** 001827	c7 46 fc 00 00 		mov	WORD PTR [bp-4],0	;j
	*** 00182c	e9 03 00 		jmp	$F1593
					$FC1594:
	*** 00182f	ff 46 fc 		inc	WORD PTR [bp-4]	;j
					$F1593:
	*** 001832	8b 46 fc 		mov	ax,WORD PTR [bp-4]	;j
	*** 001835	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001838	c1 e6 04 		shl	si,4
	*** 00183b	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 00183e	c1 e6 02 		shl	si,2
	*** 001841	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001844	26 c4 58 7a 		les	bx,DWORD PTR es:[bx+122][si]
	*** 001848	26 39 47 02 		cmp	WORD PTR es:[bx+2],ax
	*** 00184c	77 03 			ja	$JCC6220
	*** 00184e	e9 28 00 		jmp	$FB1595
					$JCC6220:
;|***         buf[j] = (rxbuffer[port][i]->frame[j]);//copy to user buffer
; Line 552
	*** 001851	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001854	c1 e6 04 		shl	si,4
	*** 001857	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 00185a	c1 e6 02 		shl	si,2
	*** 00185d	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001860	26 c4 58 7a 		les	bx,DWORD PTR es:[bx+122][si]
	*** 001864	83 c3 06 		add	bx,6
	*** 001867	8b 76 fc 		mov	si,WORD PTR [bp-4]	;j
	*** 00186a	26 8a 00 		mov	al,BYTE PTR es:[bx][si]
	*** 00186d	c4 5e 0c 		les	bx,DWORD PTR [bp+12]	;buf
	*** 001870	8b 76 fc 		mov	si,WORD PTR [bp-4]	;j
	*** 001873	26 88 00 		mov	BYTE PTR es:[bx][si],al
	*** 001876	e9 b6 ff 		jmp	$FC1594
					$FB1595:
;|***         rxbuffer[port][i]->valid = 0;//invalidate so it can be used again
; Line 553
	*** 001879	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 00187c	c1 e6 04 		shl	si,4
	*** 00187f	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 001882	c1 e6 02 		shl	si,2
	*** 001885	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001888	26 c4 58 7a 		les	bx,DWORD PTR es:[bx+122][si]
	*** 00188c	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
;|***         return j; //give back the # bytes copied
; Line 554
	*** 001891	8b 46 fc 		mov	ax,WORD PTR [bp-4]	;j
	*** 001894	e9 42 00 		jmp	$EX1571
;|***         }
; Line 555
;|***         
;|***       i++;  //try the next one
; Line 557
					$I1591:
	*** 001897	ff 46 fe 		inc	WORD PTR [bp-2]	;i
;|***       if(i==max_rxbuf[port])i = 0;//wrap to 0 if at end of buffers
; Line 558
	*** 00189a	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;i
	*** 00189d	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0018a0	81 c3 82 01 		add	bx,386	;0182H
	*** 0018a4	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 0018a7	d1 e6 			shl	si,1
	*** 0018a9	26 39 00 		cmp	WORD PTR es:[bx][si],ax
	*** 0018ac	74 03 			je	$JCC6316
	*** 0018ae	e9 05 00 		jmp	$I1596
					$JCC6316:
	*** 0018b1	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
;|***       
;|***       }while(i!=current_rxbuf[port]);
; Line 560
					$I1596:
					$DC1589:
	*** 0018b6	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;i
	*** 0018b9	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0018bc	81 c3 7a 01 		add	bx,378	;017aH
	*** 0018c0	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 0018c3	d1 e6 			shl	si,1
	*** 0018c5	26 39 00 		cmp	WORD PTR es:[bx][si],ax
	*** 0018c8	74 03 			je	$JCC6344
	*** 0018ca	e9 19 ff 		jmp	$D1588
					$JCC6344:
					$DB1590:
;|***   
;|***     return 0; //no received frames so no bytes xfred
; Line 562
	*** 0018cd	b8 00 00 		mov	ax,0
	*** 0018d0	e9 06 00 		jmp	$EX1571
;|***     }
; Line 563
;|***   return 0;
; Line 564
					$I1586:
	*** 0018d3	b8 00 00 		mov	ax,0
	*** 0018d6	e9 00 00 		jmp	$EX1571
;|***   }   //  end rx_port(); returns # bytes transfered, 0 if fails
; Line 565
					$EX1571:
	*** 0018d9	5e 			pop	si
	*** 0018da	5f 			pop	di
	*** 0018db	c9 			leave	
	*** 0018dc	ca 0c 00 		ret	12	;0000000cH

?rx_port@Cescc@@RECIIPEDI@Z	ENDP
	PUBLIC	?tx_port@Cescc@@RECIIPEDI@Z	; Cescc::tx_port
?tx_port@Cescc@@RECIIPEDI@Z	PROC FAR	; Cescc::tx_port
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|***   // tx_port() does only a small portion of the actual tx processing.
;|***   // escc_isr() does most of the work.
;|*** unsigned Cescc::tx_port(unsigned port,char far *buf, unsigned num_bytes)
;|***   {
; Line 574
	*** 0018df	c8 08 00 00 		enter	8,0
	*** 0018e3	57 			push	di
	*** 0018e4	56 			push	si
;	bloc = -4
;	i = -6
;	j = -8
;	this = 6
;	port = 16
;	buf = 12
;	num_bytes = 10
;|***   unsigned far *bloc;
;|***   if(num_bytes==0) return  -1;
; Line 576
	*** 0018e5	83 7e 0a 00 		cmp	WORD PTR [bp+10],0	;num_bytes
	*** 0018e9	74 03 			je	$JCC6377
	*** 0018eb	e9 06 00 		jmp	$I1603
					$JCC6377:
	*** 0018ee	b8 ff ff 		mov	ax,-1	;ffffH
	*** 0018f1	e9 dd 03 		jmp	$EX1601
;|***   if(num_bytes>FRAME_SIZE) return -2;
; Line 577
					$I1603:
	*** 0018f4	81 7e 0a 00 04 		cmp	WORD PTR [bp+10],1024	;0400H	;num_bytes
	*** 0018f9	77 03 			ja	$JCC6393
	*** 0018fb	e9 06 00 		jmp	$I1604
					$JCC6393:
	*** 0018fe	b8 fe ff 		mov	ax,-2	;fffeH
	*** 001901	e9 cd 03 		jmp	$EX1601
;|***   
;|***   unsigned i,j;
; Line 579
					$I1604:
;|***   
;|***   bloc = (unsigned far*)buf;
; Line 581
	*** 001904	8b 46 0c 		mov	ax,WORD PTR [bp+12]	;buf
	*** 001907	8b 56 0e 		mov	dx,WORD PTR [bp+14]
	*** 00190a	89 46 fc 		mov	WORD PTR [bp-4],ax	;bloc
	*** 00190d	89 56 fe 		mov	WORD PTR [bp-2],dx
;|***   
;|***   outp(port_list[port]+PVR,(inp(port_list[port]+PVR)&0xfe)+channel[port]); //select channel A or B
; Line 583
	*** 001910	8b 5e 10 		mov	bx,WORD PTR [bp+16]	;port
	*** 001913	d1 e3 			shl	bx,1
	*** 001915	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001918	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00191b	05 1c 00 		add	ax,28	;001cH
	*** 00191e	50 			push	ax
	*** 00191f	9a 00 00 00 00 		call	FAR PTR _inp
	*** 001924	83 c4 02 		add	sp,2
	*** 001927	25 fe 00 		and	ax,254	;00feH
	*** 00192a	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00192d	81 c3 9a 01 		add	bx,410	;019aH
	*** 001931	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001934	d1 e6 			shl	si,1
	*** 001936	26 03 00 		add	ax,WORD PTR es:[bx][si]
	*** 001939	50 			push	ax
	*** 00193a	8b 5e 10 		mov	bx,WORD PTR [bp+16]	;port
	*** 00193d	d1 e3 			shl	bx,1
	*** 00193f	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001942	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001945	05 1c 00 		add	ax,28	;001cH
	*** 001948	50 			push	ax
	*** 001949	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00194e	83 c4 04 		add	sp,4
;|***   
;|***   //all of this is operating mode specific,...need different cases for async, hdlc, bisync
;|***   i = current_txbuf[port];
; Line 586
	*** 001951	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001954	81 c3 7e 01 		add	bx,382	;017eH
	*** 001958	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 00195b	d1 e6 			shl	si,1
	*** 00195d	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001960	89 46 fa 		mov	WORD PTR [bp-6],ax	;i
;|***   
;|***   // The following do loop cycles through this port's txbuffers once,
;|***   // starting with current_txbuf[], then (in the first if statement)
;|***   // examines each txbuffer until it finds an an empty one
;|***   do  //while(i!=current_txbuf[port]) //Search through txbuffers.....
; Line 591
					$D1608:
;|***     {
; Line 592
;|***     if(txbuffer[port][i]->valid ==0)  //.....and find an empty one.
; Line 593
	*** 001963	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001966	c1 e6 04 		shl	si,4
	*** 001969	03 76 fa 		add	si,WORD PTR [bp-6]	;i
	*** 00196c	c1 e6 02 		shl	si,2
	*** 00196f	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001972	26 c4 98 fa 00 		les	bx,DWORD PTR es:[bx+250][si]
	*** 001977	26 83 3f 00 		cmp	WORD PTR es:[bx],0
	*** 00197b	74 03 			je	$JCC6523
	*** 00197d	e9 15 03 		jmp	$I1611
					$JCC6523:
;|***       {                               
; Line 594
;|***       if(port_dmat_list[port]==0)     //If we are not using DMA transfers to FIFO.....
; Line 595
	*** 001980	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001983	83 c3 0c 		add	bx,12	;000cH
	*** 001986	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001989	d1 e6 			shl	si,1
	*** 00198b	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 00198f	74 03 			je	$JCC6543
	*** 001991	e9 ef 01 		jmp	$I1612
					$JCC6543:
;|***         {
; Line 596
;|***         if((istxing[port]==0)&&(num_bytes<=32))//.....and this port is not currently txing a frame.....
; Line 597
	*** 001994	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001997	81 c3 92 01 		add	bx,402	;0192H
	*** 00199b	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 00199e	d1 e6 			shl	si,1
	*** 0019a0	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 0019a4	74 03 			je	$JCC6564
	*** 0019a6	e9 98 00 		jmp	$I1613
					$JCC6564:
	*** 0019a9	83 7e 0a 20 		cmp	WORD PTR [bp+10],32	;0020H	;num_bytes
	*** 0019ad	76 03 			jbe	$JCC6573
	*** 0019af	e9 8f 00 		jmp	$I1613
					$JCC6573:
;|***           {                                    //.....and we only need to fill the FIFO once (<=32 bytes)......
; Line 598
;|***                                              //.....then we can complete the send here and now.....
;|***           //printf("sending =<32\n\r");        //.....WITHOUT using a txbuffer.
;|***           txbuffer[port][i]->valid = 0;        //???  So declare this txbuffer free.....
; Line 601
	*** 0019b2	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 0019b5	c1 e6 04 		shl	si,4
	*** 0019b8	03 76 fa 		add	si,WORD PTR [bp-6]	;i
	*** 0019bb	c1 e6 02 		shl	si,2
	*** 0019be	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0019c1	26 c4 98 fa 00 		les	bx,DWORD PTR es:[bx+250][si]
	*** 0019c6	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
;|***           for(j=0;j<num_bytes;j++)
; Line 602
	*** 0019cb	c7 46 f8 00 00 		mov	WORD PTR [bp-8],0	;j
	*** 0019d0	e9 03 00 		jmp	$F1614
					$FC1615:
	*** 0019d3	ff 46 f8 		inc	WORD PTR [bp-8]	;j
					$F1614:
	*** 0019d6	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;num_bytes
	*** 0019d9	39 46 f8 		cmp	WORD PTR [bp-8],ax	;j
	*** 0019dc	72 03 			jb	$JCC6620
	*** 0019de	e9 25 00 		jmp	$FB1616
					$JCC6620:
;|***             outp(port_list[port]+FIFO,buf[j]);//and write directly to FIFO from user's buffer
; Line 603
	*** 0019e1	c4 5e 0c 		les	bx,DWORD PTR [bp+12]	;buf
	*** 0019e4	8b 76 f8 		mov	si,WORD PTR [bp-8]	;j
	*** 0019e7	26 8a 00 		mov	al,BYTE PTR es:[bx][si]
	*** 0019ea	98 			cbw	
	*** 0019eb	50 			push	ax
	*** 0019ec	8b 5e 10 		mov	bx,WORD PTR [bp+16]	;port
	*** 0019ef	d1 e3 			shl	bx,1
	*** 0019f1	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0019f4	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0019f7	05 20 00 		add	ax,32	;0020H
	*** 0019fa	50 			push	ax
	*** 0019fb	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001a00	83 c4 04 		add	sp,4
	*** 001a03	e9 cd ff 		jmp	$FC1615
					$FB1616:
;|***           istxing[port] = 1;   //flag that this port is actively txing
; Line 604
	*** 001a06	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001a09	d1 e6 			shl	si,1
	*** 001a0b	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001a0e	26 c7 80 92 01 01 00 	mov	WORD PTR es:[bx+402][si],1
;|***           outp(port_list[port]+CMDR,tx_type[port]+XME); //send XTF+XME command to escc
; Line 605
	*** 001a15	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001a18	81 c3 8e 01 		add	bx,398	;018eH
	*** 001a1c	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001a1f	d1 e6 			shl	si,1
	*** 001a21	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001a24	05 02 00 		add	ax,2
	*** 001a27	50 			push	ax
	*** 001a28	8b 5e 10 		mov	bx,WORD PTR [bp+16]	;port
	*** 001a2b	d1 e3 			shl	bx,1
	*** 001a2d	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001a30	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 001a33	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001a38	83 c4 04 		add	sp,4
;|***           return num_bytes; //done
; Line 606
	*** 001a3b	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;num_bytes
	*** 001a3e	e9 90 02 		jmp	$EX1601
;|***           }
; Line 607
;|***         
;|***         // If the message is too big to fit in the FIFO (> 32 bytes)
;|***         // or if this port is currently txing, 
;|***         // then we need to store the message in a txbuffer.
;|***         for(j=0;j<num_bytes;j++)   // so load the message into a txbuffer
; Line 612
					$I1613:
	*** 001a41	c7 46 f8 00 00 		mov	WORD PTR [bp-8],0	;j
	*** 001a46	e9 03 00 		jmp	$F1617
					$FC1618:
	*** 001a49	ff 46 f8 		inc	WORD PTR [bp-8]	;j
					$F1617:
	*** 001a4c	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;num_bytes
	*** 001a4f	39 46 f8 		cmp	WORD PTR [bp-8],ax	;j
	*** 001a52	72 03 			jb	$JCC6738
	*** 001a54	e9 2a 00 		jmp	$FB1619
					$JCC6738:
;|***           txbuffer[port][i]->frame[j] = buf[j];
; Line 613
	*** 001a57	c4 5e 0c 		les	bx,DWORD PTR [bp+12]	;buf
	*** 001a5a	8b 76 f8 		mov	si,WORD PTR [bp-8]	;j
	*** 001a5d	26 8a 00 		mov	al,BYTE PTR es:[bx][si]
	*** 001a60	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;j
	*** 001a63	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001a66	c1 e6 04 		shl	si,4
	*** 001a69	03 76 fa 		add	si,WORD PTR [bp-6]	;i
	*** 001a6c	c1 e6 02 		shl	si,2
	*** 001a6f	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001a72	26 c4 b0 fa 00 		les	si,DWORD PTR es:[bx+250][si]
	*** 001a77	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;j
	*** 001a7a	26 88 40 06 		mov	BYTE PTR es:[bx+6][si],al
	*** 001a7e	e9 c8 ff 		jmp	$FC1618
					$FB1619:
;|***         txbuffer[port][i]->valid = 1; //flag the isr that this txbuffer has a pending message,
; Line 614
	*** 001a81	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001a84	c1 e6 04 		shl	si,4
	*** 001a87	03 76 fa 		add	si,WORD PTR [bp-6]	;i
	*** 001a8a	c1 e6 02 		shl	si,2
	*** 001a8d	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001a90	26 c4 98 fa 00 		les	bx,DWORD PTR es:[bx+250][si]
	*** 001a95	26 c7 07 01 00 		mov	WORD PTR es:[bx],1
;|***         txbuffer[port][i]->max = num_bytes; //and record how many bytes are to be tx'ed.
; Line 615
	*** 001a9a	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;num_bytes
	*** 001a9d	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001aa0	c1 e6 04 		shl	si,4
	*** 001aa3	03 76 fa 		add	si,WORD PTR [bp-6]	;i
	*** 001aa6	c1 e6 02 		shl	si,2
	*** 001aa9	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001aac	26 c4 98 fa 00 		les	bx,DWORD PTR es:[bx+250][si]
	*** 001ab1	26 89 47 04 		mov	WORD PTR es:[bx+4],ax
;|***         txbuffer[port][i]->no_bytes = 0;    //no_bytes is number actually sent
; Line 616
	*** 001ab5	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001ab8	c1 e6 04 		shl	si,4
	*** 001abb	03 76 fa 		add	si,WORD PTR [bp-6]	;i
	*** 001abe	c1 e6 02 		shl	si,2
	*** 001ac1	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001ac4	26 c4 98 fa 00 		les	bx,DWORD PTR es:[bx+250][si]
	*** 001ac9	26 c7 47 02 00 00 	mov	WORD PTR es:[bx+2],0
;|***         //current_txbuf[port]++;
;|***         //if(current_txbuf[port]==max_txbuf[port]) current_txbuf[port] = 0;
;|***         if(istxing[port]==1) //If this port is currently txing, we will let the isr
; Line 619
	*** 001acf	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001ad2	81 c3 92 01 		add	bx,402	;0192H
	*** 001ad6	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001ad9	d1 e6 			shl	si,1
	*** 001adb	26 83 38 01 		cmp	WORD PTR es:[bx][si],1
	*** 001adf	74 03 			je	$JCC6879
	*** 001ae1	e9 09 00 		jmp	$I1620
					$JCC6879:
;|***           {          //reload the FIFO and tx the data when an XPR occurs.
; Line 620
;|***           //printf("txing queued\n\r");
;|***           return j;//return number of bytes xfred       //j==num_bytes after previous for loop
; Line 622
	*** 001ae4	8b 46 f8 		mov	ax,WORD PTR [bp-8]	;j
	*** 001ae7	e9 e7 01 		jmp	$EX1601
;|***           }
; Line 623
;|***         else // If this port is not currently txing
; Line 624
	*** 001aea	e9 93 00 		jmp	$I1621
					$I1620:
;|***              // we will load the FIFO and issue the tx command.
;|***           {
; Line 626
;|***           //printf("initiating transfer\n\r");
;|***           //outp(port_list[port]+CMDR,XRES);           //will force a tx interrupt and send the frame
;|***           if(num_bytes>32)
; Line 629
	*** 001aed	83 7e 0a 20 		cmp	WORD PTR [bp+10],32	;0020H	;num_bytes
	*** 001af1	77 03 			ja	$JCC6897
	*** 001af3	e9 84 00 		jmp	$I1622
					$JCC6897:
;|***             {
; Line 630
;|***             //printf("sending =32\n\r");
;|***             txbuffer[port][i]->no_bytes = 32;
; Line 632
	*** 001af6	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001af9	c1 e6 04 		shl	si,4
	*** 001afc	03 76 fa 		add	si,WORD PTR [bp-6]	;i
	*** 001aff	c1 e6 02 		shl	si,2
	*** 001b02	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001b05	26 c4 98 fa 00 		les	bx,DWORD PTR es:[bx+250][si]
	*** 001b0a	26 c7 47 02 20 00 	mov	WORD PTR es:[bx+2],32	;0020H
;|***             for(j=0;j<16;j++)
; Line 633
	*** 001b10	c7 46 f8 00 00 		mov	WORD PTR [bp-8],0	;j
	*** 001b15	e9 03 00 		jmp	$F1623
					$FC1624:
	*** 001b18	ff 46 f8 		inc	WORD PTR [bp-8]	;j
					$F1623:
	*** 001b1b	83 7e f8 10 		cmp	WORD PTR [bp-8],16	;0010H	;j
	*** 001b1f	72 03 			jb	$JCC6943
	*** 001b21	e9 25 00 		jmp	$FB1625
					$JCC6943:
;|***               outpw(port_list[port]+FIFO,bloc[j]);   //load next 32 bytes into fifo
; Line 634
	*** 001b24	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;j
	*** 001b27	d1 e3 			shl	bx,1
	*** 001b29	c4 76 fc 		les	si,DWORD PTR [bp-4]	;bloc
	*** 001b2c	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 001b2f	8b 5e 10 		mov	bx,WORD PTR [bp+16]	;port
	*** 001b32	d1 e3 			shl	bx,1
	*** 001b34	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001b37	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001b3a	05 20 00 		add	ax,32	;0020H
	*** 001b3d	50 			push	ax
	*** 001b3e	9a 00 00 00 00 		call	FAR PTR _outpw
	*** 001b43	83 c4 04 		add	sp,4
	*** 001b46	e9 cf ff 		jmp	$FC1624
					$FB1625:
;|***             istxing[port]=1;
; Line 635
	*** 001b49	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001b4c	d1 e6 			shl	si,1
	*** 001b4e	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001b51	26 c7 80 92 01 01 00 	mov	WORD PTR es:[bx+402][si],1
;|***             outp(port_list[port]+CMDR,tx_type[port]);               //command escc to tx
; Line 636
	*** 001b58	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001b5b	81 c3 8e 01 		add	bx,398	;018eH
	*** 001b5f	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001b62	d1 e6 			shl	si,1
	*** 001b64	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 001b67	8b 5e 10 		mov	bx,WORD PTR [bp+16]	;port
	*** 001b6a	d1 e3 			shl	bx,1
	*** 001b6c	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001b6f	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 001b72	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001b77	83 c4 04 		add	sp,4
;|***             }
; Line 637
;|***           return num_bytes; //return number of bytes xfrd
; Line 638
					$I1622:
	*** 001b7a	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;num_bytes
	*** 001b7d	e9 51 01 		jmp	$EX1601
;|***           }  // end else this port is not txing
; Line 639
					$I1621:
;|***         }  // end not dma
; Line 640
;|***       
;|***       else  // do a DMA style transfer
; Line 642
	*** 001b80	e9 12 01 		jmp	$I1626
					$I1612:
;|***         {
; Line 643
;|***         // printf("txing DMA style\n\r");
;|***         //
;|***         // copy the contents of the char string supplied to
;|***         // the tx_port function to the next available tx buffer
;|***         for(j=0;j<num_bytes;j++)
; Line 648
	*** 001b83	c7 46 f8 00 00 		mov	WORD PTR [bp-8],0	;j
	*** 001b88	e9 03 00 		jmp	$F1627
					$FC1628:
	*** 001b8b	ff 46 f8 		inc	WORD PTR [bp-8]	;j
					$F1627:
	*** 001b8e	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;num_bytes
	*** 001b91	39 46 f8 		cmp	WORD PTR [bp-8],ax	;j
	*** 001b94	72 03 			jb	$JCC7060
	*** 001b96	e9 2a 00 		jmp	$FB1629
					$JCC7060:
;|***           txbuffer[port][i]->frame[j] = buf[j];
; Line 649
	*** 001b99	c4 5e 0c 		les	bx,DWORD PTR [bp+12]	;buf
	*** 001b9c	8b 76 f8 		mov	si,WORD PTR [bp-8]	;j
	*** 001b9f	26 8a 00 		mov	al,BYTE PTR es:[bx][si]
	*** 001ba2	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;j
	*** 001ba5	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001ba8	c1 e6 04 		shl	si,4
	*** 001bab	03 76 fa 		add	si,WORD PTR [bp-6]	;i
	*** 001bae	c1 e6 02 		shl	si,2
	*** 001bb1	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001bb4	26 c4 b0 fa 00 		les	si,DWORD PTR es:[bx+250][si]
	*** 001bb9	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;j
	*** 001bbc	26 88 40 06 		mov	BYTE PTR es:[bx+6][si],al
	*** 001bc0	e9 c8 ff 		jmp	$FC1628
					$FB1629:
;|***         txbuffer[port][i]->valid = 1;  // mark the tx buffer as containing valid data
; Line 650
	*** 001bc3	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001bc6	c1 e6 04 		shl	si,4
	*** 001bc9	03 76 fa 		add	si,WORD PTR [bp-6]	;i
	*** 001bcc	c1 e6 02 		shl	si,2
	*** 001bcf	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001bd2	26 c4 98 fa 00 		les	bx,DWORD PTR es:[bx+250][si]
	*** 001bd7	26 c7 07 01 00 		mov	WORD PTR es:[bx],1
;|***         txbuffer[port][i]->max = num_bytes;  // max stores number of bytes to be tx'ed
; Line 651
	*** 001bdc	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;num_bytes
	*** 001bdf	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001be2	c1 e6 04 		shl	si,4
	*** 001be5	03 76 fa 		add	si,WORD PTR [bp-6]	;i
	*** 001be8	c1 e6 02 		shl	si,2
	*** 001beb	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001bee	26 c4 98 fa 00 		les	bx,DWORD PTR es:[bx+250][si]
	*** 001bf3	26 89 47 04 		mov	WORD PTR es:[bx+4],ax
;|***         txbuffer[port][i]->no_bytes = 0;   // 
; Line 652
	*** 001bf7	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001bfa	c1 e6 04 		shl	si,4
	*** 001bfd	03 76 fa 		add	si,WORD PTR [bp-6]	;i
	*** 001c00	c1 e6 02 		shl	si,2
	*** 001c03	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001c06	26 c4 98 fa 00 		les	bx,DWORD PTR es:[bx+250][si]
	*** 001c0b	26 c7 47 02 00 00 	mov	WORD PTR es:[bx+2],0
;|***         
;|***         if(istxing[port]==1)  // if this port is already txing
; Line 654
	*** 001c11	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001c14	81 c3 92 01 		add	bx,402	;0192H
	*** 001c18	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001c1b	d1 e6 			shl	si,1
	*** 001c1d	26 83 38 01 		cmp	WORD PTR es:[bx][si],1
	*** 001c21	74 03 			je	$JCC7201
	*** 001c23	e9 09 00 		jmp	$I1630
					$JCC7201:
;|***           { 
; Line 655
;|***           //printf("txing queued\n\r");
;|***           return j;// just return the number of bytes xfred
; Line 657
	*** 001c26	8b 46 f8 		mov	ax,WORD PTR [bp-8]	;j
	*** 001c29	e9 a5 00 		jmp	$EX1601
;|***           }
; Line 658
;|***           
;|***         else   // this port is NOT already txing
; Line 660
	*** 001c2c	e9 66 00 		jmp	$I1631
					$I1630:
;|***           {
; Line 661
;|***           //ok here we initiate the dma transfer
;|***           //the num_bytes passed to the dma controller needs to be modified as the 
;|***           //16 bit dma's use half the transfers for the same num_bytes...
;|***           setupdmat(port,txbuffer[port][i]->frame,num_bytes);
; Line 665
	*** 001c2f	ff 76 10 		push	WORD PTR [bp+16]	;port
	*** 001c32	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001c35	c1 e6 04 		shl	si,4
	*** 001c38	03 76 fa 		add	si,WORD PTR [bp-6]	;i
	*** 001c3b	c1 e6 02 		shl	si,2
	*** 001c3e	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001c41	26 8b 80 fa 00 		mov	ax,WORD PTR es:[bx+250][si]
	*** 001c46	26 8b 90 fc 00 		mov	dx,WORD PTR es:[bx+252][si]
	*** 001c4b	05 06 00 		add	ax,6
	*** 001c4e	52 			push	dx
	*** 001c4f	50 			push	ax
	*** 001c50	ff 76 0a 		push	WORD PTR [bp+10]	;num_bytes
	*** 001c53	ff 76 08 		push	WORD PTR [bp+8]
	*** 001c56	ff 76 06 		push	WORD PTR [bp+6]	;this
	*** 001c59	9a 00 00 00 00 		call	FAR PTR ?setupdmat@Cescc@@JECXIPEXI@Z	; Cescc::setupdmat
;|***           istxing[port] = 1;
; Line 666
	*** 001c5e	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001c61	d1 e6 			shl	si,1
	*** 001c63	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001c66	26 c7 80 92 01 01 00 	mov	WORD PTR es:[bx+402][si],1
;|***           outp(port_list[port]+CMDR,tx_type[port]);
; Line 667
	*** 001c6d	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001c70	81 c3 8e 01 		add	bx,398	;018eH
	*** 001c74	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001c77	d1 e6 			shl	si,1
	*** 001c79	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 001c7c	8b 5e 10 		mov	bx,WORD PTR [bp+16]	;port
	*** 001c7f	d1 e3 			shl	bx,1
	*** 001c81	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001c84	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 001c87	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001c8c	83 c4 04 		add	sp,4
;|***           return j;
; Line 668
	*** 001c8f	8b 46 f8 		mov	ax,WORD PTR [bp-8]	;j
	*** 001c92	e9 3c 00 		jmp	$EX1601
;|***           }  // end else
; Line 669
					$I1631:
;|***         }  // end dma style
; Line 670
					$I1626:
;|***       }  // end if this txbuffer avaiable
; Line 671
;|***     i++; //look at next txbuffer
; Line 672
					$I1611:
	*** 001c95	ff 46 fa 		inc	WORD PTR [bp-6]	;i
;|***     if(i==max_txbuf[port]) i = 0; //if this is highest buffer, then reset to first buffer
; Line 673
	*** 001c98	8b 46 fa 		mov	ax,WORD PTR [bp-6]	;i
	*** 001c9b	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001c9e	81 c3 86 01 		add	bx,390	;0186H
	*** 001ca2	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001ca5	d1 e6 			shl	si,1
	*** 001ca7	26 39 00 		cmp	WORD PTR es:[bx][si],ax
	*** 001caa	74 03 			je	$JCC7338
	*** 001cac	e9 05 00 		jmp	$I1632
					$JCC7338:
	*** 001caf	c7 46 fa 00 00 		mov	WORD PTR [bp-6],0	;i
;|***     
;|***     }while(i!=current_txbuf[port]); //continue looking for available txbuffer until cycled through buffers once
; Line 675
					$I1632:
					$DC1609:
	*** 001cb4	8b 46 fa 		mov	ax,WORD PTR [bp-6]	;i
	*** 001cb7	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001cba	81 c3 7e 01 		add	bx,382	;017eH
	*** 001cbe	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 001cc1	d1 e6 			shl	si,1
	*** 001cc3	26 39 00 		cmp	WORD PTR es:[bx][si],ax
	*** 001cc6	74 03 			je	$JCC7366
	*** 001cc8	e9 98 fc 		jmp	$D1608
					$JCC7366:
					$DB1610:
;|***   
;|***   //if here then there are no txbufs available so indicate no bytes xfred
;|***   return -3;
; Line 678
	*** 001ccb	b8 fd ff 		mov	ax,-3	;fffdH
	*** 001cce	e9 00 00 		jmp	$EX1601
;|***   }         //  end tx_port(); returns # bytes transfered,0 if fails
; Line 679
					$EX1601:
	*** 001cd1	5e 			pop	si
	*** 001cd2	5f 			pop	di
	*** 001cd3	c9 			leave	
	*** 001cd4	ca 0c 00 		ret	12	;0000000cH

?tx_port@Cescc@@RECIIPEDI@Z	ENDP
	PUBLIC	?set_control_lines@Cescc@@RECIIII@Z	; Cescc::set_control_lines
?set_control_lines@Cescc@@RECIIII@Z	PROC FAR	; Cescc::set_control_lines
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** unsigned Cescc::set_control_lines(unsigned port, unsigned dtr, unsigned rts)
;|***   {
; Line 686
	*** 001cd7	c8 00 00 00 		enter	0,0
	*** 001cdb	57 			push	di
	*** 001cdc	56 			push	si
;	this = 6
;	port = 14
;	dtr = 12
;	rts = 10
;|***   
;|***   if(port_open_list!=0)
; Line 688
	*** 001cdd	8b 46 06 		mov	ax,WORD PTR [bp+6]	;this
	*** 001ce0	8b 56 08 		mov	dx,WORD PTR [bp+8]
	*** 001ce3	05 04 00 		add	ax,4
	*** 001ce6	0b d0 			or	dx,ax
	*** 001ce8	75 03 			jne	$JCC7400
	*** 001cea	e9 b1 01 		jmp	$I1638
					$JCC7400:
;|***     {                                                                         
; Line 689
;|***     outp(port_list[port]+PVR,(inp(port_list[port]+PVR)&0xfe)+channel[port]); //select channel A or B
; Line 690
	*** 001ced	8b 5e 0e 		mov	bx,WORD PTR [bp+14]	;port
	*** 001cf0	d1 e3 			shl	bx,1
	*** 001cf2	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001cf5	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001cf8	05 1c 00 		add	ax,28	;001cH
	*** 001cfb	50 			push	ax
	*** 001cfc	9a 00 00 00 00 		call	FAR PTR _inp
	*** 001d01	83 c4 02 		add	sp,2
	*** 001d04	25 fe 00 		and	ax,254	;00feH
	*** 001d07	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001d0a	81 c3 9a 01 		add	bx,410	;019aH
	*** 001d0e	8b 76 0e 		mov	si,WORD PTR [bp+14]	;port
	*** 001d11	d1 e6 			shl	si,1
	*** 001d13	26 03 00 		add	ax,WORD PTR es:[bx][si]
	*** 001d16	50 			push	ax
	*** 001d17	8b 5e 0e 		mov	bx,WORD PTR [bp+14]	;port
	*** 001d1a	d1 e3 			shl	bx,1
	*** 001d1c	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001d1f	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001d22	05 1c 00 		add	ax,28	;001cH
	*** 001d25	50 			push	ax
	*** 001d26	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001d2b	83 c4 04 		add	sp,4
;|***     //needs modified for correct registers on escc
;|***     if(dtr ==1) outp(port_list[port]+PVR,inp(port_list[port]+PVR)|(1<<(3+channel[port])));//set DTR
; Line 692
	*** 001d2e	83 7e 0c 01 		cmp	WORD PTR [bp+12],1	;dtr
	*** 001d32	74 03 			je	$JCC7474
	*** 001d34	e9 48 00 		jmp	$I1639
					$JCC7474:
	*** 001d37	8b 5e 0e 		mov	bx,WORD PTR [bp+14]	;port
	*** 001d3a	d1 e3 			shl	bx,1
	*** 001d3c	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001d3f	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001d42	05 1c 00 		add	ax,28	;001cH
	*** 001d45	50 			push	ax
	*** 001d46	9a 00 00 00 00 		call	FAR PTR _inp
	*** 001d4b	83 c4 02 		add	sp,2
	*** 001d4e	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001d51	81 c3 9a 01 		add	bx,410	;019aH
	*** 001d55	8b 76 0e 		mov	si,WORD PTR [bp+14]	;port
	*** 001d58	d1 e6 			shl	si,1
	*** 001d5a	26 8a 08 		mov	cl,BYTE PTR es:[bx][si]
	*** 001d5d	80 c1 03 		add	cl,3
	*** 001d60	ba 01 00 		mov	dx,1
	*** 001d63	d3 e2 			shl	dx,cl
	*** 001d65	0b d0 			or	dx,ax
	*** 001d67	52 			push	dx
	*** 001d68	8b 5e 0e 		mov	bx,WORD PTR [bp+14]	;port
	*** 001d6b	d1 e3 			shl	bx,1
	*** 001d6d	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001d70	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001d73	05 1c 00 		add	ax,28	;001cH
	*** 001d76	50 			push	ax
	*** 001d77	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001d7c	83 c4 04 		add	sp,4
;|***     if(channel[port]==0) if(dtr ==0) outp(port_list[port]+PVR,inp(port_list[port]+PVR)&0xf7);//clear DTR
; Line 693
					$I1639:
	*** 001d7f	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001d82	81 c3 9a 01 		add	bx,410	;019aH
	*** 001d86	8b 76 0e 		mov	si,WORD PTR [bp+14]	;port
	*** 001d89	d1 e6 			shl	si,1
	*** 001d8b	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 001d8f	74 03 			je	$JCC7567
	*** 001d91	e9 3b 00 		jmp	$I1640
					$JCC7567:
	*** 001d94	83 7e 0c 00 		cmp	WORD PTR [bp+12],0	;dtr
	*** 001d98	74 03 			je	$JCC7576
	*** 001d9a	e9 32 00 		jmp	$I1641
					$JCC7576:
	*** 001d9d	8b 5e 0e 		mov	bx,WORD PTR [bp+14]	;port
	*** 001da0	d1 e3 			shl	bx,1
	*** 001da2	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001da5	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001da8	05 1c 00 		add	ax,28	;001cH
	*** 001dab	50 			push	ax
	*** 001dac	9a 00 00 00 00 		call	FAR PTR _inp
	*** 001db1	83 c4 02 		add	sp,2
	*** 001db4	25 f7 00 		and	ax,247	;00f7H
	*** 001db7	50 			push	ax
	*** 001db8	8b 5e 0e 		mov	bx,WORD PTR [bp+14]	;port
	*** 001dbb	d1 e3 			shl	bx,1
	*** 001dbd	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001dc0	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001dc3	05 1c 00 		add	ax,28	;001cH
	*** 001dc6	50 			push	ax
	*** 001dc7	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001dcc	83 c4 04 		add	sp,4
;|***     if(channel[port]==1) if(dtr ==0) outp(port_list[port]+PVR,inp(port_list[port]+PVR)&0xef);
; Line 694
					$I1641:
					$I1640:
	*** 001dcf	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001dd2	81 c3 9a 01 		add	bx,410	;019aH
	*** 001dd6	8b 76 0e 		mov	si,WORD PTR [bp+14]	;port
	*** 001dd9	d1 e6 			shl	si,1
	*** 001ddb	26 83 38 01 		cmp	WORD PTR es:[bx][si],1
	*** 001ddf	74 03 			je	$JCC7647
	*** 001de1	e9 3b 00 		jmp	$I1642
					$JCC7647:
	*** 001de4	83 7e 0c 00 		cmp	WORD PTR [bp+12],0	;dtr
	*** 001de8	74 03 			je	$JCC7656
	*** 001dea	e9 32 00 		jmp	$I1643
					$JCC7656:
	*** 001ded	8b 5e 0e 		mov	bx,WORD PTR [bp+14]	;port
	*** 001df0	d1 e3 			shl	bx,1
	*** 001df2	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001df5	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001df8	05 1c 00 		add	ax,28	;001cH
	*** 001dfb	50 			push	ax
	*** 001dfc	9a 00 00 00 00 		call	FAR PTR _inp
	*** 001e01	83 c4 02 		add	sp,2
	*** 001e04	25 ef 00 		and	ax,239	;00efH
	*** 001e07	50 			push	ax
	*** 001e08	8b 5e 0e 		mov	bx,WORD PTR [bp+14]	;port
	*** 001e0b	d1 e3 			shl	bx,1
	*** 001e0d	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001e10	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001e13	05 1c 00 		add	ax,28	;001cH
	*** 001e16	50 			push	ax
	*** 001e17	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001e1c	83 c4 04 		add	sp,4
;|***     if(rts ==1) outp(port_list[port]+MODE,inp(port_list[port]+MODE)|0x04);//set the rts bit in MODE
; Line 695
					$I1643:
					$I1642:
	*** 001e1f	83 7e 0a 01 		cmp	WORD PTR [bp+10],1	;rts
	*** 001e23	74 03 			je	$JCC7715
	*** 001e25	e9 32 00 		jmp	$I1644
					$JCC7715:
	*** 001e28	8b 5e 0e 		mov	bx,WORD PTR [bp+14]	;port
	*** 001e2b	d1 e3 			shl	bx,1
	*** 001e2d	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001e30	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001e33	05 02 00 		add	ax,2
	*** 001e36	50 			push	ax
	*** 001e37	9a 00 00 00 00 		call	FAR PTR _inp
	*** 001e3c	83 c4 02 		add	sp,2
	*** 001e3f	0d 04 00 		or	ax,4
	*** 001e42	50 			push	ax
	*** 001e43	8b 5e 0e 		mov	bx,WORD PTR [bp+14]	;port
	*** 001e46	d1 e3 			shl	bx,1
	*** 001e48	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001e4b	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001e4e	05 02 00 		add	ax,2
	*** 001e51	50 			push	ax
	*** 001e52	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001e57	83 c4 04 		add	sp,4
;|***     if(rts ==0) outp(port_list[port]+MODE,inp(port_list[port]+MODE)&0xfb);//clear the RTS bit in mode
; Line 696
					$I1644:
	*** 001e5a	83 7e 0a 00 		cmp	WORD PTR [bp+10],0	;rts
	*** 001e5e	74 03 			je	$JCC7774
	*** 001e60	e9 32 00 		jmp	$I1645
					$JCC7774:
	*** 001e63	8b 5e 0e 		mov	bx,WORD PTR [bp+14]	;port
	*** 001e66	d1 e3 			shl	bx,1
	*** 001e68	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001e6b	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001e6e	05 02 00 		add	ax,2
	*** 001e71	50 			push	ax
	*** 001e72	9a 00 00 00 00 		call	FAR PTR _inp
	*** 001e77	83 c4 02 		add	sp,2
	*** 001e7a	25 fb 00 		and	ax,251	;00fbH
	*** 001e7d	50 			push	ax
	*** 001e7e	8b 5e 0e 		mov	bx,WORD PTR [bp+14]	;port
	*** 001e81	d1 e3 			shl	bx,1
	*** 001e83	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001e86	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001e89	05 02 00 		add	ax,2
	*** 001e8c	50 			push	ax
	*** 001e8d	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001e92	83 c4 04 		add	sp,4
;|***     return TRUE;
; Line 697
					$I1645:
	*** 001e95	b8 00 00 		mov	ax,0
	*** 001e98	e9 09 00 		jmp	$EX1637
;|***     }
; Line 698
;|***   else return FALSE;
; Line 699
	*** 001e9b	e9 06 00 		jmp	$I1646
					$I1638:
	*** 001e9e	b8 01 00 		mov	ax,1
	*** 001ea1	e9 00 00 		jmp	$EX1637
					$I1646:
;|***   }
; Line 700
					$EX1637:
	*** 001ea4	5e 			pop	si
	*** 001ea5	5f 			pop	di
	*** 001ea6	c9 			leave	
	*** 001ea7	ca 0a 00 		ret	10	;0000000aH

?set_control_lines@Cescc@@RECIIII@Z	ENDP
	PUBLIC	?get_control_lines@Cescc@@RECII@Z	; Cescc::get_control_lines
?get_control_lines@Cescc@@RECII@Z	PROC FAR	; Cescc::get_control_lines
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** unsigned Cescc::get_control_lines(unsigned port)
;|***   {
; Line 708
	*** 001eaa	c8 0c 00 00 		enter	12,0
	*** 001eae	57 			push	di
	*** 001eaf	56 			push	si
;	cts = -2
;	dsr = -4
;	dcd = -6
;	dtr = -8
;	rts = -10
;	retval = -12
;	this = 6
;	port = 10
;|***   unsigned cts,dsr,dcd,dtr,rts;
;|***   unsigned retval;
;|***   
;|***   if(port_open_list!=0)
; Line 712
	*** 001eb0	8b 46 06 		mov	ax,WORD PTR [bp+6]	;this
	*** 001eb3	8b 56 08 		mov	dx,WORD PTR [bp+8]
	*** 001eb6	05 04 00 		add	ax,4
	*** 001eb9	0b d0 			or	dx,ax
	*** 001ebb	75 03 			jne	$JCC7867
	*** 001ebd	e9 21 01 		jmp	$I1656
					$JCC7867:
;|***     {
; Line 713
;|***     outp(port_list[port]+PVR,(inp(port_list[port]+PVR)&0xfe)+channel[port]); //select channel A or B
; Line 714
	*** 001ec0	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 001ec3	d1 e3 			shl	bx,1
	*** 001ec5	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001ec8	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001ecb	05 1c 00 		add	ax,28	;001cH
	*** 001ece	50 			push	ax
	*** 001ecf	9a 00 00 00 00 		call	FAR PTR _inp
	*** 001ed4	83 c4 02 		add	sp,2
	*** 001ed7	25 fe 00 		and	ax,254	;00feH
	*** 001eda	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001edd	81 c3 9a 01 		add	bx,410	;019aH
	*** 001ee1	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 001ee4	d1 e6 			shl	si,1
	*** 001ee6	26 03 00 		add	ax,WORD PTR es:[bx][si]
	*** 001ee9	50 			push	ax
	*** 001eea	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 001eed	d1 e3 			shl	bx,1
	*** 001eef	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001ef2	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001ef5	05 1c 00 		add	ax,28	;001cH
	*** 001ef8	50 			push	ax
	*** 001ef9	9a 00 00 00 00 		call	FAR PTR _outp
	*** 001efe	83 c4 04 		add	sp,4
;|***     //needs modified for correct registers on escc
;|***     dsr = (inp(port_list[port]+PVR)>>5+channel[port])&0x01;
; Line 716
	*** 001f01	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 001f04	d1 e3 			shl	bx,1
	*** 001f06	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001f09	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001f0c	05 1c 00 		add	ax,28	;001cH
	*** 001f0f	50 			push	ax
	*** 001f10	9a 00 00 00 00 		call	FAR PTR _inp
	*** 001f15	83 c4 02 		add	sp,2
	*** 001f18	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001f1b	81 c3 9a 01 		add	bx,410	;019aH
	*** 001f1f	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 001f22	d1 e6 			shl	si,1
	*** 001f24	26 8a 08 		mov	cl,BYTE PTR es:[bx][si]
	*** 001f27	80 c1 05 		add	cl,5
	*** 001f2a	d3 f8 			sar	ax,cl
	*** 001f2c	25 01 00 		and	ax,1
	*** 001f2f	89 46 fc 		mov	WORD PTR [bp-4],ax	;dsr
;|***     dtr = (inp(port_list[port]+PVR)>>3+channel[port])&1;
; Line 717
	*** 001f32	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 001f35	d1 e3 			shl	bx,1
	*** 001f37	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001f3a	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001f3d	05 1c 00 		add	ax,28	;001cH
	*** 001f40	50 			push	ax
	*** 001f41	9a 00 00 00 00 		call	FAR PTR _inp
	*** 001f46	83 c4 02 		add	sp,2
	*** 001f49	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001f4c	81 c3 9a 01 		add	bx,410	;019aH
	*** 001f50	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 001f53	d1 e6 			shl	si,1
	*** 001f55	26 8a 08 		mov	cl,BYTE PTR es:[bx][si]
	*** 001f58	80 c1 03 		add	cl,3
	*** 001f5b	d3 f8 			sar	ax,cl
	*** 001f5d	25 01 00 		and	ax,1
	*** 001f60	89 46 f8 		mov	WORD PTR [bp-8],ax	;dtr
;|***     rts = (inp(port_list[port]+MODE)>>2)&1;
; Line 718
	*** 001f63	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 001f66	d1 e3 			shl	bx,1
	*** 001f68	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001f6b	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001f6e	05 02 00 		add	ax,2
	*** 001f71	50 			push	ax
	*** 001f72	9a 00 00 00 00 		call	FAR PTR _inp
	*** 001f77	83 c4 02 		add	sp,2
	*** 001f7a	25 04 00 		and	ax,4
	*** 001f7d	c1 f8 02 		sar	ax,2
	*** 001f80	89 46 f6 		mov	WORD PTR [bp-10],ax	;rts
;|***     dcd = (inp(port_list[port]+VSTR)>>7)&1;
; Line 719
	*** 001f83	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 001f86	d1 e3 			shl	bx,1
	*** 001f88	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001f8b	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 001f8e	05 14 00 		add	ax,20	;0014H
	*** 001f91	50 			push	ax
	*** 001f92	9a 00 00 00 00 		call	FAR PTR _inp
	*** 001f97	83 c4 02 		add	sp,2
	*** 001f9a	25 80 00 		and	ax,128	;0080H
	*** 001f9d	c1 f8 07 		sar	ax,7
	*** 001fa0	89 46 fa 		mov	WORD PTR [bp-6],ax	;dcd
;|***     cts = (inp(port_list[port]+STAR)>>1)&1;
; Line 720
	*** 001fa3	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 001fa6	d1 e3 			shl	bx,1
	*** 001fa8	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 001fab	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 001fae	9a 00 00 00 00 		call	FAR PTR _inp
	*** 001fb3	83 c4 02 		add	sp,2
	*** 001fb6	25 02 00 		and	ax,2
	*** 001fb9	d1 f8 			sar	ax,1
	*** 001fbb	89 46 fe 		mov	WORD PTR [bp-2],ax	;cts
;|***     retval = (dsr<<4)+(dtr<<3)+(dcd<<2)+(cts<<1)+rts;
; Line 721
	*** 001fbe	8b 46 fc 		mov	ax,WORD PTR [bp-4]	;dsr
	*** 001fc1	d1 e0 			shl	ax,1
	*** 001fc3	03 46 f8 		add	ax,WORD PTR [bp-8]	;dtr
	*** 001fc6	d1 e0 			shl	ax,1
	*** 001fc8	03 46 fa 		add	ax,WORD PTR [bp-6]	;dcd
	*** 001fcb	d1 e0 			shl	ax,1
	*** 001fcd	03 46 fe 		add	ax,WORD PTR [bp-2]	;cts
	*** 001fd0	d1 e0 			shl	ax,1
	*** 001fd2	03 46 f6 		add	ax,WORD PTR [bp-10]	;rts
	*** 001fd5	89 46 f4 		mov	WORD PTR [bp-12],ax	;retval
;|***     return retval;  //return  = bit flags  X X X DSR DTR DCD CTS RTS
; Line 722
	*** 001fd8	8b 46 f4 		mov	ax,WORD PTR [bp-12]	;retval
	*** 001fdb	e9 09 00 		jmp	$EX1649
;|***     }
; Line 723
;|***   else return 0;
; Line 724
	*** 001fde	e9 06 00 		jmp	$I1657
					$I1656:
	*** 001fe1	b8 00 00 		mov	ax,0
	*** 001fe4	e9 00 00 		jmp	$EX1649
					$I1657:
;|***   }
; Line 725
					$EX1649:
	*** 001fe7	5e 			pop	si
	*** 001fe8	5f 			pop	di
	*** 001fe9	c9 			leave	
	*** 001fea	ca 06 00 		ret	6

?get_control_lines@Cescc@@RECII@Z	ENDP
	PUBLIC	?get_port_status@Cescc@@RECII@Z	; Cescc::get_port_status
?get_port_status@Cescc@@RECII@Z	PROC FAR	; Cescc::get_port_status
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** unsigned Cescc::get_port_status(unsigned port)
;|***   {
; Line 733
	*** 001fed	c8 02 00 00 		enter	2,0
	*** 001ff1	57 			push	di
	*** 001ff2	56 			push	si
;	st = -2
;	this = 6
;	port = 10
;|***   unsigned st;
;|***   
;|***   if(port_open_list[port]!=0)
; Line 736
	*** 001ff3	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 001ff6	83 c3 04 		add	bx,4
	*** 001ff9	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 001ffc	d1 e6 			shl	si,1
	*** 001ffe	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 002002	75 03 			jne	$JCC8194
	*** 002004	e9 2a 00 		jmp	$I1662
					$JCC8194:
;|***     {
; Line 737
;|***     st = port_status[port];
; Line 738
	*** 002007	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00200a	81 c3 96 01 		add	bx,406	;0196H
	*** 00200e	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 002011	d1 e6 			shl	si,1
	*** 002013	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002016	89 46 fe 		mov	WORD PTR [bp-2],ax	;st
;|***     port_status[port] = 0;
; Line 739
	*** 002019	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 00201c	d1 e6 			shl	si,1
	*** 00201e	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 002021	26 c7 80 96 01 00 00 	mov	WORD PTR es:[bx+406][si],0
;|***     return st;
; Line 740
	*** 002028	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;st
	*** 00202b	e9 09 00 		jmp	$EX1660
;|***     }
; Line 741
;|***   else return 0;
; Line 742
	*** 00202e	e9 06 00 		jmp	$I1663
					$I1662:
	*** 002031	b8 00 00 		mov	ax,0
	*** 002034	e9 00 00 		jmp	$EX1660
					$I1663:
;|***   }
; Line 743
					$EX1660:
	*** 002037	5e 			pop	si
	*** 002038	5f 			pop	di
	*** 002039	c9 			leave	
	*** 00203a	ca 06 00 		ret	6

?get_port_status@Cescc@@RECII@Z	ENDP
	PUBLIC	?clear_rx_buffer@Cescc@@RECII@Z	; Cescc::clear_rx_buffer
?clear_rx_buffer@Cescc@@RECII@Z	PROC FAR	; Cescc::clear_rx_buffer
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** unsigned Cescc::clear_rx_buffer(unsigned port)
;|***   {
; Line 751
	*** 00203d	c8 02 00 00 		enter	2,0
	*** 002041	57 			push	di
	*** 002042	56 			push	si
;	i = -2
;	this = 6
;	port = 10
;|***   //set all rxbuffer[port][..].valid = 0 here                             
;|***   //and reset the receiver on the 82526
;|***   unsigned i;
;|***   outp(port_list[port]+PVR,(inp(port_list[port]+PVR)&0xfe)+channel[port]);  //select channel A or B
; Line 755
	*** 002043	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 002046	d1 e3 			shl	bx,1
	*** 002048	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00204b	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00204e	05 1c 00 		add	ax,28	;001cH
	*** 002051	50 			push	ax
	*** 002052	9a 00 00 00 00 		call	FAR PTR _inp
	*** 002057	83 c4 02 		add	sp,2
	*** 00205a	25 fe 00 		and	ax,254	;00feH
	*** 00205d	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 002060	81 c3 9a 01 		add	bx,410	;019aH
	*** 002064	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 002067	d1 e6 			shl	si,1
	*** 002069	26 03 00 		add	ax,WORD PTR es:[bx][si]
	*** 00206c	50 			push	ax
	*** 00206d	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 002070	d1 e3 			shl	bx,1
	*** 002072	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 002075	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002078	05 1c 00 		add	ax,28	;001cH
	*** 00207b	50 			push	ax
	*** 00207c	9a 00 00 00 00 		call	FAR PTR _outp
	*** 002081	83 c4 04 		add	sp,4
;|***   if(port_open_list[port] != 0)
; Line 756
	*** 002084	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 002087	83 c3 04 		add	bx,4
	*** 00208a	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 00208d	d1 e6 			shl	si,1
	*** 00208f	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 002093	75 03 			jne	$JCC8339
	*** 002095	e9 9c 00 		jmp	$I1668
					$JCC8339:
;|***     {
; Line 757
;|***     if(rxbuffer[port]!=NULL)
; Line 758
	*** 002098	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;port
	*** 00209b	c1 e0 06 		shl	ax,6
	*** 00209e	03 46 06 		add	ax,WORD PTR [bp+6]	;this
	*** 0020a1	8b 56 08 		mov	dx,WORD PTR [bp+8]
	*** 0020a4	05 7a 00 		add	ax,122	;007aH
	*** 0020a7	0b d0 			or	dx,ax
	*** 0020a9	75 03 			jne	$JCC8361
	*** 0020ab	e9 86 00 		jmp	$I1669
					$JCC8361:
;|***       {
; Line 759
;|***       for(i=0;i<max_rxbuf[port];i++) rxbuffer[port][i]->valid = 0;//wipe all received frames
; Line 760
	*** 0020ae	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
	*** 0020b3	e9 03 00 		jmp	$F1670
					$FC1671:
	*** 0020b6	ff 46 fe 		inc	WORD PTR [bp-2]	;i
					$F1670:
	*** 0020b9	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;i
	*** 0020bc	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0020bf	81 c3 82 01 		add	bx,386	;0182H
	*** 0020c3	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 0020c6	d1 e6 			shl	si,1
	*** 0020c8	26 39 00 		cmp	WORD PTR es:[bx][si],ax
	*** 0020cb	77 03 			ja	$JCC8395
	*** 0020cd	e9 1b 00 		jmp	$FB1672
					$JCC8395:
	*** 0020d0	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 0020d3	c1 e6 04 		shl	si,4
	*** 0020d6	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 0020d9	c1 e6 02 		shl	si,2
	*** 0020dc	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0020df	26 c4 58 7a 		les	bx,DWORD PTR es:[bx+122][si]
	*** 0020e3	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
	*** 0020e8	e9 cb ff 		jmp	$FC1671
					$FB1672:
;|***       current_rxbuf[port] = 0;  
; Line 761
	*** 0020eb	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 0020ee	d1 e6 			shl	si,1
	*** 0020f0	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0020f3	26 c7 80 7a 01 00 00 	mov	WORD PTR es:[bx+378][si],0
;|***       port_status[port] = port_status[port]&0xfdff;//reset the rxready condition
; Line 762
	*** 0020fa	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0020fd	81 c3 96 01 		add	bx,406	;0196H
	*** 002101	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 002104	d1 e6 			shl	si,1
	*** 002106	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002109	25 ff fd 		and	ax,-513	;fdffH
	*** 00210c	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 00210f	d1 e6 			shl	si,1
	*** 002111	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 002114	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***       outp(port_list[port]+CMDR,RHR); //reset the HDLC receiver
; Line 763
	*** 002119	6a 40 			push	64	;0040H
	*** 00211b	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 00211e	d1 e3 			shl	bx,1
	*** 002120	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 002123	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 002126	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00212b	83 c4 04 		add	sp,4
;|***       return TRUE;                    //success 
; Line 764
	*** 00212e	b8 00 00 		mov	ax,0
	*** 002131	e9 06 00 		jmp	$EX1666
;|***       }
; Line 765
;|***     }
; Line 766
					$I1669:
;|***     
;|***   return FALSE;         //no rxbuffer pointer so port not open (failed)
; Line 768
					$I1668:
	*** 002134	b8 01 00 		mov	ax,1
	*** 002137	e9 00 00 		jmp	$EX1666
;|***   }
; Line 769
					$EX1666:
	*** 00213a	5e 			pop	si
	*** 00213b	5f 			pop	di
	*** 00213c	c9 			leave	
	*** 00213d	ca 06 00 		ret	6

?clear_rx_buffer@Cescc@@RECII@Z	ENDP
	PUBLIC	?clear_tx_buffer@Cescc@@RECII@Z	; Cescc::clear_tx_buffer
?clear_tx_buffer@Cescc@@RECII@Z	PROC FAR	; Cescc::clear_tx_buffer
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** unsigned Cescc::clear_tx_buffer(unsigned port)
;|***   {          
; Line 776
	*** 002140	c8 02 00 00 		enter	2,0
	*** 002144	57 			push	di
	*** 002145	56 			push	si
;	i = -2
;	this = 6
;	port = 10
;|***   unsigned i;
;|***   //set all txbuffer[port][..].valid = 0 here
;|***   //and reset the transmitter on the 82526
;|***   outp(port_list[port]+PVR,(inp(port_list[port]+PVR)&0xfe)+channel[port]); //select channel A or B
; Line 780
	*** 002146	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 002149	d1 e3 			shl	bx,1
	*** 00214b	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00214e	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002151	05 1c 00 		add	ax,28	;001cH
	*** 002154	50 			push	ax
	*** 002155	9a 00 00 00 00 		call	FAR PTR _inp
	*** 00215a	83 c4 02 		add	sp,2
	*** 00215d	25 fe 00 		and	ax,254	;00feH
	*** 002160	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 002163	81 c3 9a 01 		add	bx,410	;019aH
	*** 002167	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 00216a	d1 e6 			shl	si,1
	*** 00216c	26 03 00 		add	ax,WORD PTR es:[bx][si]
	*** 00216f	50 			push	ax
	*** 002170	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 002173	d1 e3 			shl	bx,1
	*** 002175	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 002178	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00217b	05 1c 00 		add	ax,28	;001cH
	*** 00217e	50 			push	ax
	*** 00217f	9a 00 00 00 00 		call	FAR PTR _outp
	*** 002184	83 c4 04 		add	sp,4
;|***   if(port_open_list[port] != 0)                                             
; Line 781
	*** 002187	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00218a	83 c3 04 		add	bx,4
	*** 00218d	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 002190	d1 e6 			shl	si,1
	*** 002192	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 002196	75 03 			jne	$JCC8598
	*** 002198	e9 8d 00 		jmp	$I1677
					$JCC8598:
;|***     {
; Line 782
;|***     if(txbuffer[port]!=NULL)
; Line 783
	*** 00219b	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;port
	*** 00219e	c1 e0 06 		shl	ax,6
	*** 0021a1	03 46 06 		add	ax,WORD PTR [bp+6]	;this
	*** 0021a4	8b 56 08 		mov	dx,WORD PTR [bp+8]
	*** 0021a7	05 fa 00 		add	ax,250	;00faH
	*** 0021aa	0b d0 			or	dx,ax
	*** 0021ac	75 03 			jne	$JCC8620
	*** 0021ae	e9 77 00 		jmp	$I1678
					$JCC8620:
;|***       {          
; Line 784
;|***       for(i=0;i<max_txbuf[port];i++) txbuffer[port][i]->valid = 0; //wipe all data frames to be sent
; Line 785
	*** 0021b1	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;i
	*** 0021b6	e9 03 00 		jmp	$F1679
					$FC1680:
	*** 0021b9	ff 46 fe 		inc	WORD PTR [bp-2]	;i
					$F1679:
	*** 0021bc	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;i
	*** 0021bf	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0021c2	81 c3 86 01 		add	bx,390	;0186H
	*** 0021c6	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 0021c9	d1 e6 			shl	si,1
	*** 0021cb	26 39 00 		cmp	WORD PTR es:[bx][si],ax
	*** 0021ce	77 03 			ja	$JCC8654
	*** 0021d0	e9 1c 00 		jmp	$FB1681
					$JCC8654:
	*** 0021d3	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 0021d6	c1 e6 04 		shl	si,4
	*** 0021d9	03 76 fe 		add	si,WORD PTR [bp-2]	;i
	*** 0021dc	c1 e6 02 		shl	si,2
	*** 0021df	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0021e2	26 c4 98 fa 00 		les	bx,DWORD PTR es:[bx+250][si]
	*** 0021e7	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
	*** 0021ec	e9 ca ff 		jmp	$FC1680
					$FB1681:
;|***       istxing[port] = 0;  //not sending anymore
; Line 786
	*** 0021ef	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 0021f2	d1 e6 			shl	si,1
	*** 0021f4	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0021f7	26 c7 80 92 01 00 00 	mov	WORD PTR es:[bx+402][si],0
;|***       current_txbuf[port] = 0;
; Line 787
	*** 0021fe	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 002201	d1 e6 			shl	si,1
	*** 002203	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 002206	26 c7 80 7e 01 00 00 	mov	WORD PTR es:[bx+382][si],0
;|***       outp(port_list[port]+CMDR,XRES);//reset the transmitter
; Line 788
	*** 00220d	6a 01 			push	1
	*** 00220f	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 002212	d1 e3 			shl	bx,1
	*** 002214	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 002217	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 00221a	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00221f	83 c4 04 		add	sp,4
;|***       return TRUE;
; Line 789
	*** 002222	b8 00 00 		mov	ax,0
	*** 002225	e9 06 00 		jmp	$EX1675
;|***       }
; Line 790
;|***     }
; Line 791
					$I1678:
;|***   return FALSE; //port not open or buffer not allocated return false (failed)
; Line 792
					$I1677:
	*** 002228	b8 01 00 		mov	ax,1
	*** 00222b	e9 00 00 		jmp	$EX1675
;|***   }
; Line 793
					$EX1675:
	*** 00222e	5e 			pop	si
	*** 00222f	5f 			pop	di
	*** 002230	c9 			leave	
	*** 002231	ca 06 00 		ret	6

?clear_tx_buffer@Cescc@@RECII@Z	ENDP
	PUBLIC	?set_tx_type@Cescc@@RECIII@Z	; Cescc::set_tx_type
?set_tx_type@Cescc@@RECIII@Z	PROC FAR	; Cescc::set_tx_type
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** unsigned Cescc::set_tx_type(unsigned port,unsigned type)
;|***   {
; Line 801
	*** 002234	c8 00 00 00 		enter	0,0
	*** 002238	57 			push	di
	*** 002239	56 			push	si
;	this = 6
;	port = 12
;	type = 10
;|***   //quite specific to hdlc/sdlc
;|***   if(type==AUTO_MODE) tx_type[port]=0x04;
; Line 803
	*** 00223a	83 7e 0a 00 		cmp	WORD PTR [bp+10],0	;type
	*** 00223e	74 03 			je	$JCC8766
	*** 002240	e9 0f 00 		jmp	$I1686
					$JCC8766:
	*** 002243	8b 76 0c 		mov	si,WORD PTR [bp+12]	;port
	*** 002246	d1 e6 			shl	si,1
	*** 002248	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00224b	26 c7 80 8e 01 04 00 	mov	WORD PTR es:[bx+398][si],4
;|***   if(type==TRANSPARENT_MODE) tx_type[port] = 0x08;
; Line 804
					$I1686:
	*** 002252	83 7e 0a 01 		cmp	WORD PTR [bp+10],1	;type
	*** 002256	74 03 			je	$JCC8790
	*** 002258	e9 0f 00 		jmp	$I1687
					$JCC8790:
	*** 00225b	8b 76 0c 		mov	si,WORD PTR [bp+12]	;port
	*** 00225e	d1 e6 			shl	si,1
	*** 002260	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 002263	26 c7 80 8e 01 08 00 	mov	WORD PTR es:[bx+398][si],8
;|***   return TRUE;
; Line 805
					$I1687:
	*** 00226a	b8 00 00 		mov	ax,0
	*** 00226d	e9 00 00 		jmp	$EX1685
;|***   }
; Line 806
					$EX1685:
	*** 002270	5e 			pop	si
	*** 002271	5f 			pop	di
	*** 002272	c9 			leave	
	*** 002273	ca 08 00 		ret	8

?set_tx_type@Cescc@@RECIII@Z	ENDP
	PUBLIC	?set_tx_address@Cescc@@RECIII@Z	; Cescc::set_tx_address
?set_tx_address@Cescc@@RECIII@Z	PROC FAR	; Cescc::set_tx_address
;|***   
;|*** 
;|*** 
;|*** 
;|*** unsigned Cescc::set_tx_address(unsigned port,unsigned address)
;|***   {
; Line 812
	*** 002276	c8 00 00 00 		enter	0,0
	*** 00227a	57 			push	di
	*** 00227b	56 			push	si
;	this = 6
;	port = 12
;	address = 10
;|***   //xad1 is high byte
;|***   //xad2 is low byte
;|***   outp(port_list[port]+PVR,(inp(port_list[port]+PVR)&0xfe)+channel[port]);
; Line 815
	*** 00227c	8b 5e 0c 		mov	bx,WORD PTR [bp+12]	;port
	*** 00227f	d1 e3 			shl	bx,1
	*** 002281	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 002284	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002287	05 1c 00 		add	ax,28	;001cH
	*** 00228a	50 			push	ax
	*** 00228b	9a 00 00 00 00 		call	FAR PTR _inp
	*** 002290	83 c4 02 		add	sp,2
	*** 002293	25 fe 00 		and	ax,254	;00feH
	*** 002296	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 002299	81 c3 9a 01 		add	bx,410	;019aH
	*** 00229d	8b 76 0c 		mov	si,WORD PTR [bp+12]	;port
	*** 0022a0	d1 e6 			shl	si,1
	*** 0022a2	26 03 00 		add	ax,WORD PTR es:[bx][si]
	*** 0022a5	50 			push	ax
	*** 0022a6	8b 5e 0c 		mov	bx,WORD PTR [bp+12]	;port
	*** 0022a9	d1 e3 			shl	bx,1
	*** 0022ab	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0022ae	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0022b1	05 1c 00 		add	ax,28	;001cH
	*** 0022b4	50 			push	ax
	*** 0022b5	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0022ba	83 c4 04 		add	sp,4
;|***   if(port_open_list[port] != 0)
; Line 816
	*** 0022bd	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0022c0	83 c3 04 		add	bx,4
	*** 0022c3	8b 76 0c 		mov	si,WORD PTR [bp+12]	;port
	*** 0022c6	d1 e6 			shl	si,1
	*** 0022c8	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 0022cc	75 03 			jne	$JCC8908
	*** 0022ce	e9 43 00 		jmp	$I1692
					$JCC8908:
;|***     {
; Line 817
;|***     outp(port_list[port]+XAD2,address&0xff);
; Line 818
	*** 0022d1	8a 46 0a 		mov	al,BYTE PTR [bp+10]	;address
	*** 0022d4	2a e4 			sub	ah,ah
	*** 0022d6	50 			push	ax
	*** 0022d7	8b 5e 0c 		mov	bx,WORD PTR [bp+12]	;port
	*** 0022da	d1 e3 			shl	bx,1
	*** 0022dc	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0022df	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0022e2	05 05 00 		add	ax,5
	*** 0022e5	50 			push	ax
	*** 0022e6	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0022eb	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+XAD1,address>>8);
; Line 819
	*** 0022ee	8a 46 0b 		mov	al,BYTE PTR [bp+11]
	*** 0022f1	2a e4 			sub	ah,ah
	*** 0022f3	50 			push	ax
	*** 0022f4	8b 5e 0c 		mov	bx,WORD PTR [bp+12]	;port
	*** 0022f7	d1 e3 			shl	bx,1
	*** 0022f9	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0022fc	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0022ff	05 04 00 		add	ax,4
	*** 002302	50 			push	ax
	*** 002303	9a 00 00 00 00 		call	FAR PTR _outp
	*** 002308	83 c4 04 		add	sp,4
;|***     return TRUE;
; Line 820
	*** 00230b	b8 00 00 		mov	ax,0
	*** 00230e	e9 09 00 		jmp	$EX1691
;|***     }
; Line 821
;|***   else return FALSE;
; Line 822
	*** 002311	e9 06 00 		jmp	$I1693
					$I1692:
	*** 002314	b8 01 00 		mov	ax,1
	*** 002317	e9 00 00 		jmp	$EX1691
					$I1693:
;|***   }
; Line 823
					$EX1691:
	*** 00231a	5e 			pop	si
	*** 00231b	5f 			pop	di
	*** 00231c	c9 			leave	
	*** 00231d	ca 08 00 		ret	8

?set_tx_address@Cescc@@RECIII@Z	ENDP
	PUBLIC	?set_rx_address1@Cescc@@RECIII@Z	; Cescc::set_rx_address1
?set_rx_address1@Cescc@@RECIII@Z	PROC FAR	; Cescc::set_rx_address1
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** unsigned Cescc::set_rx_address1(unsigned port,unsigned address)
;|***   {                                                                         
; Line 831
	*** 002320	c8 00 00 00 		enter	0,0
	*** 002324	57 			push	di
	*** 002325	56 			push	si
;	this = 6
;	port = 12
;	address = 10
;|***   outp(port_list[port]+PVR,(inp(port_list[port]+PVR)&0xfe)+channel[port]);  //select channel A or B
; Line 832
	*** 002326	8b 5e 0c 		mov	bx,WORD PTR [bp+12]	;port
	*** 002329	d1 e3 			shl	bx,1
	*** 00232b	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00232e	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002331	05 1c 00 		add	ax,28	;001cH
	*** 002334	50 			push	ax
	*** 002335	9a 00 00 00 00 		call	FAR PTR _inp
	*** 00233a	83 c4 02 		add	sp,2
	*** 00233d	25 fe 00 		and	ax,254	;00feH
	*** 002340	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 002343	81 c3 9a 01 		add	bx,410	;019aH
	*** 002347	8b 76 0c 		mov	si,WORD PTR [bp+12]	;port
	*** 00234a	d1 e6 			shl	si,1
	*** 00234c	26 03 00 		add	ax,WORD PTR es:[bx][si]
	*** 00234f	50 			push	ax
	*** 002350	8b 5e 0c 		mov	bx,WORD PTR [bp+12]	;port
	*** 002353	d1 e3 			shl	bx,1
	*** 002355	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 002358	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00235b	05 1c 00 		add	ax,28	;001cH
	*** 00235e	50 			push	ax
	*** 00235f	9a 00 00 00 00 		call	FAR PTR _outp
	*** 002364	83 c4 04 		add	sp,4
;|***   if(port_open_list[port] != 0)
; Line 833
	*** 002367	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00236a	83 c3 04 		add	bx,4
	*** 00236d	8b 76 0c 		mov	si,WORD PTR [bp+12]	;port
	*** 002370	d1 e6 			shl	si,1
	*** 002372	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 002376	75 03 			jne	$JCC9078
	*** 002378	e9 43 00 		jmp	$I1698
					$JCC9078:
;|***     {
; Line 834
;|***     outp(port_list[port]+RAL1,address&0xff);
; Line 835
	*** 00237b	8a 46 0a 		mov	al,BYTE PTR [bp+10]	;address
	*** 00237e	2a e4 			sub	ah,ah
	*** 002380	50 			push	ax
	*** 002381	8b 5e 0c 		mov	bx,WORD PTR [bp+12]	;port
	*** 002384	d1 e3 			shl	bx,1
	*** 002386	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 002389	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00238c	05 08 00 		add	ax,8
	*** 00238f	50 			push	ax
	*** 002390	9a 00 00 00 00 		call	FAR PTR _outp
	*** 002395	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+RAH1,address>>8);
; Line 836
	*** 002398	8a 46 0b 		mov	al,BYTE PTR [bp+11]
	*** 00239b	2a e4 			sub	ah,ah
	*** 00239d	50 			push	ax
	*** 00239e	8b 5e 0c 		mov	bx,WORD PTR [bp+12]	;port
	*** 0023a1	d1 e3 			shl	bx,1
	*** 0023a3	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0023a6	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0023a9	05 06 00 		add	ax,6
	*** 0023ac	50 			push	ax
	*** 0023ad	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0023b2	83 c4 04 		add	sp,4
;|***     return TRUE;
; Line 837
	*** 0023b5	b8 00 00 		mov	ax,0
	*** 0023b8	e9 09 00 		jmp	$EX1697
;|***     }
; Line 838
;|***   else return FALSE;
; Line 839
	*** 0023bb	e9 06 00 		jmp	$I1699
					$I1698:
	*** 0023be	b8 01 00 		mov	ax,1
	*** 0023c1	e9 00 00 		jmp	$EX1697
					$I1699:
;|***   }
; Line 840
					$EX1697:
	*** 0023c4	5e 			pop	si
	*** 0023c5	5f 			pop	di
	*** 0023c6	c9 			leave	
	*** 0023c7	ca 08 00 		ret	8

?set_rx_address1@Cescc@@RECIII@Z	ENDP
	PUBLIC	?set_rx_address2@Cescc@@RECIII@Z	; Cescc::set_rx_address2
?set_rx_address2@Cescc@@RECIII@Z	PROC FAR	; Cescc::set_rx_address2
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** unsigned Cescc::set_rx_address2(unsigned port,unsigned address)
;|***   {                                                                         
; Line 848
	*** 0023ca	c8 00 00 00 		enter	0,0
	*** 0023ce	57 			push	di
	*** 0023cf	56 			push	si
;	this = 6
;	port = 12
;	address = 10
;|***   outp(port_list[port]+PVR,(inp(port_list[port]+PVR)&0xfe)+channel[port]);
; Line 849
	*** 0023d0	8b 5e 0c 		mov	bx,WORD PTR [bp+12]	;port
	*** 0023d3	d1 e3 			shl	bx,1
	*** 0023d5	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0023d8	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0023db	05 1c 00 		add	ax,28	;001cH
	*** 0023de	50 			push	ax
	*** 0023df	9a 00 00 00 00 		call	FAR PTR _inp
	*** 0023e4	83 c4 02 		add	sp,2
	*** 0023e7	25 fe 00 		and	ax,254	;00feH
	*** 0023ea	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0023ed	81 c3 9a 01 		add	bx,410	;019aH
	*** 0023f1	8b 76 0c 		mov	si,WORD PTR [bp+12]	;port
	*** 0023f4	d1 e6 			shl	si,1
	*** 0023f6	26 03 00 		add	ax,WORD PTR es:[bx][si]
	*** 0023f9	50 			push	ax
	*** 0023fa	8b 5e 0c 		mov	bx,WORD PTR [bp+12]	;port
	*** 0023fd	d1 e3 			shl	bx,1
	*** 0023ff	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 002402	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002405	05 1c 00 		add	ax,28	;001cH
	*** 002408	50 			push	ax
	*** 002409	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00240e	83 c4 04 		add	sp,4
;|***   if(port_open_list[port] != 0)
; Line 850
	*** 002411	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 002414	83 c3 04 		add	bx,4
	*** 002417	8b 76 0c 		mov	si,WORD PTR [bp+12]	;port
	*** 00241a	d1 e6 			shl	si,1
	*** 00241c	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 002420	75 03 			jne	$JCC9248
	*** 002422	e9 43 00 		jmp	$I1704
					$JCC9248:
;|***     {
; Line 851
;|***     outp(port_list[port]+RAL2,address&0xff);
; Line 852
	*** 002425	8a 46 0a 		mov	al,BYTE PTR [bp+10]	;address
	*** 002428	2a e4 			sub	ah,ah
	*** 00242a	50 			push	ax
	*** 00242b	8b 5e 0c 		mov	bx,WORD PTR [bp+12]	;port
	*** 00242e	d1 e3 			shl	bx,1
	*** 002430	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 002433	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002436	05 09 00 		add	ax,9
	*** 002439	50 			push	ax
	*** 00243a	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00243f	83 c4 04 		add	sp,4
;|***     outp(port_list[port]+RAH2,address>>8);
; Line 853
	*** 002442	8a 46 0b 		mov	al,BYTE PTR [bp+11]
	*** 002445	2a e4 			sub	ah,ah
	*** 002447	50 			push	ax
	*** 002448	8b 5e 0c 		mov	bx,WORD PTR [bp+12]	;port
	*** 00244b	d1 e3 			shl	bx,1
	*** 00244d	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 002450	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002453	05 07 00 		add	ax,7
	*** 002456	50 			push	ax
	*** 002457	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00245c	83 c4 04 		add	sp,4
;|***     return TRUE;
; Line 854
	*** 00245f	b8 00 00 		mov	ax,0
	*** 002462	e9 09 00 		jmp	$EX1703
;|***     }
; Line 855
;|***   else return FALSE;
; Line 856
	*** 002465	e9 06 00 		jmp	$I1705
					$I1704:
	*** 002468	b8 01 00 		mov	ax,1
	*** 00246b	e9 00 00 		jmp	$EX1703
					$I1705:
;|***   }
; Line 857
					$EX1703:
	*** 00246e	5e 			pop	si
	*** 00246f	5f 			pop	di
	*** 002470	c9 			leave	
	*** 002471	ca 08 00 		ret	8

?set_rx_address2@Cescc@@RECIII@Z	ENDP
	PUBLIC	?start_timer@Cescc@@RECII@Z	; Cescc::start_timer
?start_timer@Cescc@@RECII@Z	PROC FAR	; Cescc::start_timer
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** unsigned Cescc::start_timer(unsigned port)
;|***   {                                                                         
; Line 865
	*** 002474	c8 00 00 00 		enter	0,0
	*** 002478	57 			push	di
	*** 002479	56 			push	si
;	this = 6
;	port = 10
;|***   outp(port_list[port]+PVR,(inp(port_list[port]+PVR)&0xfe)+channel[port]);
; Line 866
	*** 00247a	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 00247d	d1 e3 			shl	bx,1
	*** 00247f	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 002482	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002485	05 1c 00 		add	ax,28	;001cH
	*** 002488	50 			push	ax
	*** 002489	9a 00 00 00 00 		call	FAR PTR _inp
	*** 00248e	83 c4 02 		add	sp,2
	*** 002491	25 fe 00 		and	ax,254	;00feH
	*** 002494	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 002497	81 c3 9a 01 		add	bx,410	;019aH
	*** 00249b	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 00249e	d1 e6 			shl	si,1
	*** 0024a0	26 03 00 		add	ax,WORD PTR es:[bx][si]
	*** 0024a3	50 			push	ax
	*** 0024a4	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 0024a7	d1 e3 			shl	bx,1
	*** 0024a9	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0024ac	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0024af	05 1c 00 		add	ax,28	;001cH
	*** 0024b2	50 			push	ax
	*** 0024b3	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0024b8	83 c4 04 		add	sp,4
;|***   if(port_open_list[port] != 0)
; Line 867
	*** 0024bb	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0024be	83 c3 04 		add	bx,4
	*** 0024c1	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 0024c4	d1 e6 			shl	si,1
	*** 0024c6	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 0024ca	75 03 			jne	$JCC9418
	*** 0024cc	e9 2d 00 		jmp	$I1709
					$JCC9418:
;|***     {
; Line 868
;|***     timer_status[port] = 0;
; Line 869
	*** 0024cf	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 0024d2	d1 e6 			shl	si,1
	*** 0024d4	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0024d7	26 c7 80 8a 01 00 00 	mov	WORD PTR es:[bx+394][si],0
;|***     outp(port_list[port]+CMDR,STI);//send start timer command
; Line 870
	*** 0024de	6a 10 			push	16	;0010H
	*** 0024e0	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 0024e3	d1 e3 			shl	bx,1
	*** 0024e5	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 0024e8	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 0024eb	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0024f0	83 c4 04 		add	sp,4
;|***     return TRUE;
; Line 871
	*** 0024f3	b8 00 00 		mov	ax,0
	*** 0024f6	e9 09 00 		jmp	$EX1708
;|***     }
; Line 872
;|***   else return FALSE;
; Line 873
	*** 0024f9	e9 06 00 		jmp	$I1710
					$I1709:
	*** 0024fc	b8 01 00 		mov	ax,1
	*** 0024ff	e9 00 00 		jmp	$EX1708
					$I1710:
;|***   }                 
; Line 874
					$EX1708:
	*** 002502	5e 			pop	si
	*** 002503	5f 			pop	di
	*** 002504	c9 			leave	
	*** 002505	ca 06 00 		ret	6

?start_timer@Cescc@@RECII@Z	ENDP
	PUBLIC	?stop_timer@Cescc@@RECII@Z	; Cescc::stop_timer
?stop_timer@Cescc@@RECII@Z	PROC FAR	; Cescc::stop_timer
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** unsigned Cescc::stop_timer(unsigned port)                                 
;|***   {
; Line 882
	*** 002508	c8 00 00 00 		enter	0,0
	*** 00250c	57 			push	di
	*** 00250d	56 			push	si
;	this = 6
;	port = 10
;|***   outp(port_list[port]+PVR,(inp(port_list[port]+PVR)&0xfe)+channel[port]);
; Line 883
	*** 00250e	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 002511	d1 e3 			shl	bx,1
	*** 002513	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 002516	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002519	05 1c 00 		add	ax,28	;001cH
	*** 00251c	50 			push	ax
	*** 00251d	9a 00 00 00 00 		call	FAR PTR _inp
	*** 002522	83 c4 02 		add	sp,2
	*** 002525	25 fe 00 		and	ax,254	;00feH
	*** 002528	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 00252b	81 c3 9a 01 		add	bx,410	;019aH
	*** 00252f	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 002532	d1 e6 			shl	si,1
	*** 002534	26 03 00 		add	ax,WORD PTR es:[bx][si]
	*** 002537	50 			push	ax
	*** 002538	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 00253b	d1 e3 			shl	bx,1
	*** 00253d	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 002540	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002543	05 1c 00 		add	ax,28	;001cH
	*** 002546	50 			push	ax
	*** 002547	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00254c	83 c4 04 		add	sp,4
;|***   if(port_open_list[port] != 0)
; Line 884
	*** 00254f	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 002552	83 c3 04 		add	bx,4
	*** 002555	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 002558	d1 e6 			shl	si,1
	*** 00255a	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 00255e	75 03 			jne	$JCC9566
	*** 002560	e9 38 00 		jmp	$I1714
					$JCC9566:
;|***     {
; Line 885
;|***     outp(port_list[port]+TIMR,inp(port_list[port]+TIMR));//writing the timr register stops the timer
; Line 886
	*** 002563	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 002566	d1 e3 			shl	bx,1
	*** 002568	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00256b	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00256e	05 03 00 		add	ax,3
	*** 002571	50 			push	ax
	*** 002572	9a 00 00 00 00 		call	FAR PTR _inp
	*** 002577	83 c4 02 		add	sp,2
	*** 00257a	50 			push	ax
	*** 00257b	8b 5e 0a 		mov	bx,WORD PTR [bp+10]	;port
	*** 00257e	d1 e3 			shl	bx,1
	*** 002580	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 002583	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002586	05 03 00 		add	ax,3
	*** 002589	50 			push	ax
	*** 00258a	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00258f	83 c4 04 		add	sp,4
;|***     return TRUE;
; Line 887
	*** 002592	b8 00 00 		mov	ax,0
	*** 002595	e9 09 00 		jmp	$EX1713
;|***     }
; Line 888
;|***   else return FALSE;
; Line 889
	*** 002598	e9 06 00 		jmp	$I1715
					$I1714:
	*** 00259b	b8 01 00 		mov	ax,1
	*** 00259e	e9 00 00 		jmp	$EX1713
					$I1715:
;|***   }                 
; Line 890
					$EX1713:
	*** 0025a1	5e 			pop	si
	*** 0025a2	5f 			pop	di
	*** 0025a3	c9 			leave	
	*** 0025a4	ca 06 00 		ret	6

?stop_timer@Cescc@@RECII@Z	ENDP
	PUBLIC	?is_timer_expired@Cescc@@RECII@Z	; Cescc::is_timer_expired
?is_timer_expired@Cescc@@RECII@Z	PROC FAR	; Cescc::is_timer_expired
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** unsigned Cescc::is_timer_expired(unsigned port)
;|***   {
; Line 898
	*** 0025a7	c8 00 00 00 		enter	0,0
	*** 0025ab	57 			push	di
	*** 0025ac	56 			push	si
;	this = 6
;	port = 10
;|***   if(port_open_list[port] != 0)
; Line 899
	*** 0025ad	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0025b0	83 c3 04 		add	bx,4
	*** 0025b3	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 0025b6	d1 e6 			shl	si,1
	*** 0025b8	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 0025bc	75 03 			jne	$JCC9660
	*** 0025be	e9 52 00 		jmp	$I1719
					$JCC9660:
;|***     {
; Line 900
;|***     if(timer_status[port]==1)
; Line 901
	*** 0025c1	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0025c4	81 c3 8a 01 		add	bx,394	;018aH
	*** 0025c8	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 0025cb	d1 e6 			shl	si,1
	*** 0025cd	26 83 38 01 		cmp	WORD PTR es:[bx][si],1
	*** 0025d1	74 03 			je	$JCC9681
	*** 0025d3	e9 37 00 		jmp	$I1720
					$JCC9681:
;|***       {
; Line 902
;|***       timer_status[port] =0;
; Line 903
	*** 0025d6	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 0025d9	d1 e6 			shl	si,1
	*** 0025db	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0025de	26 c7 80 8a 01 00 00 	mov	WORD PTR es:[bx+394][si],0
;|***       port_status[port] = port_status[port]&(~TIMER_INTERRUPT);
; Line 904
	*** 0025e5	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0025e8	81 c3 96 01 		add	bx,406	;0196H
	*** 0025ec	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 0025ef	d1 e6 			shl	si,1
	*** 0025f1	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0025f4	25 ff fe 		and	ax,-257	;feffH
	*** 0025f7	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 0025fa	d1 e6 			shl	si,1
	*** 0025fc	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0025ff	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***       return TRUE;
; Line 905
	*** 002604	b8 00 00 		mov	ax,0
	*** 002607	e9 0f 00 		jmp	$EX1718
;|***       }
; Line 906
;|***     else return FALSE;
; Line 907
	*** 00260a	e9 06 00 		jmp	$I1721
					$I1720:
	*** 00260d	b8 01 00 		mov	ax,1
	*** 002610	e9 06 00 		jmp	$EX1718
					$I1721:
;|***     }
; Line 908
;|***   return FALSE;
; Line 909
					$I1719:
	*** 002613	b8 01 00 		mov	ax,1
	*** 002616	e9 00 00 		jmp	$EX1718
;|***   }
; Line 910
					$EX1718:
	*** 002619	5e 			pop	si
	*** 00261a	5f 			pop	di
	*** 00261b	c9 			leave	
	*** 00261c	ca 06 00 		ret	6

?is_timer_expired@Cescc@@RECII@Z	ENDP
	PUBLIC	?wait_for_timer_expired@Cescc@@RECII@Z	; Cescc::wait_for_timer_expired
?wait_for_timer_expired@Cescc@@RECII@Z	PROC FAR	; Cescc::wait_for_timer_expired
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** unsigned Cescc::wait_for_timer_expired(unsigned port)
;|***   {
; Line 919
	*** 00261f	c8 04 00 00 		enter	4,0
	*** 002623	57 			push	di
	*** 002624	56 			push	si
;	timer_timeout = -4
;	this = 6
;	port = 10
;|***   unsigned long timer_timeout;
;|***   timer_timeout = 0;
; Line 921
	*** 002625	2b c0 			sub	ax,ax
	*** 002627	89 46 fe 		mov	WORD PTR [bp-2],ax
	*** 00262a	89 46 fc 		mov	WORD PTR [bp-4],ax	;timer_timeout
;|***   
;|***   if(port_open_list[port]!=0)
; Line 923
	*** 00262d	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 002630	83 c3 04 		add	bx,4
	*** 002633	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 002636	d1 e6 			shl	si,1
	*** 002638	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 00263c	75 03 			jne	$JCC9788
	*** 00263e	e9 75 00 		jmp	$I1726
					$JCC9788:
;|***     {
; Line 924
;|***     while(timer_status[port]==0)
; Line 925
					$FC1728:
	*** 002641	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 002644	81 c3 8a 01 		add	bx,394	;018aH
	*** 002648	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 00264b	d1 e6 			shl	si,1
	*** 00264d	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 002651	74 03 			je	$JCC9809
	*** 002653	e9 29 00 		jmp	$FB1729
					$JCC9809:
;|***       {
; Line 926
;|***       timer_timeout++;
; Line 927
	*** 002656	83 46 fc 01 		add	WORD PTR [bp-4],1	;timer_timeout
	*** 00265a	83 56 fe 00 		adc	WORD PTR [bp-2],0
;|***       if(timer_timeout>1000000)
; Line 928
	*** 00265e	83 7e fe 0f 		cmp	WORD PTR [bp-2],15	;000fH
	*** 002662	73 03 			jae	$JCC9826
	*** 002664	e9 15 00 		jmp	$I1730
					$JCC9826:
	*** 002667	76 03 			jbe	$JCC9831
	*** 002669	e9 0a 00 		jmp	$L2039
					$JCC9831:
	*** 00266c	81 7e fc 40 42 		cmp	WORD PTR [bp-4],16960	;4240H	;timer_timeout
	*** 002671	77 03 			ja	$JCC9841
	*** 002673	e9 06 00 		jmp	$I1730
					$JCC9841:
					$L2039:
;|***         {
; Line 929
;|***         return FALSE;
; Line 930
	*** 002676	b8 01 00 		mov	ax,1
	*** 002679	e9 40 00 		jmp	$EX1724
;|***         }
; Line 931
;|***       }
; Line 932
					$I1730:
	*** 00267c	e9 c2 ff 		jmp	$FC1728
					$FB1729:
;|***     timer_status[port] = 0;
; Line 933
	*** 00267f	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 002682	d1 e6 			shl	si,1
	*** 002684	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 002687	26 c7 80 8a 01 00 00 	mov	WORD PTR es:[bx+394][si],0
;|***     port_status[port] = port_status[port]&(~TIMER_INTERRUPT);
; Line 934
	*** 00268e	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 002691	81 c3 96 01 		add	bx,406	;0196H
	*** 002695	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 002698	d1 e6 			shl	si,1
	*** 00269a	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00269d	25 ff fe 		and	ax,-257	;feffH
	*** 0026a0	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 0026a3	d1 e6 			shl	si,1
	*** 0026a5	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 0026a8	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***     return TRUE;
; Line 935
	*** 0026ad	b8 00 00 		mov	ax,0
	*** 0026b0	e9 09 00 		jmp	$EX1724
;|***     }
; Line 936
;|***     
;|***   else return FALSE;
; Line 938
	*** 0026b3	e9 06 00 		jmp	$I1731
					$I1726:
	*** 0026b6	b8 01 00 		mov	ax,1
	*** 0026b9	e9 00 00 		jmp	$EX1724
					$I1731:
;|***   }
; Line 939
					$EX1724:
	*** 0026bc	5e 			pop	si
	*** 0026bd	5f 			pop	di
	*** 0026be	c9 			leave	
	*** 0026bf	ca 06 00 		ret	6

?wait_for_timer_expired@Cescc@@RECII@Z	ENDP
	PUBLIC	?escc_isr@Cescc@@JEAXXZ	; Cescc::escc_isr
?escc_isr@Cescc@@JEAXXZ	PROC FAR	; Cescc::escc_isr
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** void interrupt far Cescc::escc_isr(void)
;|***   {
; Line 947
	*** 0026c2	60 			pusha
	*** 0026c3	1e 			push	ds
	*** 0026c4	06 			push	es
	*** 0026c5	8b ec 			mov	bp,sp
	*** 0026c7	81 ec 24 00 		sub	sp,36	;0024H
	*** 0026cb	1e 			push	ds
	*** 0026cc	b8 00 00 		mov	ax,DGROUP
	*** 0026cf	8e d8 			mov	ds,ax
	ASSUME DS: DGROUP
	*** 0026d1	fc 			cld	
;	isr0 = -2
;	isr1 = -4
;	pis = -6
;	i = -8
;	chanstor = -10
;	j = -12
;	k = -14
;	inthit = -16
;	lsb = -18
;	msb = -20
;	bloc = -24
;	ok_to_tx = -26
;	irxbuf = -30
;	itxbuf = -34
;	this = 0
;|***   unsigned isr0;
;|***   unsigned isr1;
;|***   unsigned pis;
;|***   unsigned i; 
;|***   unsigned chanstor;
;|***   unsigned j,k;
;|***   unsigned inthit;
;|***   unsigned lsb = 0;
; Line 955
	*** 0026d2	c7 46 ee 00 00 		mov	WORD PTR [bp-18],0	;lsb
;|***   unsigned msb = 0;
; Line 956
	*** 0026d7	c7 46 ec 00 00 		mov	WORD PTR [bp-20],0	;msb
;|***   unsigned far *bloc;
;|***   unsigned ok_to_tx = 0;
; Line 958
	*** 0026dc	c7 46 e6 00 00 		mov	WORD PTR [bp-26],0	;ok_to_tx
;|*** 
;|***   extern unsigned long frame;
;|***   extern LN200 ln200;
;|***   extern TIMER ln200_time;
;|***   extern TIMER sys_timer; 
;|***   extern unsigned long ln200_rx_num;
;|*** 
;|***   struct buf far *irxbuf;
;|***   struct buf far *itxbuf;
;|***   
;|***   //_disable();
;|***   //_enable();      //12/8/03 rem out
;|***   
;|***   isr0 = 0;
; Line 972
	*** 0026e1	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;isr0
;|***   isr1 = 0;
; Line 973
	*** 0026e6	c7 46 fc 00 00 		mov	WORD PTR [bp-4],0	;isr1
;|***   pis = 0;
; Line 974
	*** 0026eb	c7 46 fa 00 00 		mov	WORD PTR [bp-6],0	;pis
;|***   j = 0;
; Line 975
	*** 0026f0	c7 46 f4 00 00 		mov	WORD PTR [bp-12],0	;j
;|***   
;|*** 
;|***   startisr:
; Line 978
					$startisr1754:
;|***   
;|***   inthit = 0; // clear any lingering garbage
; Line 980
	*** 0026f5	c7 46 f0 00 00 		mov	WORD PTR [bp-16],0	;inthit
;|***   
;|***   for(i=0;i<t1->next_port;i++) // for all opened ports
; Line 982
	*** 0026fa	c7 46 f8 00 00 		mov	WORD PTR [bp-8],0	;i
	*** 0026ff	e9 03 00 		jmp	$F1755
					$FC1756:
	*** 002702	ff 46 f8 		inc	WORD PTR [bp-8]	;i
					$F1755:
	*** 002705	8b 46 f8 		mov	ax,WORD PTR [bp-8]	;i
	*** 002708	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00270c	26 39 47 74 		cmp	WORD PTR es:[bx+116],ax
	*** 002710	77 03 			ja	$JCC10000
	*** 002712	e9 68 1f 		jmp	$FB1757
					$JCC10000:
;|***     {
; Line 983
;|***     // store the active channel (A or B) to be restored when ISR terminates
;|***     chanstor = inp(t1->port_list[i]+PVR)&0x1;
; Line 985
	*** 002715	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 002718	d1 e3 			shl	bx,1
	*** 00271a	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00271e	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002721	05 1c 00 		add	ax,28	;001cH
	*** 002724	50 			push	ax
	*** 002725	9a 00 00 00 00 		call	FAR PTR _inp
	*** 00272a	83 c4 02 		add	sp,2
	*** 00272d	25 01 00 		and	ax,1
	*** 002730	89 46 f6 		mov	WORD PTR [bp-10],ax	;chanstor
;|***   
;|***     // set the active channel to A or B as selected by the for-loop index                                    
;|***     outp(t1->port_list[i]+PVR,(inp(t1->port_list[i]+PVR)&0xfe)+t1->channel[i]); //set channel A or B
; Line 988
	*** 002733	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 002736	d1 e3 			shl	bx,1
	*** 002738	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00273c	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00273f	05 1c 00 		add	ax,28	;001cH
	*** 002742	50 			push	ax
	*** 002743	9a 00 00 00 00 		call	FAR PTR _inp
	*** 002748	83 c4 02 		add	sp,2
	*** 00274b	25 fe 00 		and	ax,254	;00feH
	*** 00274e	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002751	d1 e6 			shl	si,1
	*** 002753	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002757	26 03 80 9a 01 		add	ax,WORD PTR es:[bx+410][si]
	*** 00275c	50 			push	ax
	*** 00275d	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 002760	d1 e3 			shl	bx,1
	*** 002762	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002766	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002769	05 1c 00 		add	ax,28	;001cH
	*** 00276c	50 			push	ax
	*** 00276d	9a 00 00 00 00 		call	FAR PTR _outp
	*** 002772	83 c4 04 		add	sp,4
;|*** 
;|***     // shut this channel down if it was never properly initialized
;|***     if(t1->port_open_list[i]==0)
; Line 991
	*** 002775	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002778	d1 e6 			shl	si,1
	*** 00277a	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00277e	26 83 78 04 00 		cmp	WORD PTR es:[bx+4][si],0
	*** 002783	74 03 			je	$JCC10115
	*** 002785	e9 4e 00 		jmp	$I1758
					$JCC10115:
;|***       {
; Line 992
;|***       if(t1->port_list[i]!=0) // the channel was never assigned a base address
; Line 993
	*** 002788	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 00278b	d1 e3 			shl	bx,1
	*** 00278d	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002791	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 002795	75 03 			jne	$JCC10133
	*** 002797	e9 3c 00 		jmp	$I1759
					$JCC10133:
;|***         {
; Line 994
;|***         outp(t1->port_list[i]+IMR0,0xff);  // so shut off all its interrupts
; Line 995
	*** 00279a	68 ff 00 		push	255	;00ffH
	*** 00279d	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 0027a0	d1 e3 			shl	bx,1
	*** 0027a2	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0027a6	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0027a9	05 1a 00 		add	ax,26	;001aH
	*** 0027ac	50 			push	ax
	*** 0027ad	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0027b2	83 c4 04 		add	sp,4
;|***         outp(t1->port_list[i]+IMR1,0xff);
; Line 996
	*** 0027b5	68 ff 00 		push	255	;00ffH
	*** 0027b8	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 0027bb	d1 e3 			shl	bx,1
	*** 0027bd	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0027c1	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0027c4	05 1b 00 		add	ax,27	;001bH
	*** 0027c7	50 			push	ax
	*** 0027c8	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0027cd	83 c4 04 		add	sp,4
;|***         goto nextpt; //skip to end of the big for() loop
; Line 997
	*** 0027d0	e9 e3 1e 		jmp	$TH161761
	*** 0027d3	e9 6d 1e 		jmp	$nextpt1760
;|***         }
; Line 998
;|***       }
; Line 999
					$I1759:
;|***   
;|***     // read this channel's interrupt status registers and store locally  
;|***     isr0 = inp(t1->port_list[i]+ISR0);
; Line 1002
					$I1758:
	*** 0027d6	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 0027d9	d1 e3 			shl	bx,1
	*** 0027db	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0027df	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0027e2	05 1a 00 		add	ax,26	;001aH
	*** 0027e5	50 			push	ax
	*** 0027e6	9a 00 00 00 00 		call	FAR PTR _inp
	*** 0027eb	83 c4 02 		add	sp,2
	*** 0027ee	89 46 fe 		mov	WORD PTR [bp-2],ax	;isr0
;|***     isr1 = inp(t1->port_list[i]+ISR1);
; Line 1003
	*** 0027f1	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 0027f4	d1 e3 			shl	bx,1
	*** 0027f6	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0027fa	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0027fd	05 1b 00 		add	ax,27	;001bH
	*** 002800	50 			push	ax
	*** 002801	9a 00 00 00 00 		call	FAR PTR _inp
	*** 002806	83 c4 02 		add	sp,2
	*** 002809	89 46 fc 		mov	WORD PTR [bp-4],ax	;isr1
;|***     pis = inp(t1->port_list[i]+PIS); // universal port interrupts
; Line 1004
	*** 00280c	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 00280f	d1 e3 			shl	bx,1
	*** 002811	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002815	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002818	05 1d 00 		add	ax,29	;001dH
	*** 00281b	50 			push	ax
	*** 00281c	9a 00 00 00 00 		call	FAR PTR _inp
	*** 002821	83 c4 02 		add	sp,2
	*** 002824	89 46 fa 		mov	WORD PTR [bp-6],ax	;pis
;|***     
;|***     // skip to next channel if no interrupts set for this channel
;|***     if((isr0+isr1+pis)==0) goto nextpt;
; Line 1007
	*** 002827	8b 46 fa 		mov	ax,WORD PTR [bp-6]	;pis
	*** 00282a	03 46 fc 		add	ax,WORD PTR [bp-4]	;isr1
	*** 00282d	03 46 fe 		add	ax,WORD PTR [bp-2]	;isr0
	*** 002830	3d 00 00 		cmp	ax,0
	*** 002833	74 03 			je	$JCC10291
	*** 002835	e9 06 00 		jmp	$I1762
					$JCC10291:
	*** 002838	e9 78 1e 		jmp	$TH161763
	*** 00283b	e9 05 1e 		jmp	$nextpt1760
;|***   
;|***     // or else service this channel's interrupts
;|***     inthit = 1;
; Line 1010
					$I1762:
	*** 00283e	c7 46 f0 01 00 		mov	WORD PTR [bp-16],1	;inthit
;|*** 
;|***     // check each interrupt event and service them as needed
;|***     // ISR0 first
;|***     if((isr0&RME)==RME)  //  RME Receive Message End
; Line 1014
	*** 002843	8a 46 fe 		mov	al,BYTE PTR [bp-2]	;isr0
	*** 002846	24 80 			and	al,128	;0080H
	*** 002848	3c 80 			cmp	al,128	;0080H
	*** 00284a	74 03 			je	$JCC10314
	*** 00284c	e9 d3 09 		jmp	$I1764
					$JCC10314:
;|***       {
; Line 1015
;|***       if(t1->eopmode[i]==OPMODE_HDLC)
; Line 1016
	*** 00284f	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002852	d1 e6 			shl	si,1
	*** 002854	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002858	26 83 b8 9e 01 00 	cmp	WORD PTR es:[bx+414][si],0
	*** 00285e	74 03 			je	$JCC10334
	*** 002860	e9 f7 03 		jmp	$I1765
					$JCC10334:
;|***         {
; Line 1017
;|***         if(t1->port_dmar_list[i]==0)  // if not using DMA
; Line 1018
	*** 002863	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002866	d1 e6 			shl	si,1
	*** 002868	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00286c	26 83 78 10 00 		cmp	WORD PTR es:[bx+16][si],0
	*** 002871	74 03 			je	$JCC10353
	*** 002873	e9 12 02 		jmp	$I1766
					$JCC10353:
;|***           {
; Line 1019
;|***           
;|***           // get "k", the total number of bytes received in this message
;|***           
;|***           // then fill the rbuf frame (char frame[]) with the rest of the
;|***           // chars still remaining in the rx fifo
;|***           
;|***           // remember that the rx fifo is only 32 chars deep
;|***           
;|***           // the low 4 bits of RBCH and 8 bits of RBCL indicate the total length in chars
;|***           // of the received message (0 to 4095)
;|***           
;|***           // additionally, the low 4 bits of RBCL indicate the number of chars currently
;|***           // in the rx fifo
;|***           
;|***           // read total number of chars received in this message
;|***           k = (unsigned)((inp(t1->port_list[i]+RBCH)&0x0f) <<8) +
;|***               (unsigned) (inp(t1->port_list[i]+RBCL)&0xff);
; Line 1036
	*** 002876	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 002879	d1 e3 			shl	bx,1
	*** 00287b	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00287f	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002882	05 0b 00 		add	ax,11	;000bH
	*** 002885	50 			push	ax
	*** 002886	9a 00 00 00 00 		call	FAR PTR _inp
	*** 00288b	83 c4 02 		add	sp,2
	*** 00288e	24 0f 			and	al,15	;000fH
	*** 002890	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 002893	d1 e3 			shl	bx,1
	*** 002895	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002899	26 8b 08 		mov	cx,WORD PTR es:[bx][si]
	*** 00289c	83 c1 0a 		add	cx,10	;000aH
	*** 00289f	51 			push	cx
	*** 0028a0	89 46 dc 		mov	WORD PTR [bp-36],ax
	*** 0028a3	9a 00 00 00 00 		call	FAR PTR _inp
	*** 0028a8	83 c4 02 		add	sp,2
	*** 0028ab	8a c0 			mov	al,al
	*** 0028ad	8a 66 dc 		mov	ah,BYTE PTR [bp-36]
	*** 0028b0	89 46 f2 		mov	WORD PTR [bp-14],ax	;k
;|***           
;|***           // get the right buffer to use
;|***           irxbuf = (t1->rxbuffer[i][t1->current_rxbuf[i]]);     
; Line 1039
	*** 0028b3	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0028b6	d1 e6 			shl	si,1
	*** 0028b8	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0028bc	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 0028bf	c1 e7 04 		shl	di,4
	*** 0028c2	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 0028c7	c1 e7 02 		shl	di,2
	*** 0028ca	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0028ce	26 8b 41 7a 		mov	ax,WORD PTR es:[bx+122][di]
	*** 0028d2	26 8b 51 7c 		mov	dx,WORD PTR es:[bx+124][di]
	*** 0028d6	89 46 e2 		mov	WORD PTR [bp-30],ax	;irxbuf
	*** 0028d9	89 56 e4 		mov	WORD PTR [bp-28],dx
;|***           
;|***           //the reads are done as byte access so that odd frame lengths will be received correctly
;|***           //the fifo can not be accessed both as word and byte in same pool, meaning 
;|***           //if you start doing 16 bit xfrs you must do all 16 bit xfrs...
;|***           //note it might be quicker to just do an extra 16 bit xfr as opposed to doing it byte wise
;|***           //but that only stands a chance of working for rx, txing you must do byte transfers
;|***           //as the number of writes to the fifo determines what gets sent out.
;|***           
;|***           // read the final message chars from the rx fifo and add them to the buffer
;|***           for(j=irxbuf->no_bytes;j<k;j++) // j = num bytes received before this fifo dump
; Line 1049
	*** 0028dc	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 0028df	26 8b 47 02 		mov	ax,WORD PTR es:[bx+2]
	*** 0028e3	89 46 f4 		mov	WORD PTR [bp-12],ax	;j
	*** 0028e6	e9 03 00 		jmp	$F1769
					$FC1770:
	*** 0028e9	ff 46 f4 		inc	WORD PTR [bp-12]	;j
					$F1769:
	*** 0028ec	8b 46 f4 		mov	ax,WORD PTR [bp-12]	;j
	*** 0028ef	39 46 f2 		cmp	WORD PTR [bp-14],ax	;k
	*** 0028f2	77 03 			ja	$JCC10482
	*** 0028f4	e9 25 00 		jmp	$FB1771
					$JCC10482:
;|***             {
; Line 1050
;|***             irxbuf->frame[j] = inp(t1->port_list[i]+FIFO);
; Line 1051
	*** 0028f7	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 0028fa	d1 e3 			shl	bx,1
	*** 0028fc	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002900	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002903	05 20 00 		add	ax,32	;0020H
	*** 002906	50 			push	ax
	*** 002907	9a 00 00 00 00 		call	FAR PTR _inp
	*** 00290c	83 c4 02 		add	sp,2
	*** 00290f	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 002912	8b 76 f4 		mov	si,WORD PTR [bp-12]	;j
	*** 002915	26 88 40 06 		mov	BYTE PTR es:[bx+6][si],al
;|***             }
; Line 1052
	*** 002919	e9 cd ff 		jmp	$FC1770
					$FB1771:
;|***             
;|***           outp(t1->port_list[i]+CMDR,RMC);// release fifo
; Line 1054
	*** 00291c	68 80 00 		push	128	;0080H
	*** 00291f	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 002922	d1 e3 			shl	bx,1
	*** 002924	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002928	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 00292b	9a 00 00 00 00 		call	FAR PTR _outp
	*** 002930	83 c4 04 		add	sp,4
;|***           irxbuf->valid = 1;              // validate the rbuf we just used
; Line 1055
	*** 002933	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 002936	26 c7 07 01 00 		mov	WORD PTR es:[bx],1
;|***           irxbuf->no_bytes = k;           // update the total number of bytes received
; Line 1056
	*** 00293b	8b 46 f2 		mov	ax,WORD PTR [bp-14]	;k
	*** 00293e	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 002941	26 89 47 02 		mov	WORD PTR es:[bx+2],ax
;|***           
;|***           // new code specific to receiving ln200 messages in the autonomous model
;|***           // added 3/25/2004 jtm
;|***           if(k==33)
; Line 1060
	*** 002945	83 7e f2 21 		cmp	WORD PTR [bp-14],33	;0021H	;k
	*** 002949	74 03 			je	$JCC10569
	*** 00294b	e9 48 00 		jmp	$I1772
					$JCC10569:
;|***             {
; Line 1061
;|***             ln200_rx_num++;
; Line 1062
	*** 00294e	83 06 00 00 01 		add	WORD PTR ?ln200_rx_num@@3KE,1	;ln200_rx_num
	*** 002953	83 16 02 00 00 		adc	WORD PTR ?ln200_rx_num@@3KE+2,0	;ln200_rx_num
;|***             //_fmemcpy(ln200.data, irxbuf->frame, k);  // copy message to app buffer
;|***             _fmemcpy(ln200_buffer, irxbuf->frame, k);  // copy message to app buffer
; Line 1064
	*** 002958	ff 76 f2 		push	WORD PTR [bp-14]	;k
	*** 00295b	8b 46 e2 		mov	ax,WORD PTR [bp-30]	;irxbuf
	*** 00295e	8b 56 e4 		mov	dx,WORD PTR [bp-28]
	*** 002961	05 06 00 		add	ax,6
	*** 002964	52 			push	dx
	*** 002965	50 			push	ax
	*** 002966	68 00 00 		push	SEG ?ln200_buffer@@3QIEI	;ln200_buffer
	*** 002969	68 00 00 		push	OFFSET ?ln200_buffer@@3QIEI	;ln200_buffer
	*** 00296c	9a 00 00 00 00 		call	FAR PTR __fmemcpy
	*** 002971	83 c4 0a 		add	sp,10	;000aH
;|***             ln200_new_data = 1;                      // flag new data available
; Line 1065
	*** 002974	c7 06 00 00 01 00 	mov	WORD PTR ?ln200_new_data@@3IE,1	;ln200_new_data
;|***             ln200_data_frame = frame;                     // record frame number
; Line 1066
	*** 00297a	a1 00 00 		mov	ax,WORD PTR ?frame@@3KE	;frame
	*** 00297d	8b 16 02 00 		mov	dx,WORD PTR ?frame@@3KE+2	;frame
	*** 002981	a3 00 00 		mov	WORD PTR ?ln200_data_frame@@3KE,ax	;ln200_data_frame
	*** 002984	89 16 02 00 		mov	WORD PTR ?ln200_data_frame@@3KE+2,dx	;ln200_data_frame
;|***             time_stamp(&ln200_time);
; Line 1067
	*** 002988	68 00 00 		push	SEG ?ln200_time@@3UTIMER@@E	;ln200_time
	*** 00298b	68 00 00 		push	OFFSET ?ln200_time@@3UTIMER@@E	;ln200_time
	*** 00298e	9a 00 00 00 00 		call	FAR PTR ?time_stamp@@ZAXPEUTIMER@@@Z	; time_stamp
	*** 002993	83 c4 04 		add	sp,4
;|***             }
; Line 1068
;|***           irxbuf->valid = 0;                       // release the escc buffer to be used again  
; Line 1069
					$I1772:
	*** 002996	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 002999	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
;|***           irxbuf->no_bytes = 0;
; Line 1070
	*** 00299e	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 0029a1	26 c7 47 02 00 00 	mov	WORD PTR es:[bx+2],0
;|***           // end autonomous-specific code
;|*** 
;|***                                  
;|***           // select the next buffer for the next reception
;|***           t1->current_rxbuf[i]++;
; Line 1075
	*** 0029a7	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0029aa	d1 e6 			shl	si,1
	*** 0029ac	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0029b0	26 8b 80 7a 01 		mov	ax,WORD PTR es:[bx+378][si]
	*** 0029b5	40 			inc	ax
	*** 0029b6	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0029b9	d1 e6 			shl	si,1
	*** 0029bb	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0029bf	26 89 80 7a 01 		mov	WORD PTR es:[bx+378][si],ax
;|***           // rollover to the first buffer if we've reached the end of available buffers
;|***           if(t1->current_rxbuf[i]==t1->max_rxbuf[i]) 
; Line 1077
	*** 0029c4	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0029c7	d1 e6 			shl	si,1
	*** 0029c9	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0029cd	26 8b 80 82 01 		mov	ax,WORD PTR es:[bx+386][si]
	*** 0029d2	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0029d5	d1 e6 			shl	si,1
	*** 0029d7	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0029db	26 39 80 7a 01 		cmp	WORD PTR es:[bx+378][si],ax
	*** 0029e0	74 03 			je	$JCC10720
	*** 0029e2	e9 10 00 		jmp	$I1773
					$JCC10720:
;|***             {
; Line 1078
;|***             t1->current_rxbuf[i]=0;
; Line 1079
	*** 0029e5	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0029e8	d1 e6 			shl	si,1
	*** 0029ea	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0029ee	26 c7 80 7a 01 00 00 	mov	WORD PTR es:[bx+378][si],0
;|***             }
; Line 1080
;|***           
;|***           // make sure the next selected buffer is not in use (an error condition)
;|***           if(t1->rxbuffer[i][t1->current_rxbuf[i]]->valid ==1) 
; Line 1083
					$I1773:
	*** 0029f5	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0029f8	d1 e6 			shl	si,1
	*** 0029fa	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0029fe	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 002a01	c1 e7 04 		shl	di,4
	*** 002a04	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 002a09	c1 e7 02 		shl	di,2
	*** 002a0c	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002a10	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 002a14	26 83 3f 01 		cmp	WORD PTR es:[bx],1
	*** 002a18	74 03 			je	$JCC10776
	*** 002a1a	e9 1f 00 		jmp	$I1774
					$JCC10776:
;|***             {
; Line 1084
;|***             // An error occured and the main program isn't done with 
;|***             // the frame that is about to be used for received data.
;|***             // Set the receive buffers overflowed bit of the status word for this port here.
;|***             t1->port_status[i] = t1->port_status[i] | RX_BUFFER_OVERFLOW;
; Line 1088
	*** 002a1d	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002a20	d1 e6 			shl	si,1
	*** 002a22	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002a26	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 002a2b	0d 40 00 		or	ax,64	;0040H
	*** 002a2e	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002a31	d1 e6 			shl	si,1
	*** 002a33	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002a37	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***             }
; Line 1089
;|***             
;|***           // prep the next selected buffer for use  
;|***           t1->rxbuffer[i][t1->current_rxbuf[i]]->no_bytes = 0;
; Line 1092
					$I1774:
	*** 002a3c	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002a3f	d1 e6 			shl	si,1
	*** 002a41	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002a45	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 002a48	c1 e7 04 		shl	di,4
	*** 002a4b	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 002a50	c1 e7 02 		shl	di,2
	*** 002a53	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002a57	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 002a5b	26 c7 47 02 00 00 	mov	WORD PTR es:[bx+2],0
;|***           t1->rxbuffer[i][t1->current_rxbuf[i]]->valid = 0;
; Line 1093
	*** 002a61	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002a64	d1 e6 			shl	si,1
	*** 002a66	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002a6a	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 002a6d	c1 e7 04 		shl	di,4
	*** 002a70	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 002a75	c1 e7 02 		shl	di,2
	*** 002a78	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002a7c	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 002a80	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
;|***           
;|***           // flag this port as holding a received message
;|***           //t1->port_status[i] = t1->port_status[i] | RX_READY; // jtm 3/31/2004
;|***           }  
; Line 1097
;|***         else
; Line 1098
	*** 002a85	e9 d2 01 		jmp	$I1775
					$I1766:
;|***           {
; Line 1099
;|***           //this is the DMA code for RME interrupt
;|***           //if we are here then the DMA reception has gone to completion
;|***           //(we have a complete frame)
;|***           //get the number of bytes received (total)
;|***           k = ((inp(t1->port_list[i]+RBCH)&0x0f)<<8)+inp(t1->port_list[i]+RBCL);
; Line 1104
	*** 002a88	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 002a8b	d1 e3 			shl	bx,1
	*** 002a8d	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002a91	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002a94	05 0b 00 		add	ax,11	;000bH
	*** 002a97	50 			push	ax
	*** 002a98	9a 00 00 00 00 		call	FAR PTR _inp
	*** 002a9d	83 c4 02 		add	sp,2
	*** 002aa0	8a e0 			mov	ah,al
	*** 002aa2	25 00 0f 		and	ax,3840	;0f00H
	*** 002aa5	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 002aa8	d1 e3 			shl	bx,1
	*** 002aaa	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002aae	26 8b 08 		mov	cx,WORD PTR es:[bx][si]
	*** 002ab1	83 c1 0a 		add	cx,10	;000aH
	*** 002ab4	51 			push	cx
	*** 002ab5	89 46 dc 		mov	WORD PTR [bp-36],ax
	*** 002ab8	9a 00 00 00 00 		call	FAR PTR _inp
	*** 002abd	83 c4 02 		add	sp,2
	*** 002ac0	03 46 dc 		add	ax,WORD PTR [bp-36]
	*** 002ac3	89 46 f2 		mov	WORD PTR [bp-14],ax	;k
;|***     
;|***           t1->rxbuffer[i][t1->current_rxbuf[i]]->valid = 1;         //validate the frame buffer
; Line 1106
	*** 002ac6	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002ac9	d1 e6 			shl	si,1
	*** 002acb	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002acf	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 002ad2	c1 e7 04 		shl	di,4
	*** 002ad5	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 002ada	c1 e7 02 		shl	di,2
	*** 002add	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002ae1	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 002ae5	26 c7 07 01 00 		mov	WORD PTR es:[bx],1
;|***           t1->rxbuffer[i][t1->current_rxbuf[i]]->no_bytes = k;      //indicate the number of bytes received
; Line 1107
	*** 002aea	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002aed	d1 e6 			shl	si,1
	*** 002aef	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002af3	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 002af6	c1 e7 04 		shl	di,4
	*** 002af9	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 002afe	c1 e7 02 		shl	di,2
	*** 002b01	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002b05	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 002b09	8b 46 f2 		mov	ax,WORD PTR [bp-14]	;k
	*** 002b0c	26 89 47 02 		mov	WORD PTR es:[bx+2],ax
;|***           t1->current_rxbuf[i]++;
; Line 1108
	*** 002b10	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002b13	d1 e6 			shl	si,1
	*** 002b15	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002b19	26 8b 80 7a 01 		mov	ax,WORD PTR es:[bx+378][si]
	*** 002b1e	40 			inc	ax
	*** 002b1f	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002b22	d1 e6 			shl	si,1
	*** 002b24	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002b28	26 89 80 7a 01 		mov	WORD PTR es:[bx+378][si],ax
;|***           if(t1->current_rxbuf[i]==t1->max_rxbuf[i]) t1->current_rxbuf[i] = 0;
; Line 1109
	*** 002b2d	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002b30	d1 e6 			shl	si,1
	*** 002b32	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002b36	26 8b 80 82 01 		mov	ax,WORD PTR es:[bx+386][si]
	*** 002b3b	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002b3e	d1 e6 			shl	si,1
	*** 002b40	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002b44	26 39 80 7a 01 		cmp	WORD PTR es:[bx+378][si],ax
	*** 002b49	74 03 			je	$JCC11081
	*** 002b4b	e9 10 00 		jmp	$I1776
					$JCC11081:
	*** 002b4e	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002b51	d1 e6 			shl	si,1
	*** 002b53	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002b57	26 c7 80 7a 01 00 00 	mov	WORD PTR es:[bx+378][si],0
;|***           if(t1->rxbuffer[i][t1->current_rxbuf[i]]->valid ==1) 
; Line 1110
					$I1776:
	*** 002b5e	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002b61	d1 e6 			shl	si,1
	*** 002b63	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002b67	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 002b6a	c1 e7 04 		shl	di,4
	*** 002b6d	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 002b72	c1 e7 02 		shl	di,2
	*** 002b75	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002b79	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 002b7d	26 83 3f 01 		cmp	WORD PTR es:[bx],1
	*** 002b81	74 03 			je	$JCC11137
	*** 002b83	e9 1f 00 		jmp	$I1777
					$JCC11137:
;|***             {
; Line 1111
;|***             //   an error occured and the 
;|***             //   main program isn't done with 
;|***             //   the frame that is about
;|***             //   to be used for received data
;|***             t1->port_status[i] = t1->port_status[i] | RX_BUFFER_OVERFLOW;
; Line 1116
	*** 002b86	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002b89	d1 e6 			shl	si,1
	*** 002b8b	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002b8f	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 002b94	0d 40 00 		or	ax,64	;0040H
	*** 002b97	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002b9a	d1 e6 			shl	si,1
	*** 002b9c	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002ba0	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***             }
; Line 1117
;|***           t1->rxbuffer[i][t1->current_rxbuf[i]]->no_bytes = 0;  //prep buf for use
; Line 1118
					$I1777:
	*** 002ba5	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002ba8	d1 e6 			shl	si,1
	*** 002baa	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002bae	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 002bb1	c1 e7 04 		shl	di,4
	*** 002bb4	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 002bb9	c1 e7 02 		shl	di,2
	*** 002bbc	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002bc0	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 002bc4	26 c7 47 02 00 00 	mov	WORD PTR es:[bx+2],0
;|***           t1->rxbuffer[i][t1->current_rxbuf[i]]->valid = 0;    //invalidate it for use
; Line 1119
	*** 002bca	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002bcd	d1 e6 			shl	si,1
	*** 002bcf	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002bd3	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 002bd6	c1 e7 04 		shl	di,4
	*** 002bd9	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 002bde	c1 e7 02 		shl	di,2
	*** 002be1	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002be5	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 002be9	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
;|***           setupdmar(i,t1->rxbuffer[i][t1->current_rxbuf[i]]->frame); //sets address of rbuf.frame[] to dma channel and enables it
; Line 1120
	*** 002bee	ff 76 f8 		push	WORD PTR [bp-8]	;i
	*** 002bf1	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002bf4	d1 e6 			shl	si,1
	*** 002bf6	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002bfa	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 002bfd	c1 e7 04 		shl	di,4
	*** 002c00	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 002c05	c1 e7 02 		shl	di,2
	*** 002c08	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002c0c	26 8b 41 7a 		mov	ax,WORD PTR es:[bx+122][di]
	*** 002c10	26 8b 51 7c 		mov	dx,WORD PTR es:[bx+124][di]
	*** 002c14	05 06 00 		add	ax,6
	*** 002c17	52 			push	dx
	*** 002c18	50 			push	ax
	*** 002c19	ff 76 02 		push	WORD PTR [bp+2]
	*** 002c1c	ff 76 00 		push	WORD PTR [bp]	;this
	*** 002c1f	9a 00 00 00 00 		call	FAR PTR ?setupdmar@Cescc@@JECXIPEX@Z	; Cescc::setupdmar
;|***           outp(t1->port_list[i]+CMDR,RMC);     //release the FIFO
; Line 1121
	*** 002c24	68 80 00 		push	128	;0080H
	*** 002c27	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 002c2a	d1 e3 			shl	bx,1
	*** 002c2c	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002c30	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 002c33	9a 00 00 00 00 		call	FAR PTR _outp
	*** 002c38	83 c4 04 		add	sp,4
;|***           t1->port_status[i] = t1->port_status[i] | RX_READY;
; Line 1122
	*** 002c3b	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002c3e	d1 e6 			shl	si,1
	*** 002c40	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002c44	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 002c49	0d 00 02 		or	ax,512	;0200H
	*** 002c4c	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002c4f	d1 e6 			shl	si,1
	*** 002c51	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002c55	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***           }
; Line 1123
					$I1775:
;|***         }
; Line 1124
;|***     
;|***       if(t1->eopmode[i]==OPMODE_ASYNC)
; Line 1126
					$I1765:
	*** 002c5a	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002c5d	d1 e6 			shl	si,1
	*** 002c5f	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002c63	26 83 b8 9e 01 01 	cmp	WORD PTR es:[bx+414][si],1
	*** 002c69	74 03 			je	$JCC11369
	*** 002c6b	e9 87 03 		jmp	$I1778
					$JCC11369:
;|***         {
; Line 1127
;|***         //TCD interrupt
;|***         //do check for dma..in which case we don't need to get any data here...just need to figure out
;|***         //how many bytes are in the buffer        
;|***         if(t1->port_dmar_list[i]==0)  // no DMA
; Line 1131
	*** 002c6e	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002c71	d1 e6 			shl	si,1
	*** 002c73	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002c77	26 83 78 10 00 		cmp	WORD PTR es:[bx+16][si],0
	*** 002c7c	74 03 			je	$JCC11388
	*** 002c7e	e9 c6 01 		jmp	$I1779
					$JCC11388:
;|***           {
; Line 1132
;|***           k = inp(t1->port_list[i]+RBCL);//get num bytes in fifo
; Line 1133
	*** 002c81	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 002c84	d1 e3 			shl	bx,1
	*** 002c86	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002c8a	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002c8d	05 0a 00 		add	ax,10	;000aH
	*** 002c90	50 			push	ax
	*** 002c91	9a 00 00 00 00 		call	FAR PTR _inp
	*** 002c96	83 c4 02 		add	sp,2
	*** 002c99	89 46 f2 		mov	WORD PTR [bp-14],ax	;k
;|***           k = k&0x1f;
; Line 1134
	*** 002c9c	83 66 f2 1f 		and	WORD PTR [bp-14],31	;001fH	;k
;|***           if(k==0) k=32;
; Line 1135
	*** 002ca0	83 7e f2 00 		cmp	WORD PTR [bp-14],0	;k
	*** 002ca4	74 03 			je	$JCC11428
	*** 002ca6	e9 05 00 		jmp	$I1780
					$JCC11428:
	*** 002ca9	c7 46 f2 20 00 		mov	WORD PTR [bp-14],32	;0020H	;k
;|***         
;|***           //assumes that k is allways a multiple of 2 (status byte included mode)
;|***           irxbuf = (t1->rxbuffer[i][t1->current_rxbuf[i]]);     
; Line 1138
					$I1780:
	*** 002cae	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002cb1	d1 e6 			shl	si,1
	*** 002cb3	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002cb7	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 002cba	c1 e7 04 		shl	di,4
	*** 002cbd	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 002cc2	c1 e7 02 		shl	di,2
	*** 002cc5	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002cc9	26 8b 41 7a 		mov	ax,WORD PTR es:[bx+122][di]
	*** 002ccd	26 8b 51 7c 		mov	dx,WORD PTR es:[bx+124][di]
	*** 002cd1	89 46 e2 		mov	WORD PTR [bp-30],ax	;irxbuf
	*** 002cd4	89 56 e4 		mov	WORD PTR [bp-28],dx
;|***           //bloc = (unsigned far *)irxbuf->frame;
;|***           for(j=irxbuf->no_bytes;j<irxbuf->no_bytes+k;j++)  irxbuf->frame[j] = inp(t1->port_list[i]+FIFO);  //******inpw?
; Line 1140
	*** 002cd7	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 002cda	26 8b 47 02 		mov	ax,WORD PTR es:[bx+2]
	*** 002cde	89 46 f4 		mov	WORD PTR [bp-12],ax	;j
	*** 002ce1	e9 03 00 		jmp	$F1781
					$FC1782:
	*** 002ce4	ff 46 f4 		inc	WORD PTR [bp-12]	;j
					$F1781:
	*** 002ce7	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 002cea	26 8b 47 02 		mov	ax,WORD PTR es:[bx+2]
	*** 002cee	03 46 f2 		add	ax,WORD PTR [bp-14]	;k
	*** 002cf1	3b 46 f4 		cmp	ax,WORD PTR [bp-12]	;j
	*** 002cf4	77 03 			ja	$JCC11508
	*** 002cf6	e9 25 00 		jmp	$FB1783
					$JCC11508:
	*** 002cf9	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 002cfc	d1 e3 			shl	bx,1
	*** 002cfe	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002d02	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002d05	05 20 00 		add	ax,32	;0020H
	*** 002d08	50 			push	ax
	*** 002d09	9a 00 00 00 00 		call	FAR PTR _inp
	*** 002d0e	83 c4 02 		add	sp,2
	*** 002d11	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 002d14	8b 76 f4 		mov	si,WORD PTR [bp-12]	;j
	*** 002d17	26 88 40 06 		mov	BYTE PTR es:[bx+6][si],al
	*** 002d1b	e9 c6 ff 		jmp	$FC1782
					$FB1783:
;|***         
;|***           outp(t1->port_list[i]+CMDR,RMC);     //release fifo
; Line 1142
	*** 002d1e	68 80 00 		push	128	;0080H
	*** 002d21	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 002d24	d1 e3 			shl	bx,1
	*** 002d26	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002d2a	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 002d2d	9a 00 00 00 00 		call	FAR PTR _outp
	*** 002d32	83 c4 04 		add	sp,4
;|***           //could move this stuff elsewhere (such that the buffers get more than 32 bytes in em)
;|***           irxbuf->valid = 1;//validate rbuf
; Line 1144
	*** 002d35	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 002d38	26 c7 07 01 00 		mov	WORD PTR es:[bx],1
;|***           irxbuf->no_bytes = irxbuf->no_bytes + k; //number of bytes received in rbuf
; Line 1145
	*** 002d3d	8b 46 f2 		mov	ax,WORD PTR [bp-14]	;k
	*** 002d40	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 002d43	26 01 47 02 		add	WORD PTR es:[bx+2],ax
;|***           t1->current_rxbuf[i]++;  
; Line 1146
	*** 002d47	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002d4a	d1 e6 			shl	si,1
	*** 002d4c	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002d50	26 8b 80 7a 01 		mov	ax,WORD PTR es:[bx+378][si]
	*** 002d55	40 			inc	ax
	*** 002d56	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002d59	d1 e6 			shl	si,1
	*** 002d5b	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002d5f	26 89 80 7a 01 		mov	WORD PTR es:[bx+378][si],ax
;|***           //irxbuf is no longer valid
;|***           if(t1->current_rxbuf[i]==t1->max_rxbuf[i]) t1->current_rxbuf[i]=0;                
; Line 1148
	*** 002d64	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002d67	d1 e6 			shl	si,1
	*** 002d69	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002d6d	26 8b 80 82 01 		mov	ax,WORD PTR es:[bx+386][si]
	*** 002d72	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002d75	d1 e6 			shl	si,1
	*** 002d77	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002d7b	26 39 80 7a 01 		cmp	WORD PTR es:[bx+378][si],ax
	*** 002d80	74 03 			je	$JCC11648
	*** 002d82	e9 10 00 		jmp	$I1784
					$JCC11648:
	*** 002d85	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002d88	d1 e6 			shl	si,1
	*** 002d8a	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002d8e	26 c7 80 7a 01 00 00 	mov	WORD PTR es:[bx+378][si],0
;|***           if(t1->rxbuffer[i][t1->current_rxbuf[i]]->valid ==1) 
; Line 1149
					$I1784:
	*** 002d95	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002d98	d1 e6 			shl	si,1
	*** 002d9a	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002d9e	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 002da1	c1 e7 04 		shl	di,4
	*** 002da4	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 002da9	c1 e7 02 		shl	di,2
	*** 002dac	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002db0	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 002db4	26 83 3f 01 		cmp	WORD PTR es:[bx],1
	*** 002db8	74 03 			je	$JCC11704
	*** 002dba	e9 1f 00 		jmp	$I1785
					$JCC11704:
;|***             {
; Line 1150
;|***             // an error occured and the 
;|***             //   main program isn't done with 
;|***             //   the frame that is about
;|***             //   to be used for received data
;|***             // set the receive buffers overflowed bit of the status word for this port here
;|***             t1->port_status[i] = t1->port_status[i] | RX_BUFFER_OVERFLOW;
; Line 1156
	*** 002dbd	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002dc0	d1 e6 			shl	si,1
	*** 002dc2	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002dc6	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 002dcb	0d 40 00 		or	ax,64	;0040H
	*** 002dce	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002dd1	d1 e6 			shl	si,1
	*** 002dd3	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002dd7	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***             }
; Line 1157
;|***           t1->rxbuffer[i][t1->current_rxbuf[i]]->no_bytes = 0;  //prep buf for use
; Line 1158
					$I1785:
	*** 002ddc	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002ddf	d1 e6 			shl	si,1
	*** 002de1	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002de5	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 002de8	c1 e7 04 		shl	di,4
	*** 002deb	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 002df0	c1 e7 02 		shl	di,2
	*** 002df3	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002df7	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 002dfb	26 c7 47 02 00 00 	mov	WORD PTR es:[bx+2],0
;|***           t1->rxbuffer[i][t1->current_rxbuf[i]]->valid = 0;    //invalidate it for use
; Line 1159
	*** 002e01	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002e04	d1 e6 			shl	si,1
	*** 002e06	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002e0a	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 002e0d	c1 e7 04 		shl	di,4
	*** 002e10	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 002e15	c1 e7 02 		shl	di,2
	*** 002e18	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002e1c	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 002e20	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
;|***           t1->port_status[i] = t1->port_status[i] | RX_READY;
; Line 1160
	*** 002e25	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002e28	d1 e6 			shl	si,1
	*** 002e2a	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002e2e	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 002e33	0d 00 02 		or	ax,512	;0200H
	*** 002e36	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002e39	d1 e6 			shl	si,1
	*** 002e3b	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002e3f	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***           }                                                 
; Line 1161
;|***         else  // use DMA
; Line 1162
	*** 002e44	e9 ae 01 		jmp	$I1786
					$I1779:
;|***           {
; Line 1163
;|***           //get dmar count here and make buffer valid
;|***           k = getdmarcount(i);
; Line 1165
	*** 002e47	ff 76 f8 		push	WORD PTR [bp-8]	;i
	*** 002e4a	ff 76 02 		push	WORD PTR [bp+2]
	*** 002e4d	ff 76 00 		push	WORD PTR [bp]	;this
	*** 002e50	9a 00 00 00 00 		call	FAR PTR ?getdmarcount@Cescc@@JECII@Z	; Cescc::getdmarcount
	*** 002e55	89 46 f2 		mov	WORD PTR [bp-14],ax	;k
;|***           //assumes that the number of bytes transfered(dma) = number of bytes received
;|***           //this isn't allways the case...
;|***     
;|***           //assumes that k is allways a multiple of 2 (status byte included mode)
;|***           irxbuf = (t1->rxbuffer[i][t1->current_rxbuf[i]]);     
; Line 1170
	*** 002e58	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002e5b	d1 e6 			shl	si,1
	*** 002e5d	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002e61	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 002e64	c1 e7 04 		shl	di,4
	*** 002e67	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 002e6c	c1 e7 02 		shl	di,2
	*** 002e6f	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002e73	26 8b 41 7a 		mov	ax,WORD PTR es:[bx+122][di]
	*** 002e77	26 8b 51 7c 		mov	dx,WORD PTR es:[bx+124][di]
	*** 002e7b	89 46 e2 		mov	WORD PTR [bp-30],ax	;irxbuf
	*** 002e7e	89 56 e4 		mov	WORD PTR [bp-28],dx
;|***           irxbuf->valid = 1;//validate rbuf
; Line 1171
	*** 002e81	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 002e84	26 c7 07 01 00 		mov	WORD PTR es:[bx],1
;|***           irxbuf->no_bytes = k; //number of bytes received in rbuf
; Line 1172
	*** 002e89	8b 46 f2 		mov	ax,WORD PTR [bp-14]	;k
	*** 002e8c	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 002e8f	26 89 47 02 		mov	WORD PTR es:[bx+2],ax
;|***           t1->current_rxbuf[i]++;  
; Line 1173
	*** 002e93	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002e96	d1 e6 			shl	si,1
	*** 002e98	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002e9c	26 8b 80 7a 01 		mov	ax,WORD PTR es:[bx+378][si]
	*** 002ea1	40 			inc	ax
	*** 002ea2	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002ea5	d1 e6 			shl	si,1
	*** 002ea7	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002eab	26 89 80 7a 01 		mov	WORD PTR es:[bx+378][si],ax
;|***           //irxbuf is no longer valid
;|***           if(t1->current_rxbuf[i]==t1->max_rxbuf[i]) t1->current_rxbuf[i]=0;                
; Line 1175
	*** 002eb0	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002eb3	d1 e6 			shl	si,1
	*** 002eb5	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002eb9	26 8b 80 82 01 		mov	ax,WORD PTR es:[bx+386][si]
	*** 002ebe	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002ec1	d1 e6 			shl	si,1
	*** 002ec3	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002ec7	26 39 80 7a 01 		cmp	WORD PTR es:[bx+378][si],ax
	*** 002ecc	74 03 			je	$JCC11980
	*** 002ece	e9 10 00 		jmp	$I1787
					$JCC11980:
	*** 002ed1	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002ed4	d1 e6 			shl	si,1
	*** 002ed6	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002eda	26 c7 80 7a 01 00 00 	mov	WORD PTR es:[bx+378][si],0
;|***           if(t1->rxbuffer[i][t1->current_rxbuf[i]]->valid ==1) 
; Line 1176
					$I1787:
	*** 002ee1	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002ee4	d1 e6 			shl	si,1
	*** 002ee6	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002eea	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 002eed	c1 e7 04 		shl	di,4
	*** 002ef0	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 002ef5	c1 e7 02 		shl	di,2
	*** 002ef8	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002efc	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 002f00	26 83 3f 01 		cmp	WORD PTR es:[bx],1
	*** 002f04	74 03 			je	$JCC12036
	*** 002f06	e9 1f 00 		jmp	$I1788
					$JCC12036:
;|***             {
; Line 1177
;|***             // an error occured and the 
;|***             //   main program isn't done with 
;|***             //   the frame that is about
;|***             //   to be used for received data
;|***             //set the receive buffers overflowed bit of the status word for this port here
;|***             t1->port_status[i] = t1->port_status[i] | RX_BUFFER_OVERFLOW;
; Line 1183
	*** 002f09	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002f0c	d1 e6 			shl	si,1
	*** 002f0e	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002f12	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 002f17	0d 40 00 		or	ax,64	;0040H
	*** 002f1a	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002f1d	d1 e6 			shl	si,1
	*** 002f1f	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002f23	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***             }
; Line 1184
;|***           t1->rxbuffer[i][t1->current_rxbuf[i]]->no_bytes = 0;  //prep buf for use
; Line 1185
					$I1788:
	*** 002f28	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002f2b	d1 e6 			shl	si,1
	*** 002f2d	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002f31	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 002f34	c1 e7 04 		shl	di,4
	*** 002f37	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 002f3c	c1 e7 02 		shl	di,2
	*** 002f3f	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002f43	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 002f47	26 c7 47 02 00 00 	mov	WORD PTR es:[bx+2],0
;|***           t1->rxbuffer[i][t1->current_rxbuf[i]]->valid = 0;    //invalidate it for use
; Line 1186
	*** 002f4d	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002f50	d1 e6 			shl	si,1
	*** 002f52	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002f56	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 002f59	c1 e7 04 		shl	di,4
	*** 002f5c	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 002f61	c1 e7 02 		shl	di,2
	*** 002f64	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002f68	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 002f6c	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
;|***           t1->port_status[i] = t1->port_status[i] | RX_READY;
; Line 1187
	*** 002f71	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002f74	d1 e6 			shl	si,1
	*** 002f76	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002f7a	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 002f7f	0d 00 02 		or	ax,512	;0200H
	*** 002f82	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002f85	d1 e6 			shl	si,1
	*** 002f87	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002f8b	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***           setupdmar(i,t1->rxbuffer[i][t1->current_rxbuf[i]]->frame);
; Line 1188
	*** 002f90	ff 76 f8 		push	WORD PTR [bp-8]	;i
	*** 002f93	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002f96	d1 e6 			shl	si,1
	*** 002f98	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002f9c	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 002f9f	c1 e7 04 		shl	di,4
	*** 002fa2	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 002fa7	c1 e7 02 		shl	di,2
	*** 002faa	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002fae	26 8b 41 7a 		mov	ax,WORD PTR es:[bx+122][di]
	*** 002fb2	26 8b 51 7c 		mov	dx,WORD PTR es:[bx+124][di]
	*** 002fb6	05 06 00 		add	ax,6
	*** 002fb9	52 			push	dx
	*** 002fba	50 			push	ax
	*** 002fbb	ff 76 02 		push	WORD PTR [bp+2]
	*** 002fbe	ff 76 00 		push	WORD PTR [bp]	;this
	*** 002fc1	9a 00 00 00 00 		call	FAR PTR ?setupdmar@Cescc@@JECXIPEX@Z	; Cescc::setupdmar
;|***           inp(t1->port_list[i]+RBCL);
; Line 1189
	*** 002fc6	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 002fc9	d1 e3 			shl	bx,1
	*** 002fcb	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002fcf	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 002fd2	05 0a 00 		add	ax,10	;000aH
	*** 002fd5	50 			push	ax
	*** 002fd6	9a 00 00 00 00 		call	FAR PTR _inp
	*** 002fdb	83 c4 02 		add	sp,2
;|***           outp(t1->port_list[i]+CMDR,RMC);     //release fifo
; Line 1190
	*** 002fde	68 80 00 		push	128	;0080H
	*** 002fe1	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 002fe4	d1 e3 			shl	bx,1
	*** 002fe6	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002fea	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 002fed	9a 00 00 00 00 		call	FAR PTR _outp
	*** 002ff2	83 c4 04 		add	sp,4
;|***           }   // end use DMA
; Line 1191
					$I1786:
;|***         } // end ASYNC
; Line 1192
;|*** 
;|***       if(t1->eopmode[i]==OPMODE_BISYNC)
; Line 1194
					$I1778:
	*** 002ff5	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 002ff8	d1 e6 			shl	si,1
	*** 002ffa	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 002ffe	26 83 b8 9e 01 02 	cmp	WORD PTR es:[bx+414][si],2
	*** 003004	74 03 			je	$JCC12292
	*** 003006	e9 19 02 		jmp	$I1789
					$JCC12292:
;|***         {
; Line 1195
;|***         //TCD interrupt
;|***         
;|***         k = inp(t1->port_list[i]+RBCL);//get num bytes in fifo
; Line 1198
	*** 003009	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 00300c	d1 e3 			shl	bx,1
	*** 00300e	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003012	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 003015	05 0a 00 		add	ax,10	;000aH
	*** 003018	50 			push	ax
	*** 003019	9a 00 00 00 00 		call	FAR PTR _inp
	*** 00301e	83 c4 02 		add	sp,2
	*** 003021	89 46 f2 		mov	WORD PTR [bp-14],ax	;k
;|***         k = k&0x1f;
; Line 1199
	*** 003024	83 66 f2 1f 		and	WORD PTR [bp-14],31	;001fH	;k
;|***         if(k==0) k=32;
; Line 1200
	*** 003028	83 7e f2 00 		cmp	WORD PTR [bp-14],0	;k
	*** 00302c	74 03 			je	$JCC12332
	*** 00302e	e9 05 00 		jmp	$I1790
					$JCC12332:
	*** 003031	c7 46 f2 20 00 		mov	WORD PTR [bp-14],32	;0020H	;k
;|***         
;|***         //assumes that k is allways a multiple of 2 (status byte included mode)
;|***         irxbuf = (t1->rxbuffer[i][t1->current_rxbuf[i]]);     
; Line 1203
					$I1790:
	*** 003036	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003039	d1 e6 			shl	si,1
	*** 00303b	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00303f	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 003042	c1 e7 04 		shl	di,4
	*** 003045	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 00304a	c1 e7 02 		shl	di,2
	*** 00304d	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003051	26 8b 41 7a 		mov	ax,WORD PTR es:[bx+122][di]
	*** 003055	26 8b 51 7c 		mov	dx,WORD PTR es:[bx+124][di]
	*** 003059	89 46 e2 		mov	WORD PTR [bp-30],ax	;irxbuf
	*** 00305c	89 56 e4 		mov	WORD PTR [bp-28],dx
;|***         //bloc = (unsigned far *)irxbuf->frame;
;|***         for(j=irxbuf->no_bytes;j<irxbuf->no_bytes+k;j++)
; Line 1205
	*** 00305f	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 003062	26 8b 47 02 		mov	ax,WORD PTR es:[bx+2]
	*** 003066	89 46 f4 		mov	WORD PTR [bp-12],ax	;j
	*** 003069	e9 03 00 		jmp	$F1791
					$FC1792:
	*** 00306c	ff 46 f4 		inc	WORD PTR [bp-12]	;j
					$F1791:
	*** 00306f	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 003072	26 8b 47 02 		mov	ax,WORD PTR es:[bx+2]
	*** 003076	03 46 f2 		add	ax,WORD PTR [bp-14]	;k
	*** 003079	3b 46 f4 		cmp	ax,WORD PTR [bp-12]	;j
	*** 00307c	77 03 			ja	$JCC12412
	*** 00307e	e9 25 00 		jmp	$FB1793
					$JCC12412:
;|***           irxbuf->frame[j] = inp(t1->port_list[i]+FIFO); //****inpw?
; Line 1206
	*** 003081	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 003084	d1 e3 			shl	bx,1
	*** 003086	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00308a	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00308d	05 20 00 		add	ax,32	;0020H
	*** 003090	50 			push	ax
	*** 003091	9a 00 00 00 00 		call	FAR PTR _inp
	*** 003096	83 c4 02 		add	sp,2
	*** 003099	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 00309c	8b 76 f4 		mov	si,WORD PTR [bp-12]	;j
	*** 00309f	26 88 40 06 		mov	BYTE PTR es:[bx+6][si],al
	*** 0030a3	e9 c6 ff 		jmp	$FC1792
					$FB1793:
;|***         while((inp(t1->port_list[i]+STAR)&CEC)==CEC);
; Line 1207
					$FC1795:
	*** 0030a6	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 0030a9	d1 e3 			shl	bx,1
	*** 0030ab	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0030af	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 0030b2	9a 00 00 00 00 		call	FAR PTR _inp
	*** 0030b7	83 c4 02 		add	sp,2
	*** 0030ba	24 04 			and	al,4
	*** 0030bc	3c 04 			cmp	al,4
	*** 0030be	74 03 			je	$JCC12478
	*** 0030c0	e9 03 00 		jmp	$FB1796
					$JCC12478:
	*** 0030c3	e9 e0 ff 		jmp	$FC1795
					$FB1796:
;|***         outp(t1->port_list[i]+CMDR,RMC);     //release fifo
; Line 1208
	*** 0030c6	68 80 00 		push	128	;0080H
	*** 0030c9	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 0030cc	d1 e3 			shl	bx,1
	*** 0030ce	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0030d2	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 0030d5	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0030da	83 c4 04 		add	sp,4
;|***         //could move this stuff elsewhere (such that the buffers get more than 32 bytes in em)
;|***         irxbuf->valid = 1;//validate rbuf
; Line 1210
	*** 0030dd	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 0030e0	26 c7 07 01 00 		mov	WORD PTR es:[bx],1
;|***         irxbuf->no_bytes = irxbuf->no_bytes + k; //number of bytes received in rbuf
; Line 1211
	*** 0030e5	8b 46 f2 		mov	ax,WORD PTR [bp-14]	;k
	*** 0030e8	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 0030eb	26 01 47 02 		add	WORD PTR es:[bx+2],ax
;|***         t1->current_rxbuf[i]++;  
; Line 1212
	*** 0030ef	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0030f2	d1 e6 			shl	si,1
	*** 0030f4	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0030f8	26 8b 80 7a 01 		mov	ax,WORD PTR es:[bx+378][si]
	*** 0030fd	40 			inc	ax
	*** 0030fe	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003101	d1 e6 			shl	si,1
	*** 003103	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003107	26 89 80 7a 01 		mov	WORD PTR es:[bx+378][si],ax
;|***         //irxbuf is no longer valid
;|***         if(t1->current_rxbuf[i]==t1->max_rxbuf[i]) t1->current_rxbuf[i]=0;                
; Line 1214
	*** 00310c	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00310f	d1 e6 			shl	si,1
	*** 003111	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003115	26 8b 80 82 01 		mov	ax,WORD PTR es:[bx+386][si]
	*** 00311a	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00311d	d1 e6 			shl	si,1
	*** 00311f	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003123	26 39 80 7a 01 		cmp	WORD PTR es:[bx+378][si],ax
	*** 003128	74 03 			je	$JCC12584
	*** 00312a	e9 10 00 		jmp	$I1797
					$JCC12584:
	*** 00312d	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003130	d1 e6 			shl	si,1
	*** 003132	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003136	26 c7 80 7a 01 00 00 	mov	WORD PTR es:[bx+378][si],0
;|***         if(t1->rxbuffer[i][t1->current_rxbuf[i]]->valid ==1) 
; Line 1215
					$I1797:
	*** 00313d	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003140	d1 e6 			shl	si,1
	*** 003142	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003146	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 003149	c1 e7 04 		shl	di,4
	*** 00314c	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 003151	c1 e7 02 		shl	di,2
	*** 003154	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003158	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 00315c	26 83 3f 01 		cmp	WORD PTR es:[bx],1
	*** 003160	74 03 			je	$JCC12640
	*** 003162	e9 1f 00 		jmp	$I1798
					$JCC12640:
;|***           {
; Line 1216
;|***           // an error occured and the 
;|***           //   main program isn't done with 
;|***           //   the frame that is about
;|***           //   to be used for received data
;|***           // set the receive buffers overflowed bit of the status word for this port here
;|***           t1->port_status[i] = t1->port_status[i] | RX_BUFFER_OVERFLOW;
; Line 1222
	*** 003165	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003168	d1 e6 			shl	si,1
	*** 00316a	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00316e	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003173	0d 40 00 		or	ax,64	;0040H
	*** 003176	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003179	d1 e6 			shl	si,1
	*** 00317b	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00317f	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***           }
; Line 1223
;|***         t1->rxbuffer[i][t1->current_rxbuf[i]]->no_bytes = 0;  //prep buf for use
; Line 1224
					$I1798:
	*** 003184	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003187	d1 e6 			shl	si,1
	*** 003189	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00318d	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 003190	c1 e7 04 		shl	di,4
	*** 003193	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 003198	c1 e7 02 		shl	di,2
	*** 00319b	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00319f	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 0031a3	26 c7 47 02 00 00 	mov	WORD PTR es:[bx+2],0
;|***         t1->rxbuffer[i][t1->current_rxbuf[i]]->valid = 0;    //invalidate it for use
; Line 1225
	*** 0031a9	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0031ac	d1 e6 			shl	si,1
	*** 0031ae	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0031b2	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 0031b5	c1 e7 04 		shl	di,4
	*** 0031b8	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 0031bd	c1 e7 02 		shl	di,2
	*** 0031c0	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0031c4	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 0031c8	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
;|***         t1->port_status[i] = t1->port_status[i] | RX_READY;
; Line 1226
	*** 0031cd	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0031d0	d1 e6 			shl	si,1
	*** 0031d2	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0031d6	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 0031db	0d 00 02 		or	ax,512	;0200H
	*** 0031de	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0031e1	d1 e6 			shl	si,1
	*** 0031e3	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0031e7	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         while((inp(t1->port_list[i]+STAR)&CEC)==CEC);
; Line 1227
					$FC1800:
	*** 0031ec	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 0031ef	d1 e3 			shl	bx,1
	*** 0031f1	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0031f5	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 0031f8	9a 00 00 00 00 		call	FAR PTR _inp
	*** 0031fd	83 c4 02 		add	sp,2
	*** 003200	24 04 			and	al,4
	*** 003202	3c 04 			cmp	al,4
	*** 003204	74 03 			je	$JCC12804
	*** 003206	e9 03 00 		jmp	$FB1801
					$JCC12804:
	*** 003209	e9 e0 ff 		jmp	$FC1800
					$FB1801:
;|***         outp(t1->port_list[i]+CMDR,HUNT);     //go back to hunt mode
; Line 1228
	*** 00320c	6a 04 			push	4
	*** 00320e	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 003211	d1 e3 			shl	bx,1
	*** 003213	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003217	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 00321a	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00321f	83 c4 04 		add	sp,4
;|***         }  //  end BISYNC                                                 
; Line 1229
;|***       } // end RME
; Line 1230
					$I1789:
;|***       
;|***     
;|***     if((isr0&RFS)==RFS)   //  RFS Receive Frame Start
; Line 1233
					$I1764:
	*** 003222	8a 46 fe 		mov	al,BYTE PTR [bp-2]	;isr0
	*** 003225	24 40 			and	al,64	;0040H
	*** 003227	3c 40 			cmp	al,64	;0040H
	*** 003229	74 03 			je	$JCC12841
	*** 00322b	e9 ca 01 		jmp	$I1802
					$JCC12841:
;|***       {
; Line 1234
;|***       if(t1->eopmode[i]==OPMODE_HDLC)
; Line 1235
	*** 00322e	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003231	d1 e6 			shl	si,1
	*** 003233	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003237	26 83 b8 9e 01 00 	cmp	WORD PTR es:[bx+414][si],0
	*** 00323d	74 03 			je	$JCC12861
	*** 00323f	e9 1f 00 		jmp	$I1803
					$JCC12861:
;|***         {     
; Line 1236
;|***         //RFS interrupt time to start the coffee
;|***         t1->port_status[i] = t1->port_status[i] | RFS_INTERRUPT;
; Line 1238
	*** 003242	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003245	d1 e6 			shl	si,1
	*** 003247	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00324b	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003250	0d 20 00 		or	ax,32	;0020H
	*** 003253	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003256	d1 e6 			shl	si,1
	*** 003258	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00325c	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         }
; Line 1239
;|***         
;|***       if(t1->eopmode[i]==OPMODE_ASYNC)
; Line 1241
					$I1803:
	*** 003261	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003264	d1 e6 			shl	si,1
	*** 003266	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00326a	26 83 b8 9e 01 01 	cmp	WORD PTR es:[bx+414][si],1
	*** 003270	74 03 			je	$JCC12912
	*** 003272	e9 83 01 		jmp	$I1804
					$JCC12912:
;|***         {
; Line 1242
;|***         //TIME out interrupt
;|***         //I think this would be a good time to pull the data from the fifo, issuing a 
;|***         //RFRD command (0x20) to force the fifo open, the book says that it will force
;|***         //a TCD interrupt which will collect the data
;|***         
;|***         if((inp(t1->port_list[i]+STAR)&0x20)==0x20) outp(t1->port_list[i]+CMDR,0x20);
; Line 1248
	*** 003275	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 003278	d1 e3 			shl	bx,1
	*** 00327a	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00327e	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 003281	9a 00 00 00 00 		call	FAR PTR _inp
	*** 003286	83 c4 02 		add	sp,2
	*** 003289	24 20 			and	al,32	;0020H
	*** 00328b	3c 20 			cmp	al,32	;0020H
	*** 00328d	74 03 			je	$JCC12941
	*** 00328f	e9 19 00 		jmp	$I1805
					$JCC12941:
	*** 003292	6a 20 			push	32	;0020H
	*** 003294	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 003297	d1 e3 			shl	bx,1
	*** 003299	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00329d	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 0032a0	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0032a5	83 c4 04 		add	sp,4
;|***         else
; Line 1249
	*** 0032a8	e9 2e 01 		jmp	$I1806
					$I1805:
;|***           {
; Line 1250
;|***           //here would be a good time to close out the current rxbuf and
;|***           //start in on a new one...sending rxready...no more data is 
;|***           //currently coming in so pass what we have on.
;|***           irxbuf = (t1->rxbuffer[i][t1->current_rxbuf[i]]);     
; Line 1254
	*** 0032ab	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0032ae	d1 e6 			shl	si,1
	*** 0032b0	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0032b4	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 0032b7	c1 e7 04 		shl	di,4
	*** 0032ba	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 0032bf	c1 e7 02 		shl	di,2
	*** 0032c2	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0032c6	26 8b 41 7a 		mov	ax,WORD PTR es:[bx+122][di]
	*** 0032ca	26 8b 51 7c 		mov	dx,WORD PTR es:[bx+124][di]
	*** 0032ce	89 46 e2 		mov	WORD PTR [bp-30],ax	;irxbuf
	*** 0032d1	89 56 e4 		mov	WORD PTR [bp-28],dx
;|***           irxbuf->valid = 1;//validate rbuf
; Line 1255
	*** 0032d4	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 0032d7	26 c7 07 01 00 		mov	WORD PTR es:[bx],1
;|***           t1->current_rxbuf[i]++;  
; Line 1256
	*** 0032dc	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0032df	d1 e6 			shl	si,1
	*** 0032e1	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0032e5	26 8b 80 7a 01 		mov	ax,WORD PTR es:[bx+378][si]
	*** 0032ea	40 			inc	ax
	*** 0032eb	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0032ee	d1 e6 			shl	si,1
	*** 0032f0	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0032f4	26 89 80 7a 01 		mov	WORD PTR es:[bx+378][si],ax
;|***           //irxbuf is no longer valid
;|***           if(t1->current_rxbuf[i]==t1->max_rxbuf[i]) t1->current_rxbuf[i]=0;                
; Line 1258
	*** 0032f9	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0032fc	d1 e6 			shl	si,1
	*** 0032fe	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003302	26 8b 80 82 01 		mov	ax,WORD PTR es:[bx+386][si]
	*** 003307	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00330a	d1 e6 			shl	si,1
	*** 00330c	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003310	26 39 80 7a 01 		cmp	WORD PTR es:[bx+378][si],ax
	*** 003315	74 03 			je	$JCC13077
	*** 003317	e9 10 00 		jmp	$I1807
					$JCC13077:
	*** 00331a	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00331d	d1 e6 			shl	si,1
	*** 00331f	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003323	26 c7 80 7a 01 00 00 	mov	WORD PTR es:[bx+378][si],0
;|***           if(t1->rxbuffer[i][t1->current_rxbuf[i]]->valid ==1) 
; Line 1259
					$I1807:
	*** 00332a	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00332d	d1 e6 			shl	si,1
	*** 00332f	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003333	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 003336	c1 e7 04 		shl	di,4
	*** 003339	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 00333e	c1 e7 02 		shl	di,2
	*** 003341	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003345	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 003349	26 83 3f 01 		cmp	WORD PTR es:[bx],1
	*** 00334d	74 03 			je	$JCC13133
	*** 00334f	e9 1f 00 		jmp	$I1808
					$JCC13133:
;|***             {
; Line 1260
;|***             // an error occured and the 
;|***             // main program isn't done with 
;|***             // the frame that is about
;|***             // to be used for received data
;|***             // set the receive buffers overflowed bit of the status word for this port here
;|***             t1->port_status[i] = t1->port_status[i] | RX_BUFFER_OVERFLOW;
; Line 1266
	*** 003352	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003355	d1 e6 			shl	si,1
	*** 003357	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00335b	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003360	0d 40 00 		or	ax,64	;0040H
	*** 003363	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003366	d1 e6 			shl	si,1
	*** 003368	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00336c	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***             }
; Line 1267
;|***             
;|***           t1->rxbuffer[i][t1->current_rxbuf[i]]->no_bytes = 0;  //prep buf for use
; Line 1269
					$I1808:
	*** 003371	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003374	d1 e6 			shl	si,1
	*** 003376	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00337a	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 00337d	c1 e7 04 		shl	di,4
	*** 003380	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 003385	c1 e7 02 		shl	di,2
	*** 003388	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00338c	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 003390	26 c7 47 02 00 00 	mov	WORD PTR es:[bx+2],0
;|***           t1->rxbuffer[i][t1->current_rxbuf[i]]->valid = 0;    //invalidate it for use
; Line 1270
	*** 003396	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003399	d1 e6 			shl	si,1
	*** 00339b	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00339f	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 0033a2	c1 e7 04 		shl	di,4
	*** 0033a5	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 0033aa	c1 e7 02 		shl	di,2
	*** 0033ad	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0033b1	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 0033b5	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
;|***           t1->port_status[i] = t1->port_status[i] | RX_READY;
; Line 1271
	*** 0033ba	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0033bd	d1 e6 			shl	si,1
	*** 0033bf	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0033c3	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 0033c8	0d 00 02 		or	ax,512	;0200H
	*** 0033cb	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0033ce	d1 e6 			shl	si,1
	*** 0033d0	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0033d4	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***           }
; Line 1272
					$I1806:
;|***           
;|***         t1->port_status[i] = t1->port_status[i] | REC_TIMEOUT;
; Line 1274
	*** 0033d9	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0033dc	d1 e6 			shl	si,1
	*** 0033de	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0033e2	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 0033e7	0d 00 80 		or	ax,-32768	;8000H
	*** 0033ea	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0033ed	d1 e6 			shl	si,1
	*** 0033ef	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0033f3	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         }  // end ASYNC                             
; Line 1275
;|***         //shouldn't happen in bisync mode
;|***       } // end RFS
; Line 1277
					$I1804:
;|***       
;|***     
;|***     if((isr0&RSC)==RSC)     //  RSC Receive Status Change.  Significant in auto-mode only.
; Line 1280
					$I1802:
	*** 0033f8	8a 46 fe 		mov	al,BYTE PTR [bp-2]	;isr0
	*** 0033fb	24 20 			and	al,32	;0020H
	*** 0033fd	3c 20 			cmp	al,32	;0020H
	*** 0033ff	74 03 			je	$JCC13311
	*** 003401	e9 99 00 		jmp	$I1809
					$JCC13311:
;|***       {
; Line 1281
;|***       if(t1->eopmode[i]==OPMODE_HDLC)
; Line 1282
	*** 003404	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003407	d1 e6 			shl	si,1
	*** 003409	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00340d	26 83 b8 9e 01 00 	cmp	WORD PTR es:[bx+414][si],0
	*** 003413	74 03 			je	$JCC13331
	*** 003415	e9 1f 00 		jmp	$I1810
					$JCC13331:
;|***         {     
; Line 1283
;|***         //RSC interrupt (either got a RR or a RNR from HDLC link in auto mode
;|***         t1->port_status[i] = t1->port_status[i] | RSC_INTERRUPT;
; Line 1285
	*** 003418	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00341b	d1 e6 			shl	si,1
	*** 00341d	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003421	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003426	0d 80 00 		or	ax,128	;0080H
	*** 003429	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00342c	d1 e6 			shl	si,1
	*** 00342e	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003432	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         }
; Line 1286
;|***         
;|***       if(t1->eopmode[i]==OPMODE_ASYNC)
; Line 1288
					$I1810:
	*** 003437	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00343a	d1 e6 			shl	si,1
	*** 00343c	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003440	26 83 b8 9e 01 01 	cmp	WORD PTR es:[bx+414][si],1
	*** 003446	74 03 			je	$JCC13382
	*** 003448	e9 1f 00 		jmp	$I1811
					$JCC13382:
;|***         {
; Line 1289
;|***         //parrity error interrupt         
;|***         t1->port_status[i] = t1->port_status[i] | PARITY_ERROR;
; Line 1291
	*** 00344b	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00344e	d1 e6 			shl	si,1
	*** 003450	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003454	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003459	0d 00 04 		or	ax,1024	;0400H
	*** 00345c	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00345f	d1 e6 			shl	si,1
	*** 003461	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003465	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         }
; Line 1292
;|***           
;|***       if(t1->eopmode[i]==OPMODE_BISYNC)
; Line 1294
					$I1811:
	*** 00346a	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00346d	d1 e6 			shl	si,1
	*** 00346f	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003473	26 83 b8 9e 01 02 	cmp	WORD PTR es:[bx+414][si],2
	*** 003479	74 03 			je	$JCC13433
	*** 00347b	e9 1f 00 		jmp	$I1812
					$JCC13433:
;|***         {
; Line 1295
;|***         //parrity error interrupt         
;|***         t1->port_status[i] = t1->port_status[i] | PARITY_ERROR;
; Line 1297
	*** 00347e	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003481	d1 e6 			shl	si,1
	*** 003483	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003487	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 00348c	0d 00 04 		or	ax,1024	;0400H
	*** 00348f	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003492	d1 e6 			shl	si,1
	*** 003494	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003498	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         }
; Line 1298
;|***       }  // end RSC
; Line 1299
					$I1812:
;|***       
;|***     
;|***     if((isr0&PCE)==PCE)  //  PCE Protocol Error.  Significant in auto-mode only.
; Line 1302
					$I1809:
	*** 00349d	8a 46 fe 		mov	al,BYTE PTR [bp-2]	;isr0
	*** 0034a0	24 10 			and	al,16	;0010H
	*** 0034a2	3c 10 			cmp	al,16	;0010H
	*** 0034a4	74 03 			je	$JCC13476
	*** 0034a6	e9 99 00 		jmp	$I1813
					$JCC13476:
;|***       {
; Line 1303
;|***       if(t1->eopmode[i]==OPMODE_HDLC)
; Line 1304
	*** 0034a9	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0034ac	d1 e6 			shl	si,1
	*** 0034ae	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0034b2	26 83 b8 9e 01 00 	cmp	WORD PTR es:[bx+414][si],0
	*** 0034b8	74 03 			je	$JCC13496
	*** 0034ba	e9 1f 00 		jmp	$I1814
					$JCC13496:
;|***         {     
; Line 1305
;|***         //protocol error (auto mode only)            
;|***         t1->port_status[i] = t1->port_status[i] | PCE_INTERRUPT;
; Line 1307
	*** 0034bd	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0034c0	d1 e6 			shl	si,1
	*** 0034c2	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0034c6	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 0034cb	0d 04 00 		or	ax,4
	*** 0034ce	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0034d1	d1 e6 			shl	si,1
	*** 0034d3	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0034d7	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         }
; Line 1308
;|***         
;|***       if(t1->eopmode[i]==OPMODE_ASYNC)
; Line 1310
					$I1814:
	*** 0034dc	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0034df	d1 e6 			shl	si,1
	*** 0034e1	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0034e5	26 83 b8 9e 01 01 	cmp	WORD PTR es:[bx+414][si],1
	*** 0034eb	74 03 			je	$JCC13547
	*** 0034ed	e9 1f 00 		jmp	$I1815
					$JCC13547:
;|***         {
; Line 1311
;|***         //framing error interrupt                         
;|***         t1->port_status[i] = t1->port_status[i] | FRAMING_ERROR;
; Line 1313
	*** 0034f0	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0034f3	d1 e6 			shl	si,1
	*** 0034f5	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0034f9	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 0034fe	0d 00 08 		or	ax,2048	;0800H
	*** 003501	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003504	d1 e6 			shl	si,1
	*** 003506	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00350a	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         } 
; Line 1314
;|***         
;|***       if(t1->eopmode[i]==OPMODE_BISYNC)
; Line 1316
					$I1815:
	*** 00350f	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003512	d1 e6 			shl	si,1
	*** 003514	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003518	26 83 b8 9e 01 02 	cmp	WORD PTR es:[bx+414][si],2
	*** 00351e	74 03 			je	$JCC13598
	*** 003520	e9 1f 00 		jmp	$I1816
					$JCC13598:
;|***         {
; Line 1317
;|***         //SYN detected
;|***         t1->port_status[i] = t1->port_status[i] | SYN_DETECTED;
; Line 1319
	*** 003523	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003526	d1 e6 			shl	si,1
	*** 003528	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00352c	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003531	0d 00 08 		or	ax,2048	;0800H
	*** 003534	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003537	d1 e6 			shl	si,1
	*** 003539	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00353d	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         } 
; Line 1320
;|***       } // end PCE
; Line 1321
					$I1816:
;|***       
;|***     
;|***     if((isr0&PLLA)==PLLA)  //  PLLA DPLL Asynchronous.
; Line 1324
					$I1813:
	*** 003542	8a 46 fe 		mov	al,BYTE PTR [bp-2]	;isr0
	*** 003545	24 08 			and	al,8
	*** 003547	3c 08 			cmp	al,8
	*** 003549	74 03 			je	$JCC13641
	*** 00354b	e9 3c 00 		jmp	$I1817
					$JCC13641:
;|***       {
; Line 1325
;|***       if(t1->eopmode[i]==OPMODE_HDLC)
; Line 1326
	*** 00354e	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003551	d1 e6 			shl	si,1
	*** 003553	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003557	26 83 b8 9e 01 00 	cmp	WORD PTR es:[bx+414][si],0
	*** 00355d	74 03 			je	$JCC13661
	*** 00355f	e9 00 00 		jmp	$I1818
					$JCC13661:
;|***         {
; Line 1327
;|***         //DPLL async interrupt (lost clock sync)
;|***         }
; Line 1329
;|***         
;|***       if(t1->eopmode[i]==OPMODE_ASYNC)
; Line 1331
					$I1818:
	*** 003562	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003565	d1 e6 			shl	si,1
	*** 003567	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00356b	26 83 b8 9e 01 01 	cmp	WORD PTR es:[bx+414][si],1
	*** 003571	74 03 			je	$JCC13681
	*** 003573	e9 00 00 		jmp	$I1819
					$JCC13681:
;|***         {
; Line 1332
;|***         //DPLL async interrupt (lost clock sync)
;|***         }
; Line 1334
;|***         
;|***       if(t1->eopmode[i]==OPMODE_BISYNC)
; Line 1336
					$I1819:
	*** 003576	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003579	d1 e6 			shl	si,1
	*** 00357b	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00357f	26 83 b8 9e 01 02 	cmp	WORD PTR es:[bx+414][si],2
	*** 003585	74 03 			je	$JCC13701
	*** 003587	e9 00 00 		jmp	$I1820
					$JCC13701:
;|***         {
; Line 1337
;|***         //DPLL async interrupt (lost clock sync)
;|***         }
; Line 1339
;|***       } // end PLLA
; Line 1340
					$I1820:
;|***       
;|***     
;|***     if((isr0&CDSC)==CDSC)  //  CDSC  Carrier Detect Status Change.
; Line 1343
					$I1817:
	*** 00358a	8a 46 fe 		mov	al,BYTE PTR [bp-2]	;isr0
	*** 00358d	24 04 			and	al,4
	*** 00358f	3c 04 			cmp	al,4
	*** 003591	74 03 			je	$JCC13713
	*** 003593	e9 3c 00 		jmp	$I1821
					$JCC13713:
;|***       {
; Line 1344
;|***       if(t1->eopmode[i]==OPMODE_HDLC)
; Line 1345
	*** 003596	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003599	d1 e6 			shl	si,1
	*** 00359b	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00359f	26 83 b8 9e 01 00 	cmp	WORD PTR es:[bx+414][si],0
	*** 0035a5	74 03 			je	$JCC13733
	*** 0035a7	e9 00 00 		jmp	$I1822
					$JCC13733:
;|***         {
; Line 1346
;|***         //carrier detect changed state
;|***         }
; Line 1348
;|***         
;|***       if(t1->eopmode[i]==OPMODE_ASYNC)
; Line 1350
					$I1822:
	*** 0035aa	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0035ad	d1 e6 			shl	si,1
	*** 0035af	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0035b3	26 83 b8 9e 01 01 	cmp	WORD PTR es:[bx+414][si],1
	*** 0035b9	74 03 			je	$JCC13753
	*** 0035bb	e9 00 00 		jmp	$I1823
					$JCC13753:
;|***         {
; Line 1351
;|***         //carrier detect changed state
;|***         }
; Line 1353
;|***         
;|***       if(t1->eopmode[i]==OPMODE_BISYNC)
; Line 1355
					$I1823:
	*** 0035be	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0035c1	d1 e6 			shl	si,1
	*** 0035c3	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0035c7	26 83 b8 9e 01 02 	cmp	WORD PTR es:[bx+414][si],2
	*** 0035cd	74 03 			je	$JCC13773
	*** 0035cf	e9 00 00 		jmp	$I1824
					$JCC13773:
;|***         {
; Line 1356
;|***         //carrier detect changed state
;|***         }
; Line 1358
;|***       }  // end CDSC
; Line 1359
					$I1824:
;|***         
;|***     
;|***     if((isr0&RFO)==RFO)  //  RFO Receive Frame Overflow.
; Line 1362
					$I1821:
	*** 0035d2	8a 46 fe 		mov	al,BYTE PTR [bp-2]	;isr0
	*** 0035d5	24 02 			and	al,2
	*** 0035d7	3c 02 			cmp	al,2
	*** 0035d9	74 03 			je	$JCC13785
	*** 0035db	e9 af 00 		jmp	$I1825
					$JCC13785:
;|***       {
; Line 1363
;|***       if(t1->eopmode[i]==OPMODE_HDLC)
; Line 1364
	*** 0035de	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0035e1	d1 e6 			shl	si,1
	*** 0035e3	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0035e7	26 83 b8 9e 01 00 	cmp	WORD PTR es:[bx+414][si],0
	*** 0035ed	74 03 			je	$JCC13805
	*** 0035ef	e9 35 00 		jmp	$I1826
					$JCC13805:
;|***         {
; Line 1365
;|***         //RFO interrupt                              
;|***         t1->port_status[i] = t1->port_status[i] | RFO_INTERRUPT;
; Line 1367
	*** 0035f2	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0035f5	d1 e6 			shl	si,1
	*** 0035f7	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0035fb	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003600	0d 08 00 		or	ax,8
	*** 003603	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003606	d1 e6 			shl	si,1
	*** 003608	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00360c	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         outp(t1->port_list[i]+CMDR,RHR); // reset the HDLC receiver and RFIFO
; Line 1368
	*** 003611	6a 40 			push	64	;0040H
	*** 003613	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 003616	d1 e3 			shl	bx,1
	*** 003618	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00361c	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 00361f	9a 00 00 00 00 		call	FAR PTR _outp
	*** 003624	83 c4 04 		add	sp,4
;|***         }
; Line 1369
;|***           
;|***       if(t1->eopmode[i]==OPMODE_ASYNC)
; Line 1371
					$I1826:
	*** 003627	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00362a	d1 e6 			shl	si,1
	*** 00362c	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003630	26 83 b8 9e 01 01 	cmp	WORD PTR es:[bx+414][si],1
	*** 003636	74 03 			je	$JCC13878
	*** 003638	e9 1f 00 		jmp	$I1827
					$JCC13878:
;|***         {
; Line 1372
;|***         //receive overflow                                      
;|***         t1->port_status[i] = t1->port_status[i] | RFO_INTERRUPT;
; Line 1374
	*** 00363b	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00363e	d1 e6 			shl	si,1
	*** 003640	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003644	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003649	0d 08 00 		or	ax,8
	*** 00364c	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00364f	d1 e6 			shl	si,1
	*** 003651	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003655	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         //must be reset here or will be locked forever
;|***         }
; Line 1376
;|***         
;|***       if(t1->eopmode[i]==OPMODE_BISYNC)
; Line 1378
					$I1827:
	*** 00365a	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00365d	d1 e6 			shl	si,1
	*** 00365f	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003663	26 83 b8 9e 01 02 	cmp	WORD PTR es:[bx+414][si],2
	*** 003669	74 03 			je	$JCC13929
	*** 00366b	e9 1f 00 		jmp	$I1828
					$JCC13929:
;|***         {
; Line 1379
;|***         //receive overflow                                      
;|***         t1->port_status[i] = t1->port_status[i] | RFO_INTERRUPT;
; Line 1381
	*** 00366e	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003671	d1 e6 			shl	si,1
	*** 003673	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003677	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 00367c	0d 08 00 		or	ax,8
	*** 00367f	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003682	d1 e6 			shl	si,1
	*** 003684	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003688	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         //must be reset here or will be locked forever
;|***         }
; Line 1383
;|***       }  // end RFO
; Line 1384
					$I1828:
;|***       
;|***       
;|***     if((isr0&RPF)==RPF)  //  RPF Receive Pool Full.  Interrupt mode only.
; Line 1387
					$I1825:
	*** 00368d	8a 46 fe 		mov	al,BYTE PTR [bp-2]	;isr0
	*** 003690	24 01 			and	al,1
	*** 003692	3c 01 			cmp	al,1
	*** 003694	74 03 			je	$JCC13972
	*** 003696	e9 a9 04 		jmp	$I1829
					$JCC13972:
;|***       {
; Line 1388
;|***       if(t1->eopmode[i]==OPMODE_HDLC)
; Line 1389
	*** 003699	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00369c	d1 e6 			shl	si,1
	*** 00369e	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0036a2	26 83 b8 9e 01 00 	cmp	WORD PTR es:[bx+414][si],0
	*** 0036a8	74 03 			je	$JCC13992
	*** 0036aa	e9 a3 00 		jmp	$I1830
					$JCC13992:
;|***         {                                                            
; Line 1390
;|***         //RPF interrupt, exactly 32 bytes are ready
;|***         //do this for all but DMA (we shouldn't get here in DMA mode)
;|***         irxbuf = (t1->rxbuffer[i][t1->current_rxbuf[i]]);
; Line 1393
	*** 0036ad	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0036b0	d1 e6 			shl	si,1
	*** 0036b2	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0036b6	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 0036b9	c1 e7 04 		shl	di,4
	*** 0036bc	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 0036c1	c1 e7 02 		shl	di,2
	*** 0036c4	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0036c8	26 8b 41 7a 		mov	ax,WORD PTR es:[bx+122][di]
	*** 0036cc	26 8b 51 7c 		mov	dx,WORD PTR es:[bx+124][di]
	*** 0036d0	89 46 e2 		mov	WORD PTR [bp-30],ax	;irxbuf
	*** 0036d3	89 56 e4 		mov	WORD PTR [bp-28],dx
;|***         bloc = (unsigned far *)irxbuf->frame;
; Line 1394
	*** 0036d6	8b 46 e2 		mov	ax,WORD PTR [bp-30]	;irxbuf
	*** 0036d9	8b 56 e4 		mov	dx,WORD PTR [bp-28]
	*** 0036dc	05 06 00 		add	ax,6
	*** 0036df	89 46 e8 		mov	WORD PTR [bp-24],ax	;bloc
	*** 0036e2	89 56 ea 		mov	WORD PTR [bp-22],dx
;|***         for(j=(irxbuf->no_bytes>>1);j<(irxbuf->no_bytes>>1)+16;j++)
; Line 1395
	*** 0036e5	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 0036e8	26 8b 47 02 		mov	ax,WORD PTR es:[bx+2]
	*** 0036ec	d1 e8 			shr	ax,1
	*** 0036ee	89 46 f4 		mov	WORD PTR [bp-12],ax	;j
	*** 0036f1	e9 03 00 		jmp	$F1832
					$FC1833:
	*** 0036f4	ff 46 f4 		inc	WORD PTR [bp-12]	;j
					$F1832:
	*** 0036f7	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 0036fa	26 8b 47 02 		mov	ax,WORD PTR es:[bx+2]
	*** 0036fe	d1 e8 			shr	ax,1
	*** 003700	05 10 00 		add	ax,16	;0010H
	*** 003703	3b 46 f4 		cmp	ax,WORD PTR [bp-12]	;j
	*** 003706	77 03 			ja	$JCC14086
	*** 003708	e9 26 00 		jmp	$FB1834
					$JCC14086:
;|***           {
; Line 1396
;|***           bloc[j] = inpw(t1->port_list[i]+FIFO);
; Line 1397
	*** 00370b	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 00370e	d1 e3 			shl	bx,1
	*** 003710	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003714	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 003717	05 20 00 		add	ax,32	;0020H
	*** 00371a	50 			push	ax
	*** 00371b	9a 00 00 00 00 		call	FAR PTR _inpw
	*** 003720	83 c4 02 		add	sp,2
	*** 003723	8b 5e f4 		mov	bx,WORD PTR [bp-12]	;j
	*** 003726	d1 e3 			shl	bx,1
	*** 003728	c4 76 e8 		les	si,DWORD PTR [bp-24]	;bloc
	*** 00372b	26 89 00 		mov	WORD PTR es:[bx][si],ax
;|***           }
; Line 1398
	*** 00372e	e9 c3 ff 		jmp	$FC1833
					$FB1834:
;|***           
;|***         outp(t1->port_list[i]+CMDR,RMC);     //release rfifo
; Line 1400
	*** 003731	68 80 00 		push	128	;0080H
	*** 003734	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 003737	d1 e3 			shl	bx,1
	*** 003739	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00373d	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 003740	9a 00 00 00 00 		call	FAR PTR _outp
	*** 003745	83 c4 04 		add	sp,4
;|***         irxbuf->no_bytes += 32;
; Line 1401
	*** 003748	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 00374b	26 83 47 02 20 		add	WORD PTR es:[bx+2],32	;0020H
;|***         } 
; Line 1402
;|***       
;|***       if(t1->eopmode[i]==OPMODE_ASYNC)
; Line 1404
					$I1830:
	*** 003750	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003753	d1 e6 			shl	si,1
	*** 003755	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003759	26 83 b8 9e 01 01 	cmp	WORD PTR es:[bx+414][si],1
	*** 00375f	74 03 			je	$JCC14175
	*** 003761	e9 e5 01 		jmp	$I1835
					$JCC14175:
;|***         {
; Line 1405
;|***         //DATA IS READY                                             
;|***         k = inp(t1->port_list[i]+RBCL);//get num bytes in fifo
; Line 1407
	*** 003764	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 003767	d1 e3 			shl	bx,1
	*** 003769	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00376d	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 003770	05 0a 00 		add	ax,10	;000aH
	*** 003773	50 			push	ax
	*** 003774	9a 00 00 00 00 		call	FAR PTR _inp
	*** 003779	83 c4 02 		add	sp,2
	*** 00377c	89 46 f2 		mov	WORD PTR [bp-14],ax	;k
;|***         k = k&0x1f;
; Line 1408
	*** 00377f	83 66 f2 1f 		and	WORD PTR [bp-14],31	;001fH	;k
;|***         if(k==0) k=32;
; Line 1409
	*** 003783	83 7e f2 00 		cmp	WORD PTR [bp-14],0	;k
	*** 003787	74 03 			je	$JCC14215
	*** 003789	e9 05 00 		jmp	$I1836
					$JCC14215:
	*** 00378c	c7 46 f2 20 00 		mov	WORD PTR [bp-14],32	;0020H	;k
;|***         //assumes that k is allways a multiple of 2 (status byte included mode)
;|***         irxbuf = (t1->rxbuffer[i][t1->current_rxbuf[i]]);     
; Line 1411
					$I1836:
	*** 003791	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003794	d1 e6 			shl	si,1
	*** 003796	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00379a	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 00379d	c1 e7 04 		shl	di,4
	*** 0037a0	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 0037a5	c1 e7 02 		shl	di,2
	*** 0037a8	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0037ac	26 8b 41 7a 		mov	ax,WORD PTR es:[bx+122][di]
	*** 0037b0	26 8b 51 7c 		mov	dx,WORD PTR es:[bx+124][di]
	*** 0037b4	89 46 e2 		mov	WORD PTR [bp-30],ax	;irxbuf
	*** 0037b7	89 56 e4 		mov	WORD PTR [bp-28],dx
;|***         bloc = (unsigned far *)irxbuf->frame;
; Line 1412
	*** 0037ba	8b 46 e2 		mov	ax,WORD PTR [bp-30]	;irxbuf
	*** 0037bd	8b 56 e4 		mov	dx,WORD PTR [bp-28]
	*** 0037c0	05 06 00 		add	ax,6
	*** 0037c3	89 46 e8 		mov	WORD PTR [bp-24],ax	;bloc
	*** 0037c6	89 56 ea 		mov	WORD PTR [bp-22],dx
;|***         for(j=irxbuf->no_bytes>>1;j<(irxbuf->no_bytes+k)>>1;j++)  bloc[j] = inpw(t1->port_list[i]+FIFO);
; Line 1413
	*** 0037c9	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 0037cc	26 8b 47 02 		mov	ax,WORD PTR es:[bx+2]
	*** 0037d0	d1 e8 			shr	ax,1
	*** 0037d2	89 46 f4 		mov	WORD PTR [bp-12],ax	;j
	*** 0037d5	e9 03 00 		jmp	$F1838
					$FC1839:
	*** 0037d8	ff 46 f4 		inc	WORD PTR [bp-12]	;j
					$F1838:
	*** 0037db	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 0037de	26 8b 47 02 		mov	ax,WORD PTR es:[bx+2]
	*** 0037e2	03 46 f2 		add	ax,WORD PTR [bp-14]	;k
	*** 0037e5	d1 e8 			shr	ax,1
	*** 0037e7	3b 46 f4 		cmp	ax,WORD PTR [bp-12]	;j
	*** 0037ea	77 03 			ja	$JCC14314
	*** 0037ec	e9 26 00 		jmp	$FB1840
					$JCC14314:
	*** 0037ef	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 0037f2	d1 e3 			shl	bx,1
	*** 0037f4	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0037f8	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0037fb	05 20 00 		add	ax,32	;0020H
	*** 0037fe	50 			push	ax
	*** 0037ff	9a 00 00 00 00 		call	FAR PTR _inpw
	*** 003804	83 c4 02 		add	sp,2
	*** 003807	8b 5e f4 		mov	bx,WORD PTR [bp-12]	;j
	*** 00380a	d1 e3 			shl	bx,1
	*** 00380c	c4 76 e8 		les	si,DWORD PTR [bp-24]	;bloc
	*** 00380f	26 89 00 		mov	WORD PTR es:[bx][si],ax
	*** 003812	e9 c3 ff 		jmp	$FC1839
					$FB1840:
;|***         outp(t1->port_list[i]+CMDR,RMC);     //release fifo
; Line 1414
	*** 003815	68 80 00 		push	128	;0080H
	*** 003818	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 00381b	d1 e3 			shl	bx,1
	*** 00381d	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003821	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 003824	9a 00 00 00 00 		call	FAR PTR _outp
	*** 003829	83 c4 04 		add	sp,4
;|***         //could move this stuff elsewhere (such that the buffers get more than 32 bytes in em)
;|***         irxbuf->no_bytes = irxbuf->no_bytes + k; //number of bytes received in rbuf
; Line 1416
	*** 00382c	8b 46 f2 		mov	ax,WORD PTR [bp-14]	;k
	*** 00382f	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 003832	26 01 47 02 		add	WORD PTR es:[bx+2],ax
;|***         if(irxbuf->no_bytes >= (FRAME_SIZE - 32))
; Line 1417
	*** 003836	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 003839	26 81 7f 02 e0 03 	cmp	WORD PTR es:[bx+2],992	;03e0H
	*** 00383f	73 03 			jae	$JCC14399
	*** 003841	e9 05 01 		jmp	$I1841
					$JCC14399:
;|***           {
; Line 1418
;|***           irxbuf->valid = 1;//validate rbuf
; Line 1419
	*** 003844	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 003847	26 c7 07 01 00 		mov	WORD PTR es:[bx],1
;|***           t1->current_rxbuf[i]++;  
; Line 1420
	*** 00384c	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00384f	d1 e6 			shl	si,1
	*** 003851	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003855	26 8b 80 7a 01 		mov	ax,WORD PTR es:[bx+378][si]
	*** 00385a	40 			inc	ax
	*** 00385b	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00385e	d1 e6 			shl	si,1
	*** 003860	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003864	26 89 80 7a 01 		mov	WORD PTR es:[bx+378][si],ax
;|***           //irxbuf is no longer valid
;|***           if(t1->current_rxbuf[i]==t1->max_rxbuf[i]) t1->current_rxbuf[i]=0;                
; Line 1422
	*** 003869	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00386c	d1 e6 			shl	si,1
	*** 00386e	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003872	26 8b 80 82 01 		mov	ax,WORD PTR es:[bx+386][si]
	*** 003877	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00387a	d1 e6 			shl	si,1
	*** 00387c	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003880	26 39 80 7a 01 		cmp	WORD PTR es:[bx+378][si],ax
	*** 003885	74 03 			je	$JCC14469
	*** 003887	e9 10 00 		jmp	$I1842
					$JCC14469:
	*** 00388a	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00388d	d1 e6 			shl	si,1
	*** 00388f	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003893	26 c7 80 7a 01 00 00 	mov	WORD PTR es:[bx+378][si],0
;|***           if(t1->rxbuffer[i][t1->current_rxbuf[i]]->valid ==1) 
; Line 1423
					$I1842:
	*** 00389a	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00389d	d1 e6 			shl	si,1
	*** 00389f	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0038a3	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 0038a6	c1 e7 04 		shl	di,4
	*** 0038a9	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 0038ae	c1 e7 02 		shl	di,2
	*** 0038b1	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0038b5	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 0038b9	26 83 3f 01 		cmp	WORD PTR es:[bx],1
	*** 0038bd	74 03 			je	$JCC14525
	*** 0038bf	e9 1f 00 		jmp	$I1843
					$JCC14525:
;|***             {
; Line 1424
;|***             // an error occured and the 
;|***             //   main program isn't done with 
;|***             //   the frame that is about
;|***             //   to be used for received data
;|***             //set the receive buffers overflowed bit of the status word for this port here
;|***             t1->port_status[i] = t1->port_status[i] | RX_BUFFER_OVERFLOW;
; Line 1430
	*** 0038c2	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0038c5	d1 e6 			shl	si,1
	*** 0038c7	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0038cb	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 0038d0	0d 40 00 		or	ax,64	;0040H
	*** 0038d3	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0038d6	d1 e6 			shl	si,1
	*** 0038d8	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0038dc	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***             }
; Line 1431
;|***             
;|***           t1->rxbuffer[i][t1->current_rxbuf[i]]->no_bytes = 0;  //prep buf for use
; Line 1433
					$I1843:
	*** 0038e1	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0038e4	d1 e6 			shl	si,1
	*** 0038e6	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0038ea	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 0038ed	c1 e7 04 		shl	di,4
	*** 0038f0	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 0038f5	c1 e7 02 		shl	di,2
	*** 0038f8	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0038fc	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 003900	26 c7 47 02 00 00 	mov	WORD PTR es:[bx+2],0
;|***           t1->rxbuffer[i][t1->current_rxbuf[i]]->valid = 0;    //invalidate it for use
; Line 1434
	*** 003906	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003909	d1 e6 			shl	si,1
	*** 00390b	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00390f	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 003912	c1 e7 04 		shl	di,4
	*** 003915	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 00391a	c1 e7 02 		shl	di,2
	*** 00391d	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003921	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 003925	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
;|***           t1->port_status[i] = t1->port_status[i] | RX_READY;
; Line 1435
	*** 00392a	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00392d	d1 e6 			shl	si,1
	*** 00392f	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003933	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003938	0d 00 02 		or	ax,512	;0200H
	*** 00393b	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00393e	d1 e6 			shl	si,1
	*** 003940	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003944	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***           }
; Line 1436
;|***         }     
; Line 1437
					$I1841:
;|***       
;|***       if(t1->eopmode[i]==OPMODE_BISYNC)
; Line 1439
					$I1835:
	*** 003949	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00394c	d1 e6 			shl	si,1
	*** 00394e	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003952	26 83 b8 9e 01 02 	cmp	WORD PTR es:[bx+414][si],2
	*** 003958	74 03 			je	$JCC14680
	*** 00395a	e9 e5 01 		jmp	$I1844
					$JCC14680:
;|***         {
; Line 1440
;|***         //DATA IS READY                                             
;|***         k = inp(t1->port_list[i]+RBCL);//get num bytes in fifo
; Line 1442
	*** 00395d	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 003960	d1 e3 			shl	bx,1
	*** 003962	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003966	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 003969	05 0a 00 		add	ax,10	;000aH
	*** 00396c	50 			push	ax
	*** 00396d	9a 00 00 00 00 		call	FAR PTR _inp
	*** 003972	83 c4 02 		add	sp,2
	*** 003975	89 46 f2 		mov	WORD PTR [bp-14],ax	;k
;|***         k = k&0x1f;
; Line 1443
	*** 003978	83 66 f2 1f 		and	WORD PTR [bp-14],31	;001fH	;k
;|***         if(k==0) k=32;
; Line 1444
	*** 00397c	83 7e f2 00 		cmp	WORD PTR [bp-14],0	;k
	*** 003980	74 03 			je	$JCC14720
	*** 003982	e9 05 00 		jmp	$I1845
					$JCC14720:
	*** 003985	c7 46 f2 20 00 		mov	WORD PTR [bp-14],32	;0020H	;k
;|***         
;|***         //assumes that k is allways a multiple of 2 (status byte included mode)
;|***         //this will hold true unless the programmed threshold = 1 in non parity store mode
;|***         //ie this code will not work for threshold level 1, in no parity store mode!!!!!
;|***         irxbuf = (t1->rxbuffer[i][t1->current_rxbuf[i]]);     
; Line 1449
					$I1845:
	*** 00398a	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00398d	d1 e6 			shl	si,1
	*** 00398f	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003993	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 003996	c1 e7 04 		shl	di,4
	*** 003999	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 00399e	c1 e7 02 		shl	di,2
	*** 0039a1	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0039a5	26 8b 41 7a 		mov	ax,WORD PTR es:[bx+122][di]
	*** 0039a9	26 8b 51 7c 		mov	dx,WORD PTR es:[bx+124][di]
	*** 0039ad	89 46 e2 		mov	WORD PTR [bp-30],ax	;irxbuf
	*** 0039b0	89 56 e4 		mov	WORD PTR [bp-28],dx
;|***         bloc = (unsigned far *)irxbuf->frame;
; Line 1450
	*** 0039b3	8b 46 e2 		mov	ax,WORD PTR [bp-30]	;irxbuf
	*** 0039b6	8b 56 e4 		mov	dx,WORD PTR [bp-28]
	*** 0039b9	05 06 00 		add	ax,6
	*** 0039bc	89 46 e8 		mov	WORD PTR [bp-24],ax	;bloc
	*** 0039bf	89 56 ea 		mov	WORD PTR [bp-22],dx
;|***         for(j=irxbuf->no_bytes>>1;j<(irxbuf->no_bytes+k)>>1;j++)
; Line 1451
	*** 0039c2	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 0039c5	26 8b 47 02 		mov	ax,WORD PTR es:[bx+2]
	*** 0039c9	d1 e8 			shr	ax,1
	*** 0039cb	89 46 f4 		mov	WORD PTR [bp-12],ax	;j
	*** 0039ce	e9 03 00 		jmp	$F1847
					$FC1848:
	*** 0039d1	ff 46 f4 		inc	WORD PTR [bp-12]	;j
					$F1847:
	*** 0039d4	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 0039d7	26 8b 47 02 		mov	ax,WORD PTR es:[bx+2]
	*** 0039db	03 46 f2 		add	ax,WORD PTR [bp-14]	;k
	*** 0039de	d1 e8 			shr	ax,1
	*** 0039e0	3b 46 f4 		cmp	ax,WORD PTR [bp-12]	;j
	*** 0039e3	77 03 			ja	$JCC14819
	*** 0039e5	e9 26 00 		jmp	$FB1849
					$JCC14819:
;|***           {
; Line 1452
;|***           bloc[j] = inpw(t1->port_list[i]+FIFO);
; Line 1453
	*** 0039e8	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 0039eb	d1 e3 			shl	bx,1
	*** 0039ed	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0039f1	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0039f4	05 20 00 		add	ax,32	;0020H
	*** 0039f7	50 			push	ax
	*** 0039f8	9a 00 00 00 00 		call	FAR PTR _inpw
	*** 0039fd	83 c4 02 		add	sp,2
	*** 003a00	8b 5e f4 		mov	bx,WORD PTR [bp-12]	;j
	*** 003a03	d1 e3 			shl	bx,1
	*** 003a05	c4 76 e8 		les	si,DWORD PTR [bp-24]	;bloc
	*** 003a08	26 89 00 		mov	WORD PTR es:[bx][si],ax
;|***           }
; Line 1454
	*** 003a0b	e9 c3 ff 		jmp	$FC1848
					$FB1849:
;|***           
;|***         outp(t1->port_list[i]+CMDR,RMC);     //release fifo
; Line 1456
	*** 003a0e	68 80 00 		push	128	;0080H
	*** 003a11	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 003a14	d1 e3 			shl	bx,1
	*** 003a16	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003a1a	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 003a1d	9a 00 00 00 00 		call	FAR PTR _outp
	*** 003a22	83 c4 04 		add	sp,4
;|***         //could move this stuff elsewhere (such that the buffers get more than 32 bytes in em)
;|***         irxbuf->no_bytes = irxbuf->no_bytes + k; //number of bytes received in rbuf
; Line 1458
	*** 003a25	8b 46 f2 		mov	ax,WORD PTR [bp-14]	;k
	*** 003a28	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 003a2b	26 01 47 02 		add	WORD PTR es:[bx+2],ax
;|***         if(irxbuf->no_bytes >=( FRAME_SIZE - 32))
; Line 1459
	*** 003a2f	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 003a32	26 81 7f 02 e0 03 	cmp	WORD PTR es:[bx+2],992	;03e0H
	*** 003a38	73 03 			jae	$JCC14904
	*** 003a3a	e9 05 01 		jmp	$I1850
					$JCC14904:
;|***           {
; Line 1460
;|***           irxbuf->valid = 1;//validate rbuf
; Line 1461
	*** 003a3d	c4 5e e2 		les	bx,DWORD PTR [bp-30]	;irxbuf
	*** 003a40	26 c7 07 01 00 		mov	WORD PTR es:[bx],1
;|***           t1->current_rxbuf[i]++;  
; Line 1462
	*** 003a45	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003a48	d1 e6 			shl	si,1
	*** 003a4a	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003a4e	26 8b 80 7a 01 		mov	ax,WORD PTR es:[bx+378][si]
	*** 003a53	40 			inc	ax
	*** 003a54	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003a57	d1 e6 			shl	si,1
	*** 003a59	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003a5d	26 89 80 7a 01 		mov	WORD PTR es:[bx+378][si],ax
;|***           //irxbuf is no longer valid
;|***           if(t1->current_rxbuf[i]==t1->max_rxbuf[i]) t1->current_rxbuf[i]=0;                
; Line 1464
	*** 003a62	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003a65	d1 e6 			shl	si,1
	*** 003a67	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003a6b	26 8b 80 82 01 		mov	ax,WORD PTR es:[bx+386][si]
	*** 003a70	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003a73	d1 e6 			shl	si,1
	*** 003a75	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003a79	26 39 80 7a 01 		cmp	WORD PTR es:[bx+378][si],ax
	*** 003a7e	74 03 			je	$JCC14974
	*** 003a80	e9 10 00 		jmp	$I1851
					$JCC14974:
	*** 003a83	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003a86	d1 e6 			shl	si,1
	*** 003a88	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003a8c	26 c7 80 7a 01 00 00 	mov	WORD PTR es:[bx+378][si],0
;|***           if(t1->rxbuffer[i][t1->current_rxbuf[i]]->valid ==1) 
; Line 1465
					$I1851:
	*** 003a93	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003a96	d1 e6 			shl	si,1
	*** 003a98	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003a9c	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 003a9f	c1 e7 04 		shl	di,4
	*** 003aa2	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 003aa7	c1 e7 02 		shl	di,2
	*** 003aaa	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003aae	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 003ab2	26 83 3f 01 		cmp	WORD PTR es:[bx],1
	*** 003ab6	74 03 			je	$JCC15030
	*** 003ab8	e9 1f 00 		jmp	$I1852
					$JCC15030:
;|***             {
; Line 1466
;|***             // an error occured and the 
;|***             //   main program isn't done with 
;|***             //   the frame that is about
;|***             //   to be used for received data
;|***             //set the receive buffers overflowed bit of the status word for this port here
;|***             t1->port_status[i] = t1->port_status[i] | RX_BUFFER_OVERFLOW;
; Line 1472
	*** 003abb	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003abe	d1 e6 			shl	si,1
	*** 003ac0	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003ac4	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003ac9	0d 40 00 		or	ax,64	;0040H
	*** 003acc	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003acf	d1 e6 			shl	si,1
	*** 003ad1	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003ad5	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***             }
; Line 1473
;|***             
;|***           t1->rxbuffer[i][t1->current_rxbuf[i]]->no_bytes = 0;  //prep buf for use
; Line 1475
					$I1852:
	*** 003ada	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003add	d1 e6 			shl	si,1
	*** 003adf	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003ae3	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 003ae6	c1 e7 04 		shl	di,4
	*** 003ae9	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 003aee	c1 e7 02 		shl	di,2
	*** 003af1	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003af5	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 003af9	26 c7 47 02 00 00 	mov	WORD PTR es:[bx+2],0
;|***           t1->rxbuffer[i][t1->current_rxbuf[i]]->valid = 0;    //invalidate it for use
; Line 1476
	*** 003aff	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003b02	d1 e6 			shl	si,1
	*** 003b04	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003b08	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 003b0b	c1 e7 04 		shl	di,4
	*** 003b0e	26 03 b8 7a 01 		add	di,WORD PTR es:[bx+378][si]
	*** 003b13	c1 e7 02 		shl	di,2
	*** 003b16	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003b1a	26 c4 59 7a 		les	bx,DWORD PTR es:[bx+122][di]
	*** 003b1e	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
;|***           t1->port_status[i] = t1->port_status[i] | RX_READY;
; Line 1477
	*** 003b23	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003b26	d1 e6 			shl	si,1
	*** 003b28	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003b2c	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003b31	0d 00 02 		or	ax,512	;0200H
	*** 003b34	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003b37	d1 e6 			shl	si,1
	*** 003b39	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003b3d	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***           }
; Line 1478
;|***         }     
; Line 1479
					$I1850:
;|***       } // end RPF
; Line 1480
					$I1844:
;|***     
;|***     
;|***     
;|***     //check ISR1 next  
;|***     if((isr1&EOP)==EOP)  //EOP End of Poll Sequence Detected.  Valid only in SLDC Loop mode.
; Line 1485
					$I1829:
	*** 003b42	8a 46 fc 		mov	al,BYTE PTR [bp-4]	;isr1
	*** 003b45	24 80 			and	al,128	;0080H
	*** 003b47	3c 80 			cmp	al,128	;0080H
	*** 003b49	74 03 			je	$JCC15177
	*** 003b4b	e9 47 00 		jmp	$I1853
					$JCC15177:
;|***       { 
; Line 1486
;|***       if(t1->eopmode[i]==OPMODE_HDLC)
; Line 1487
	*** 003b4e	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003b51	d1 e6 			shl	si,1
	*** 003b53	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003b57	26 83 b8 9e 01 00 	cmp	WORD PTR es:[bx+414][si],0
	*** 003b5d	74 03 			je	$JCC15197
	*** 003b5f	e9 00 00 		jmp	$I1854
					$JCC15197:
;|***         {
; Line 1488
;|***         //end of poll
;|***         }            
; Line 1490
;|***         
;|***       if(t1->eopmode[i]==OPMODE_ASYNC)
; Line 1492
					$I1854:
	*** 003b62	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003b65	d1 e6 			shl	si,1
	*** 003b67	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003b6b	26 83 b8 9e 01 01 	cmp	WORD PTR es:[bx+414][si],1
	*** 003b71	74 03 			je	$JCC15217
	*** 003b73	e9 1f 00 		jmp	$I1855
					$JCC15217:
;|***         {
; Line 1493
;|***         //break detect interrupt                                  
;|***         t1->port_status[i] = t1->port_status[i] | BREAK_DETECTED;
; Line 1495
	*** 003b76	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003b79	d1 e6 			shl	si,1
	*** 003b7b	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003b7f	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003b84	0d 00 10 		or	ax,4096	;1000H
	*** 003b87	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003b8a	d1 e6 			shl	si,1
	*** 003b8c	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003b90	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         }       
; Line 1496
;|***       }  // end EOP
; Line 1497
					$I1855:
;|***       
;|***     
;|***     
;|***     if((isr1&0x40)==0x40) // OLP/RDO On Loop(SDLC Loop mode) / Receive Data Overflow(n/a in SDLC Loop)
; Line 1501
					$I1853:
	*** 003b95	8a 46 fc 		mov	al,BYTE PTR [bp-4]	;isr1
	*** 003b98	24 40 			and	al,64	;0040H
	*** 003b9a	3c 40 			cmp	al,64	;0040H
	*** 003b9c	74 03 			je	$JCC15260
	*** 003b9e	e9 47 00 		jmp	$I1856
					$JCC15260:
;|***       {               
; Line 1502
;|***       if(t1->eopmode[i]==OPMODE_HDLC)  //  OLP
; Line 1503
	*** 003ba1	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003ba4	d1 e6 			shl	si,1
	*** 003ba6	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003baa	26 83 b8 9e 01 00 	cmp	WORD PTR es:[bx+414][si],0
	*** 003bb0	74 03 			je	$JCC15280
	*** 003bb2	e9 00 00 		jmp	$I1857
					$JCC15280:
;|***         {
; Line 1504
;|***         //on loop interrupt
;|***         }
; Line 1506
;|***       if(t1->eopmode[i]==OPMODE_ASYNC)  //  RDO
; Line 1507
					$I1857:
	*** 003bb5	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003bb8	d1 e6 			shl	si,1
	*** 003bba	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003bbe	26 83 b8 9e 01 01 	cmp	WORD PTR es:[bx+414][si],1
	*** 003bc4	74 03 			je	$JCC15300
	*** 003bc6	e9 1f 00 		jmp	$I1858
					$JCC15300:
;|***         {                  
; Line 1508
;|***         //break terminated interrupt
;|***         t1->port_status[i] = t1->port_status[i] | BREAK_TERMINATED;
; Line 1510
	*** 003bc9	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003bcc	d1 e6 			shl	si,1
	*** 003bce	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003bd2	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003bd7	0d 00 20 		or	ax,8192	;2000H
	*** 003bda	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003bdd	d1 e6 			shl	si,1
	*** 003bdf	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003be3	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         }                  
; Line 1511
;|***       }  // end OLP/RDO
; Line 1512
					$I1858:
;|***       
;|***     
;|***     if((isr1&0x20)==0x20)  //  AOLP/ALLS Active On Loop(SDLC Loop mode) / All Sent(non-SDLC Loop)
; Line 1515
					$I1856:
	*** 003be8	8a 46 fc 		mov	al,BYTE PTR [bp-4]	;isr1
	*** 003beb	24 20 			and	al,32	;0020H
	*** 003bed	3c 20 			cmp	al,32	;0020H
	*** 003bef	74 03 			je	$JCC15343
	*** 003bf1	e9 7a 00 		jmp	$I1859
					$JCC15343:
;|***       {               
; Line 1516
;|***       if(t1->eopmode[i]==OPMODE_HDLC)
; Line 1517
	*** 003bf4	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003bf7	d1 e6 			shl	si,1
	*** 003bf9	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003bfd	26 83 b8 9e 01 00 	cmp	WORD PTR es:[bx+414][si],0
	*** 003c03	74 03 			je	$JCC15363
	*** 003c05	e9 00 00 		jmp	$I1860
					$JCC15363:
;|***         {
; Line 1518
;|***         //all sent interrupt (tx machine is empty)
;|***         }                                         
; Line 1520
;|***         
;|***       if(t1->eopmode[i]==OPMODE_ASYNC)
; Line 1522
					$I1860:
	*** 003c08	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003c0b	d1 e6 			shl	si,1
	*** 003c0d	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003c11	26 83 b8 9e 01 01 	cmp	WORD PTR es:[bx+414][si],1
	*** 003c17	74 03 			je	$JCC15383
	*** 003c19	e9 1f 00 		jmp	$I1861
					$JCC15383:
;|***         {
; Line 1523
;|***         //all characters are sent out the fifo and out the txd pin
;|***         t1->port_status[i] = t1->port_status[i] | ALLSENT_INTERRUPT;
; Line 1525
	*** 003c1c	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003c1f	d1 e6 			shl	si,1
	*** 003c21	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003c25	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003c2a	0d 00 40 		or	ax,16384	;4000H
	*** 003c2d	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003c30	d1 e6 			shl	si,1
	*** 003c32	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003c36	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         }
; Line 1526
;|***         
;|***       if(t1->eopmode[i]==OPMODE_BISYNC)
; Line 1528
					$I1861:
	*** 003c3b	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003c3e	d1 e6 			shl	si,1
	*** 003c40	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003c44	26 83 b8 9e 01 02 	cmp	WORD PTR es:[bx+414][si],2
	*** 003c4a	74 03 			je	$JCC15434
	*** 003c4c	e9 1f 00 		jmp	$I1862
					$JCC15434:
;|***         {
; Line 1529
;|***         //all characters are sent out the fifo and out the txd pin
;|***         t1->port_status[i] = t1->port_status[i] | ALLSENT_INTERRUPT;
; Line 1531
	*** 003c4f	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003c52	d1 e6 			shl	si,1
	*** 003c54	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003c58	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003c5d	0d 00 40 		or	ax,16384	;4000H
	*** 003c60	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003c63	d1 e6 			shl	si,1
	*** 003c65	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003c69	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         }
; Line 1532
;|***       } // end AOLP/ALLS
; Line 1533
					$I1862:
;|***       
;|***     
;|***     if((isr1&0x10)==0x10) //  XDU/EXE Transmit Data Underrun/Extended Transmission End
; Line 1536
					$I1859:
	*** 003c6e	8a 46 fc 		mov	al,BYTE PTR [bp-4]	;isr1
	*** 003c71	24 10 			and	al,16	;0010H
	*** 003c73	3c 10 			cmp	al,16	;0010H
	*** 003c75	74 03 			je	$JCC15477
	*** 003c77	e9 66 00 		jmp	$I1863
					$JCC15477:
;|***       {
; Line 1537
;|***       if(t1->eopmode[i]==OPMODE_HDLC)
; Line 1538
	*** 003c7a	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003c7d	d1 e6 			shl	si,1
	*** 003c7f	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003c83	26 83 b8 9e 01 00 	cmp	WORD PTR es:[bx+414][si],0
	*** 003c89	74 03 			je	$JCC15497
	*** 003c8b	e9 1f 00 		jmp	$I1864
					$JCC15497:
;|***         {
; Line 1539
;|***         //EXE interupt                               
;|***         t1->port_status[i] = t1->port_status[i] | EXE_INTERRUPT;
; Line 1541
	*** 003c8e	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003c91	d1 e6 			shl	si,1
	*** 003c93	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003c97	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003c9c	0d 02 00 		or	ax,2
	*** 003c9f	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003ca2	d1 e6 			shl	si,1
	*** 003ca4	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003ca8	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         //outp(t1->port_list[i]+CMDR,XRES);
;|***         //need something here to reset the dma channel if operating in Extended trasparent mode
;|***         //as this is the normal transmit end message for that mode
;|***         }
; Line 1545
;|***           
;|***       if(t1->eopmode[i]==OPMODE_BISYNC)
; Line 1547
					$I1864:
	*** 003cad	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003cb0	d1 e6 			shl	si,1
	*** 003cb2	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003cb6	26 83 b8 9e 01 02 	cmp	WORD PTR es:[bx+414][si],2
	*** 003cbc	74 03 			je	$JCC15548
	*** 003cbe	e9 1f 00 		jmp	$I1865
					$JCC15548:
;|***         {
; Line 1548
;|***         //EXE interupt                               
;|***         t1->port_status[i] = t1->port_status[i] | EXE_INTERRUPT;
; Line 1550
	*** 003cc1	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003cc4	d1 e6 			shl	si,1
	*** 003cc6	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003cca	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003ccf	0d 02 00 		or	ax,2
	*** 003cd2	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003cd5	d1 e6 			shl	si,1
	*** 003cd7	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003cdb	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         }
; Line 1551
;|***       } // end XDU/EXE
; Line 1552
					$I1865:
;|*** 
;|***         
;|***     if((isr1&TIN)==TIN)  // Timer Interrupt
; Line 1555
					$I1863:
	*** 003ce0	8a 46 fc 		mov	al,BYTE PTR [bp-4]	;isr1
	*** 003ce3	24 08 			and	al,8
	*** 003ce5	3c 08 			cmp	al,8
	*** 003ce7	74 03 			je	$JCC15591
	*** 003ce9	e9 d2 00 		jmp	$I1866
					$JCC15591:
;|***       {
; Line 1556
;|***       if(t1->eopmode[i]==OPMODE_HDLC)
; Line 1557
	*** 003cec	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003cef	d1 e6 			shl	si,1
	*** 003cf1	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003cf5	26 83 b8 9e 01 00 	cmp	WORD PTR es:[bx+414][si],0
	*** 003cfb	74 03 			je	$JCC15611
	*** 003cfd	e9 38 00 		jmp	$I1867
					$JCC15611:
;|***         {        
; Line 1558
;|***         if(i==1)
; Line 1559
	*** 003d00	83 7e f8 01 		cmp	WORD PTR [bp-8],1	;i
	*** 003d04	74 03 			je	$JCC15620
	*** 003d06	e9 00 00 		jmp	$I1868
					$JCC15620:
;|***           {
; Line 1560
;|***           //frame++;  // jtm used for frame timing in cb2000
;|***           }
; Line 1562
;|*** 
;|***         t1->port_status[i] = t1->port_status[i] | TIMER_INTERRUPT;
; Line 1564
					$I1868:
	*** 003d09	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003d0c	d1 e6 			shl	si,1
	*** 003d0e	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003d12	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003d17	0d 00 01 		or	ax,256	;0100H
	*** 003d1a	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003d1d	d1 e6 			shl	si,1
	*** 003d1f	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003d23	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         t1->timer_status[i] = 1;
; Line 1565
	*** 003d28	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003d2b	d1 e6 			shl	si,1
	*** 003d2d	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003d31	26 c7 80 8a 01 01 00 	mov	WORD PTR es:[bx+394][si],1
;|***         
;|***         //outp(t1->port_list[i]+TIMR,inp(t1->port_list[i]+TIMR));//stops timer    
;|***         }
; Line 1568
;|***         
;|***       if(t1->eopmode[i]==OPMODE_ASYNC)
; Line 1570
					$I1867:
	*** 003d38	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003d3b	d1 e6 			shl	si,1
	*** 003d3d	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003d41	26 83 b8 9e 01 01 	cmp	WORD PTR es:[bx+414][si],1
	*** 003d47	74 03 			je	$JCC15687
	*** 003d49	e9 2f 00 		jmp	$I1869
					$JCC15687:
;|***         {
; Line 1571
;|***         t1->port_status[i] = t1->port_status[i] | TIMER_INTERRUPT;
; Line 1572
	*** 003d4c	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003d4f	d1 e6 			shl	si,1
	*** 003d51	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003d55	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003d5a	0d 00 01 		or	ax,256	;0100H
	*** 003d5d	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003d60	d1 e6 			shl	si,1
	*** 003d62	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003d66	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         t1->timer_status[i] = 1;
; Line 1573
	*** 003d6b	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003d6e	d1 e6 			shl	si,1
	*** 003d70	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003d74	26 c7 80 8a 01 01 00 	mov	WORD PTR es:[bx+394][si],1
;|***         }
; Line 1574
;|***     
;|***       if(t1->eopmode[i]==OPMODE_BISYNC)
; Line 1576
					$I1869:
	*** 003d7b	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003d7e	d1 e6 			shl	si,1
	*** 003d80	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003d84	26 83 b8 9e 01 02 	cmp	WORD PTR es:[bx+414][si],2
	*** 003d8a	74 03 			je	$JCC15754
	*** 003d8c	e9 2f 00 		jmp	$I1870
					$JCC15754:
;|***         {
; Line 1577
;|***         t1->port_status[i] = t1->port_status[i] | TIMER_INTERRUPT;
; Line 1578
	*** 003d8f	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003d92	d1 e6 			shl	si,1
	*** 003d94	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003d98	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003d9d	0d 00 01 		or	ax,256	;0100H
	*** 003da0	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003da3	d1 e6 			shl	si,1
	*** 003da5	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003da9	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         t1->timer_status[i] = 1;
; Line 1579
	*** 003dae	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003db1	d1 e6 			shl	si,1
	*** 003db3	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003db7	26 c7 80 8a 01 01 00 	mov	WORD PTR es:[bx+394][si],1
;|***         }
; Line 1580
;|***       } // end TIN
; Line 1581
					$I1870:
;|***       
;|***       
;|***     if((isr1&CSC)==CSC)  // Clear to Send Status Change
; Line 1584
					$I1866:
	*** 003dbe	8a 46 fc 		mov	al,BYTE PTR [bp-4]	;isr1
	*** 003dc1	24 04 			and	al,4
	*** 003dc3	3c 04 			cmp	al,4
	*** 003dc5	74 03 			je	$JCC15813
	*** 003dc7	e9 99 00 		jmp	$I1871
					$JCC15813:
;|***       {
; Line 1585
;|***       if(t1->eopmode[i]==OPMODE_HDLC)
; Line 1586
	*** 003dca	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003dcd	d1 e6 			shl	si,1
	*** 003dcf	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003dd3	26 83 b8 9e 01 00 	cmp	WORD PTR es:[bx+414][si],0
	*** 003dd9	74 03 			je	$JCC15833
	*** 003ddb	e9 1f 00 		jmp	$I1872
					$JCC15833:
;|***         {     
; Line 1587
;|***         //cts status change                                    
;|***         t1->port_status[i] = t1->port_status[i] | CTS_INTERRUPT;
; Line 1589
	*** 003dde	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003de1	d1 e6 			shl	si,1
	*** 003de3	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003de7	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003dec	0d 10 00 		or	ax,16	;0010H
	*** 003def	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003df2	d1 e6 			shl	si,1
	*** 003df4	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003df8	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         }
; Line 1590
;|***         
;|***       if(t1->eopmode[i]==OPMODE_ASYNC)
; Line 1592
					$I1872:
	*** 003dfd	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003e00	d1 e6 			shl	si,1
	*** 003e02	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003e06	26 83 b8 9e 01 01 	cmp	WORD PTR es:[bx+414][si],1
	*** 003e0c	74 03 			je	$JCC15884
	*** 003e0e	e9 1f 00 		jmp	$I1873
					$JCC15884:
;|***         {
; Line 1593
;|***         //CTS changed state
;|***         t1->port_status[i] = t1->port_status[i] | CTS_INTERRUPT;
; Line 1595
	*** 003e11	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003e14	d1 e6 			shl	si,1
	*** 003e16	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003e1a	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003e1f	0d 10 00 		or	ax,16	;0010H
	*** 003e22	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003e25	d1 e6 			shl	si,1
	*** 003e27	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003e2b	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         }
; Line 1596
;|***         
;|***       if(t1->eopmode[i]==OPMODE_BISYNC)
; Line 1598
					$I1873:
	*** 003e30	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003e33	d1 e6 			shl	si,1
	*** 003e35	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003e39	26 83 b8 9e 01 02 	cmp	WORD PTR es:[bx+414][si],2
	*** 003e3f	74 03 			je	$JCC15935
	*** 003e41	e9 1f 00 		jmp	$I1874
					$JCC15935:
;|***         {
; Line 1599
;|***         //CTS changed state
;|***         t1->port_status[i] = t1->port_status[i] | CTS_INTERRUPT;
; Line 1601
	*** 003e44	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003e47	d1 e6 			shl	si,1
	*** 003e49	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003e4d	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003e52	0d 10 00 		or	ax,16	;0010H
	*** 003e55	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003e58	d1 e6 			shl	si,1
	*** 003e5a	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003e5e	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         }
; Line 1602
;|***       } // end CSC
; Line 1603
					$I1874:
;|***       
;|***     
;|***     if((isr1&0x02)==0x02)  // XMR  Transmit Message Repeat
; Line 1606
					$I1871:
	*** 003e63	8a 46 fc 		mov	al,BYTE PTR [bp-4]	;isr1
	*** 003e66	24 02 			and	al,2
	*** 003e68	3c 02 			cmp	al,2
	*** 003e6a	74 03 			je	$JCC15978
	*** 003e6c	e9 66 00 		jmp	$I1875
					$JCC15978:
;|***       {
; Line 1607
;|***       if(t1->eopmode[i]==OPMODE_HDLC)
; Line 1608
	*** 003e6f	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003e72	d1 e6 			shl	si,1
	*** 003e74	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003e78	26 83 b8 9e 01 00 	cmp	WORD PTR es:[bx+414][si],0
	*** 003e7e	74 03 			je	$JCC15998
	*** 003e80	e9 1f 00 		jmp	$I1876
					$JCC15998:
;|***         {       
; Line 1609
;|***         //XMR interrupt
;|***         t1->port_status[i] = t1->port_status[i] | XMR_INTERRUPT;
; Line 1611
	*** 003e83	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003e86	d1 e6 			shl	si,1
	*** 003e88	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003e8c	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003e91	0d 01 00 		or	ax,1
	*** 003e94	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003e97	d1 e6 			shl	si,1
	*** 003e99	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003e9d	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         //could do an auto resend here ...possibly (indicates transmit message repeat)
;|***         }
; Line 1613
;|***     
;|***       if(t1->eopmode[i]==OPMODE_BISYNC)
; Line 1615
					$I1876:
	*** 003ea2	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003ea5	d1 e6 			shl	si,1
	*** 003ea7	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003eab	26 83 b8 9e 01 02 	cmp	WORD PTR es:[bx+414][si],2
	*** 003eb1	74 03 			je	$JCC16049
	*** 003eb3	e9 1f 00 		jmp	$I1877
					$JCC16049:
;|***         {       
; Line 1616
;|***         //XMR interrupt
;|***         t1->port_status[i] = t1->port_status[i] | XMR_INTERRUPT;
; Line 1618
	*** 003eb6	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003eb9	d1 e6 			shl	si,1
	*** 003ebb	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003ebf	26 8b 80 96 01 		mov	ax,WORD PTR es:[bx+406][si]
	*** 003ec4	0d 01 00 		or	ax,1
	*** 003ec7	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003eca	d1 e6 			shl	si,1
	*** 003ecc	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003ed0	26 89 80 96 01 		mov	WORD PTR es:[bx+406][si],ax
;|***         //could do an auto resend here ...possibly (indicates transmit message repeat)
;|***         }
; Line 1620
;|***       } // end XMR
; Line 1621
					$I1877:
;|***       
;|***   
;|***     if((isr1&XPR)==XPR)  //  Transmit Pool Ready
; Line 1624
					$I1875:
	*** 003ed5	8a 46 fc 		mov	al,BYTE PTR [bp-4]	;isr1
	*** 003ed8	24 01 			and	al,1
	*** 003eda	3c 01 			cmp	al,1
	*** 003edc	74 03 			je	$JCC16092
	*** 003ede	e9 2a 07 		jmp	$I1878
					$JCC16092:
;|***       {
; Line 1625
;|***       if((t1->eopmode[i]==OPMODE_HDLC)||(t1->eopmode[i]==OPMODE_BISYNC))
; Line 1626
	*** 003ee1	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003ee4	d1 e6 			shl	si,1
	*** 003ee6	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003eea	26 83 b8 9e 01 00 	cmp	WORD PTR es:[bx+414][si],0
	*** 003ef0	75 03 			jne	$JCC16112
	*** 003ef2	e9 14 00 		jmp	$I1880
					$JCC16112:
	*** 003ef5	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003ef8	d1 e6 			shl	si,1
	*** 003efa	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003efe	26 83 b8 9e 01 02 	cmp	WORD PTR es:[bx+414][si],2
	*** 003f04	74 03 			je	$JCC16132
	*** 003f06	e9 8b 03 		jmp	$I1879
					$JCC16132:
					$I1880:
;|***         {
; Line 1627
;|***         //XPR interrupt (time to send the bytes out)            
;|***         if(t1->port_dmat_list[i]==0)  // no dma, so do interrupt xpr here  
; Line 1629
	*** 003f09	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003f0c	d1 e6 			shl	si,1
	*** 003f0e	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003f12	26 83 78 0c 00 		cmp	WORD PTR es:[bx+12][si],0
	*** 003f17	74 03 			je	$JCC16151
	*** 003f19	e9 cd 01 		jmp	$I1881
					$JCC16151:
;|***           {
; Line 1630
;|***           //try_again_tx:                                
;|***           itxbuf = (t1->txbuffer[i][t1->current_txbuf[i]]);
; Line 1632
	*** 003f1c	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003f1f	d1 e6 			shl	si,1
	*** 003f21	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003f25	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 003f28	c1 e7 04 		shl	di,4
	*** 003f2b	26 03 b8 7e 01 		add	di,WORD PTR es:[bx+382][si]
	*** 003f30	c1 e7 02 		shl	di,2
	*** 003f33	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003f37	26 8b 81 fa 00 		mov	ax,WORD PTR es:[bx+250][di]
	*** 003f3c	26 8b 91 fc 00 		mov	dx,WORD PTR es:[bx+252][di]
	*** 003f41	89 46 de 		mov	WORD PTR [bp-34],ax	;itxbuf
	*** 003f44	89 56 e0 		mov	WORD PTR [bp-32],dx
;|***           bloc = (unsigned far *)itxbuf->frame;
; Line 1633
	*** 003f47	8b 46 de 		mov	ax,WORD PTR [bp-34]	;itxbuf
	*** 003f4a	8b 56 e0 		mov	dx,WORD PTR [bp-32]
	*** 003f4d	05 06 00 		add	ax,6
	*** 003f50	89 46 e8 		mov	WORD PTR [bp-24],ax	;bloc
	*** 003f53	89 56 ea 		mov	WORD PTR [bp-22],dx
;|***           
;|***           if(itxbuf->valid==1)
; Line 1635
	*** 003f56	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 003f59	26 83 3f 01 		cmp	WORD PTR es:[bx],1
	*** 003f5d	74 03 			je	$JCC16221
	*** 003f5f	e9 74 01 		jmp	$I1883
					$JCC16221:
;|***             {  // note: ->max is the total num bytes in frame
; Line 1636
;|***                //       ->no_bytes is num bytes already sent
;|***             if((itxbuf->max - itxbuf->no_bytes) > 32)
; Line 1638
	*** 003f62	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 003f65	26 8b 47 04 		mov	ax,WORD PTR es:[bx+4]
	*** 003f69	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 003f6c	26 2b 47 02 		sub	ax,WORD PTR es:[bx+2]
	*** 003f70	3d 20 00 		cmp	ax,32	;0020H
	*** 003f73	77 03 			ja	$JCC16243
	*** 003f75	e9 89 00 		jmp	$I1884
					$JCC16243:
;|***               { // if more than 32 bytes still to be sent
; Line 1639
;|***                 // this is somewhere in the middle of the frame
;|***                 // load exactly 32 bytes into TFIFO (word writes since even number bytes)
;|***               for(j=(itxbuf->no_bytes)>>1;j<(itxbuf->no_bytes>>1)+16;j++)
; Line 1642
	*** 003f78	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 003f7b	26 8b 47 02 		mov	ax,WORD PTR es:[bx+2]
	*** 003f7f	d1 e8 			shr	ax,1
	*** 003f81	89 46 f4 		mov	WORD PTR [bp-12],ax	;j
	*** 003f84	e9 03 00 		jmp	$F1885
					$FC1886:
	*** 003f87	ff 46 f4 		inc	WORD PTR [bp-12]	;j
					$F1885:
	*** 003f8a	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 003f8d	26 8b 47 02 		mov	ax,WORD PTR es:[bx+2]
	*** 003f91	d1 e8 			shr	ax,1
	*** 003f93	05 10 00 		add	ax,16	;0010H
	*** 003f96	3b 46 f4 		cmp	ax,WORD PTR [bp-12]	;j
	*** 003f99	77 03 			ja	$JCC16281
	*** 003f9b	e9 26 00 		jmp	$FB1887
					$JCC16281:
;|***                 {
; Line 1643
;|***                 outpw(t1->port_list[i]+FIFO,bloc[j]);      // load the fifo 
; Line 1644
	*** 003f9e	8b 5e f4 		mov	bx,WORD PTR [bp-12]	;j
	*** 003fa1	d1 e3 			shl	bx,1
	*** 003fa3	c4 76 e8 		les	si,DWORD PTR [bp-24]	;bloc
	*** 003fa6	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 003fa9	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 003fac	d1 e3 			shl	bx,1
	*** 003fae	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003fb2	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 003fb5	05 20 00 		add	ax,32	;0020H
	*** 003fb8	50 			push	ax
	*** 003fb9	9a 00 00 00 00 		call	FAR PTR _outpw
	*** 003fbe	83 c4 04 		add	sp,4
;|***                 }
; Line 1645
	*** 003fc1	e9 c3 ff 		jmp	$FC1886
					$FB1887:
;|***                 
;|***               outp(t1->port_list[i]+CMDR,t1->tx_type[i]);  // tx the bytes
; Line 1647
	*** 003fc4	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003fc7	d1 e6 			shl	si,1
	*** 003fc9	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003fcd	26 ff b0 8e 01 		push	WORD PTR es:[bx+398][si]
	*** 003fd2	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 003fd5	d1 e3 			shl	bx,1
	*** 003fd7	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003fdb	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 003fde	9a 00 00 00 00 		call	FAR PTR _outp
	*** 003fe3	83 c4 04 		add	sp,4
;|***               itxbuf->no_bytes += 32;                      // update num bytes sent
; Line 1648
	*** 003fe6	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 003fe9	26 83 47 02 20 		add	WORD PTR es:[bx+2],32	;0020H
;|***               t1->istxing[i] = 1;                          // flag that we're still tx'ing
; Line 1649
	*** 003fee	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 003ff1	d1 e6 			shl	si,1
	*** 003ff3	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 003ff7	26 c7 80 92 01 01 00 	mov	WORD PTR es:[bx+402][si],1
;|***               }
; Line 1650
;|***             else
; Line 1651
	*** 003ffe	e9 d2 00 		jmp	$I1888
					$I1884:
;|***               { // there are 32 or fewer bytes remaining to tx
; Line 1652
;|***                 // this is the end of the frame
;|***                 // load remaining bytes into TFIFO (byte writes since may be odd number)
;|***               for(j=itxbuf->no_bytes;j<itxbuf->max;j++)
; Line 1655
	*** 004001	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 004004	26 8b 47 02 		mov	ax,WORD PTR es:[bx+2]
	*** 004008	89 46 f4 		mov	WORD PTR [bp-12],ax	;j
	*** 00400b	e9 03 00 		jmp	$F1889
					$FC1890:
	*** 00400e	ff 46 f4 		inc	WORD PTR [bp-12]	;j
					$F1889:
	*** 004011	8b 46 f4 		mov	ax,WORD PTR [bp-12]	;j
	*** 004014	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 004017	26 39 47 04 		cmp	WORD PTR es:[bx+4],ax
	*** 00401b	77 03 			ja	$JCC16411
	*** 00401d	e9 29 00 		jmp	$FB1891
					$JCC16411:
;|***                 {
; Line 1656
;|***                 outp(t1->port_list[i]+FIFO,itxbuf->frame[j]);  // load the fifo
; Line 1657
	*** 004020	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 004023	83 c3 06 		add	bx,6
	*** 004026	8b 76 f4 		mov	si,WORD PTR [bp-12]	;j
	*** 004029	26 8a 00 		mov	al,BYTE PTR es:[bx][si]
	*** 00402c	98 			cbw	
	*** 00402d	50 			push	ax
	*** 00402e	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 004031	d1 e3 			shl	bx,1
	*** 004033	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004037	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00403a	05 20 00 		add	ax,32	;0020H
	*** 00403d	50 			push	ax
	*** 00403e	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004043	83 c4 04 		add	sp,4
;|***                 }
; Line 1658
	*** 004046	e9 c5 ff 		jmp	$FC1890
					$FB1891:
;|***               
;|***                 // tell the transmitter to tx the bytes, the crc, and the closing flag
;|***               outp(t1->port_list[i]+CMDR,t1->tx_type[i]+XME);
; Line 1661
	*** 004049	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00404c	d1 e6 			shl	si,1
	*** 00404e	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004052	26 8b 80 8e 01 		mov	ax,WORD PTR es:[bx+398][si]
	*** 004057	05 02 00 		add	ax,2
	*** 00405a	50 			push	ax
	*** 00405b	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 00405e	d1 e3 			shl	bx,1
	*** 004060	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004064	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 004067	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00406c	83 c4 04 		add	sp,4
;|***               itxbuf->no_bytes = itxbuf->max;    // update num bytes sent
; Line 1662
	*** 00406f	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 004072	26 8b 47 04 		mov	ax,WORD PTR es:[bx+4]
	*** 004076	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 004079	26 89 47 02 		mov	WORD PTR es:[bx+2],ax
;|***               itxbuf->valid = 0;                 // mark the buffer as unused
; Line 1663
	*** 00407d	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 004080	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
;|***               t1->current_txbuf[i]++;            // select the next buffer, rollover if necessary
; Line 1664
	*** 004085	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004088	d1 e6 			shl	si,1
	*** 00408a	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00408e	26 8b 80 7e 01 		mov	ax,WORD PTR es:[bx+382][si]
	*** 004093	40 			inc	ax
	*** 004094	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004097	d1 e6 			shl	si,1
	*** 004099	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00409d	26 89 80 7e 01 		mov	WORD PTR es:[bx+382][si],ax
;|***               if(t1->current_txbuf[i]==t1->max_txbuf[i]) t1->current_txbuf[i] = 0;
; Line 1665
	*** 0040a2	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0040a5	d1 e6 			shl	si,1
	*** 0040a7	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0040ab	26 8b 80 86 01 		mov	ax,WORD PTR es:[bx+390][si]
	*** 0040b0	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0040b3	d1 e6 			shl	si,1
	*** 0040b5	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0040b9	26 39 80 7e 01 		cmp	WORD PTR es:[bx+382][si],ax
	*** 0040be	74 03 			je	$JCC16574
	*** 0040c0	e9 10 00 		jmp	$I1892
					$JCC16574:
	*** 0040c3	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0040c6	d1 e6 			shl	si,1
	*** 0040c8	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0040cc	26 c7 80 7e 01 00 00 	mov	WORD PTR es:[bx+382][si],0
;|***               //goto try_again_tx;
;|***               }
; Line 1667
					$I1892:
					$I1888:
;|***             }
; Line 1668
;|***             
;|***           else
; Line 1670
	*** 0040d3	e9 10 00 		jmp	$I1893
					$I1883:
;|***             {
; Line 1671
;|***             t1->istxing[i] = 0; //no valid frames we are done txing
; Line 1672
	*** 0040d6	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0040d9	d1 e6 			shl	si,1
	*** 0040db	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0040df	26 c7 80 92 01 00 00 	mov	WORD PTR es:[bx+402][si],0
;|***             }
; Line 1673
					$I1893:
;|***           } // end interrupt, no DMA
; Line 1674
;|***   
;|***         else
; Line 1676
	*** 0040e6	e9 ab 01 		jmp	$I1894
					$I1881:
;|***           {
; Line 1677
;|***           
;|***           //  do DMA xpr here
;|***           if(t1->txbuffer[i][t1->current_txbuf[i]]->valid==1)
; Line 1680
	*** 0040e9	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0040ec	d1 e6 			shl	si,1
	*** 0040ee	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0040f2	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 0040f5	c1 e7 04 		shl	di,4
	*** 0040f8	26 03 b8 7e 01 		add	di,WORD PTR es:[bx+382][si]
	*** 0040fd	c1 e7 02 		shl	di,2
	*** 004100	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004104	26 c4 99 fa 00 		les	bx,DWORD PTR es:[bx+250][di]
	*** 004109	26 83 3f 01 		cmp	WORD PTR es:[bx],1
	*** 00410d	74 03 			je	$JCC16653
	*** 00410f	e9 82 01 		jmp	$I1895
					$JCC16653:
;|***             {
; Line 1681
;|***             t1->txbuffer[i][t1->current_txbuf[i]]->valid = 0;   
; Line 1682
	*** 004112	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004115	d1 e6 			shl	si,1
	*** 004117	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00411b	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 00411e	c1 e7 04 		shl	di,4
	*** 004121	26 03 b8 7e 01 		add	di,WORD PTR es:[bx+382][si]
	*** 004126	c1 e7 02 		shl	di,2
	*** 004129	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00412d	26 c4 99 fa 00 		les	bx,DWORD PTR es:[bx+250][di]
	*** 004132	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
;|***             t1->txbuffer[i][t1->current_txbuf[i]]->no_bytes =
;|***                 t1->txbuffer[i][t1->current_txbuf[i]]->max;
; Line 1684
	*** 004137	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00413a	d1 e6 			shl	si,1
	*** 00413c	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004140	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 004143	c1 e7 04 		shl	di,4
	*** 004146	26 03 b8 7e 01 		add	di,WORD PTR es:[bx+382][si]
	*** 00414b	c1 e7 02 		shl	di,2
	*** 00414e	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004152	26 c4 99 fa 00 		les	bx,DWORD PTR es:[bx+250][di]
	*** 004157	26 8b 47 04 		mov	ax,WORD PTR es:[bx+4]
	*** 00415b	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00415e	d1 e6 			shl	si,1
	*** 004160	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004164	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 004167	c1 e7 04 		shl	di,4
	*** 00416a	26 03 b8 7e 01 		add	di,WORD PTR es:[bx+382][si]
	*** 00416f	c1 e7 02 		shl	di,2
	*** 004172	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004176	26 c4 99 fa 00 		les	bx,DWORD PTR es:[bx+250][di]
	*** 00417b	26 89 47 02 		mov	WORD PTR es:[bx+2],ax
;|***             t1->istxing[i] = 0;
; Line 1685
	*** 00417f	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004182	d1 e6 			shl	si,1
	*** 004184	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004188	26 c7 80 92 01 00 00 	mov	WORD PTR es:[bx+402][si],0
;|***             t1->current_txbuf[i]++;
; Line 1686
	*** 00418f	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004192	d1 e6 			shl	si,1
	*** 004194	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004198	26 8b 80 7e 01 		mov	ax,WORD PTR es:[bx+382][si]
	*** 00419d	40 			inc	ax
	*** 00419e	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0041a1	d1 e6 			shl	si,1
	*** 0041a3	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0041a7	26 89 80 7e 01 		mov	WORD PTR es:[bx+382][si],ax
;|***             if(t1->current_txbuf[i]==t1->max_txbuf[i])
; Line 1687
	*** 0041ac	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0041af	d1 e6 			shl	si,1
	*** 0041b1	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0041b5	26 8b 80 86 01 		mov	ax,WORD PTR es:[bx+390][si]
	*** 0041ba	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0041bd	d1 e6 			shl	si,1
	*** 0041bf	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0041c3	26 39 80 7e 01 		cmp	WORD PTR es:[bx+382][si],ax
	*** 0041c8	74 03 			je	$JCC16840
	*** 0041ca	e9 10 00 		jmp	$I1896
					$JCC16840:
;|***               {
; Line 1688
;|***               t1->current_txbuf[i]=0;
; Line 1689
	*** 0041cd	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0041d0	d1 e6 			shl	si,1
	*** 0041d2	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0041d6	26 c7 80 7e 01 00 00 	mov	WORD PTR es:[bx+382][si],0
;|***               }
; Line 1690
;|***             if(t1->txbuffer[i][t1->current_txbuf[i]]->valid ==1)
; Line 1691
					$I1896:
	*** 0041dd	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0041e0	d1 e6 			shl	si,1
	*** 0041e2	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0041e6	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 0041e9	c1 e7 04 		shl	di,4
	*** 0041ec	26 03 b8 7e 01 		add	di,WORD PTR es:[bx+382][si]
	*** 0041f1	c1 e7 02 		shl	di,2
	*** 0041f4	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0041f8	26 c4 99 fa 00 		les	bx,DWORD PTR es:[bx+250][di]
	*** 0041fd	26 83 3f 01 		cmp	WORD PTR es:[bx],1
	*** 004201	74 03 			je	$JCC16897
	*** 004203	e9 8e 00 		jmp	$I1897
					$JCC16897:
;|***               {
; Line 1692
;|***               setupdmat(i,t1->txbuffer[i][t1->current_txbuf[i]]->frame,t1->txbuffer[i][t1->current_txbuf[i]]->max);
; Line 1693
	*** 004206	ff 76 f8 		push	WORD PTR [bp-8]	;i
	*** 004209	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00420c	d1 e6 			shl	si,1
	*** 00420e	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004212	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 004215	c1 e7 04 		shl	di,4
	*** 004218	26 03 b8 7e 01 		add	di,WORD PTR es:[bx+382][si]
	*** 00421d	c1 e7 02 		shl	di,2
	*** 004220	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004224	26 8b 81 fa 00 		mov	ax,WORD PTR es:[bx+250][di]
	*** 004229	26 8b 91 fc 00 		mov	dx,WORD PTR es:[bx+252][di]
	*** 00422e	05 06 00 		add	ax,6
	*** 004231	52 			push	dx
	*** 004232	50 			push	ax
	*** 004233	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004236	d1 e6 			shl	si,1
	*** 004238	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00423c	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 00423f	c1 e7 04 		shl	di,4
	*** 004242	26 03 b8 7e 01 		add	di,WORD PTR es:[bx+382][si]
	*** 004247	c1 e7 02 		shl	di,2
	*** 00424a	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00424e	26 c4 99 fa 00 		les	bx,DWORD PTR es:[bx+250][di]
	*** 004253	26 ff 77 04 		push	WORD PTR es:[bx+4]
	*** 004257	ff 76 02 		push	WORD PTR [bp+2]
	*** 00425a	ff 76 00 		push	WORD PTR [bp]	;this
	*** 00425d	9a 00 00 00 00 		call	FAR PTR ?setupdmat@Cescc@@JECXIPEXI@Z	; Cescc::setupdmat
;|***               t1->istxing[i] = 1;
; Line 1694
	*** 004262	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004265	d1 e6 			shl	si,1
	*** 004267	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00426b	26 c7 80 92 01 01 00 	mov	WORD PTR es:[bx+402][si],1
;|***               outp(t1->port_list[i]+CMDR,t1->tx_type[i]);
; Line 1695
	*** 004272	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004275	d1 e6 			shl	si,1
	*** 004277	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00427b	26 ff b0 8e 01 		push	WORD PTR es:[bx+398][si]
	*** 004280	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 004283	d1 e3 			shl	bx,1
	*** 004285	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004289	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 00428c	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004291	83 c4 04 		add	sp,4
;|***               }
; Line 1696
;|***             }  // end if current_txbuf[] == valid         
; Line 1697
					$I1897:
;|***           //t1->tx_port(1, pcm, 96);  
;|***           } // end DMA
; Line 1699
					$I1895:
					$I1894:
;|***         }  // end of HDLC
; Line 1700
;|***     
;|***     
;|***       if(t1->eopmode[i]==OPMODE_ASYNC)
; Line 1703
					$I1879:
	*** 004294	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004297	d1 e6 			shl	si,1
	*** 004299	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00429d	26 83 b8 9e 01 01 	cmp	WORD PTR es:[bx+414][si],1
	*** 0042a3	74 03 			je	$JCC17059
	*** 0042a5	e9 63 03 		jmp	$I1898
					$JCC17059:
;|***         {
; Line 1704
;|***         //transmit data ready interrupt
;|***         if(t1->port_dmat_list[i]==0)
; Line 1706
	*** 0042a8	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0042ab	d1 e6 			shl	si,1
	*** 0042ad	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0042b1	26 83 78 0c 00 		cmp	WORD PTR es:[bx+12][si],0
	*** 0042b6	74 03 			je	$JCC17078
	*** 0042b8	e9 b1 01 		jmp	$I1899
					$JCC17078:
;|***           {
; Line 1707
;|***           itxbuf = (t1->txbuffer[i][t1->current_txbuf[i]]);
; Line 1708
	*** 0042bb	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0042be	d1 e6 			shl	si,1
	*** 0042c0	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0042c4	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 0042c7	c1 e7 04 		shl	di,4
	*** 0042ca	26 03 b8 7e 01 		add	di,WORD PTR es:[bx+382][si]
	*** 0042cf	c1 e7 02 		shl	di,2
	*** 0042d2	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0042d6	26 8b 81 fa 00 		mov	ax,WORD PTR es:[bx+250][di]
	*** 0042db	26 8b 91 fc 00 		mov	dx,WORD PTR es:[bx+252][di]
	*** 0042e0	89 46 de 		mov	WORD PTR [bp-34],ax	;itxbuf
	*** 0042e3	89 56 e0 		mov	WORD PTR [bp-32],dx
;|***           bloc = (unsigned far *)itxbuf->frame;
; Line 1709
	*** 0042e6	8b 46 de 		mov	ax,WORD PTR [bp-34]	;itxbuf
	*** 0042e9	8b 56 e0 		mov	dx,WORD PTR [bp-32]
	*** 0042ec	05 06 00 		add	ax,6
	*** 0042ef	89 46 e8 		mov	WORD PTR [bp-24],ax	;bloc
	*** 0042f2	89 56 ea 		mov	WORD PTR [bp-22],dx
;|***           if(itxbuf->valid==1)
; Line 1710
	*** 0042f5	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 0042f8	26 83 3f 01 		cmp	WORD PTR es:[bx],1
	*** 0042fc	74 03 			je	$JCC17148
	*** 0042fe	e9 58 01 		jmp	$I1901
					$JCC17148:
;|***             {
; Line 1711
;|***             if((itxbuf->max - itxbuf->no_bytes) > 32)
; Line 1712
	*** 004301	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 004304	26 8b 47 04 		mov	ax,WORD PTR es:[bx+4]
	*** 004308	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 00430b	26 2b 47 02 		sub	ax,WORD PTR es:[bx+2]
	*** 00430f	3d 20 00 		cmp	ax,32	;0020H
	*** 004312	77 03 			ja	$JCC17170
	*** 004314	e9 7d 00 		jmp	$I1902
					$JCC17170:
;|***               {
; Line 1713
;|***               //do send 32
;|***               for(j=(itxbuf->no_bytes)>>1;j<(itxbuf->no_bytes>>1)+16;j++)
; Line 1715
	*** 004317	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 00431a	26 8b 47 02 		mov	ax,WORD PTR es:[bx+2]
	*** 00431e	d1 e8 			shr	ax,1
	*** 004320	89 46 f4 		mov	WORD PTR [bp-12],ax	;j
	*** 004323	e9 03 00 		jmp	$F1903
					$FC1904:
	*** 004326	ff 46 f4 		inc	WORD PTR [bp-12]	;j
					$F1903:
	*** 004329	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 00432c	26 8b 47 02 		mov	ax,WORD PTR es:[bx+2]
	*** 004330	d1 e8 			shr	ax,1
	*** 004332	05 10 00 		add	ax,16	;0010H
	*** 004335	3b 46 f4 		cmp	ax,WORD PTR [bp-12]	;j
	*** 004338	77 03 			ja	$JCC17208
	*** 00433a	e9 26 00 		jmp	$FB1905
					$JCC17208:
;|***               outpw(t1->port_list[i]+FIFO,bloc[j]); 
; Line 1716
	*** 00433d	8b 5e f4 		mov	bx,WORD PTR [bp-12]	;j
	*** 004340	d1 e3 			shl	bx,1
	*** 004342	c4 76 e8 		les	si,DWORD PTR [bp-24]	;bloc
	*** 004345	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 004348	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 00434b	d1 e3 			shl	bx,1
	*** 00434d	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004351	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 004354	05 20 00 		add	ax,32	;0020H
	*** 004357	50 			push	ax
	*** 004358	9a 00 00 00 00 		call	FAR PTR _outpw
	*** 00435d	83 c4 04 		add	sp,4
	*** 004360	e9 c3 ff 		jmp	$FC1904
					$FB1905:
;|***               outp(t1->port_list[i]+CMDR,0x08);
; Line 1717
	*** 004363	6a 08 			push	8
	*** 004365	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 004368	d1 e3 			shl	bx,1
	*** 00436a	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00436e	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 004371	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004376	83 c4 04 		add	sp,4
;|***               itxbuf->no_bytes += 32;
; Line 1718
	*** 004379	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 00437c	26 83 47 02 20 		add	WORD PTR es:[bx+2],32	;0020H
;|***               t1->istxing[i] = 1;
; Line 1719
	*** 004381	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004384	d1 e6 			shl	si,1
	*** 004386	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00438a	26 c7 80 92 01 01 00 	mov	WORD PTR es:[bx+402][si],1
;|***               }
; Line 1720
;|***             else
; Line 1721
	*** 004391	e9 c2 00 		jmp	$I1906
					$I1902:
;|***               {
; Line 1722
;|***               //do send <=32 //sending as byte accesses such that odd bytes can go out
;|***               for(j=itxbuf->no_bytes;j<itxbuf->max;j++)
; Line 1724
	*** 004394	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 004397	26 8b 47 02 		mov	ax,WORD PTR es:[bx+2]
	*** 00439b	89 46 f4 		mov	WORD PTR [bp-12],ax	;j
	*** 00439e	e9 03 00 		jmp	$F1907
					$FC1908:
	*** 0043a1	ff 46 f4 		inc	WORD PTR [bp-12]	;j
					$F1907:
	*** 0043a4	8b 46 f4 		mov	ax,WORD PTR [bp-12]	;j
	*** 0043a7	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 0043aa	26 39 47 04 		cmp	WORD PTR es:[bx+4],ax
	*** 0043ae	77 03 			ja	$JCC17326
	*** 0043b0	e9 29 00 		jmp	$FB1909
					$JCC17326:
;|***               outp(t1->port_list[i]+FIFO,itxbuf->frame[j]);
; Line 1725
	*** 0043b3	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 0043b6	83 c3 06 		add	bx,6
	*** 0043b9	8b 76 f4 		mov	si,WORD PTR [bp-12]	;j
	*** 0043bc	26 8a 00 		mov	al,BYTE PTR es:[bx][si]
	*** 0043bf	98 			cbw	
	*** 0043c0	50 			push	ax
	*** 0043c1	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 0043c4	d1 e3 			shl	bx,1
	*** 0043c6	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0043ca	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 0043cd	05 20 00 		add	ax,32	;0020H
	*** 0043d0	50 			push	ax
	*** 0043d1	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0043d6	83 c4 04 		add	sp,4
	*** 0043d9	e9 c5 ff 		jmp	$FC1908
					$FB1909:
;|***               outp(t1->port_list[i]+CMDR,0x08);
; Line 1726
	*** 0043dc	6a 08 			push	8
	*** 0043de	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 0043e1	d1 e3 			shl	bx,1
	*** 0043e3	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0043e7	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 0043ea	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0043ef	83 c4 04 		add	sp,4
;|***               itxbuf->no_bytes = itxbuf->max;
; Line 1727
	*** 0043f2	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 0043f5	26 8b 47 04 		mov	ax,WORD PTR es:[bx+4]
	*** 0043f9	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 0043fc	26 89 47 02 		mov	WORD PTR es:[bx+2],ax
;|***               itxbuf->valid = 0;
; Line 1728
	*** 004400	c4 5e de 		les	bx,DWORD PTR [bp-34]	;itxbuf
	*** 004403	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
;|***               t1->current_txbuf[i]++;
; Line 1729
	*** 004408	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00440b	d1 e6 			shl	si,1
	*** 00440d	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004411	26 8b 80 7e 01 		mov	ax,WORD PTR es:[bx+382][si]
	*** 004416	40 			inc	ax
	*** 004417	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00441a	d1 e6 			shl	si,1
	*** 00441c	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004420	26 89 80 7e 01 		mov	WORD PTR es:[bx+382][si],ax
;|***               if(t1->current_txbuf[i]==t1->max_txbuf[i])
; Line 1730
	*** 004425	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004428	d1 e6 			shl	si,1
	*** 00442a	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00442e	26 8b 80 86 01 		mov	ax,WORD PTR es:[bx+390][si]
	*** 004433	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004436	d1 e6 			shl	si,1
	*** 004438	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00443c	26 39 80 7e 01 		cmp	WORD PTR es:[bx+382][si],ax
	*** 004441	74 03 			je	$JCC17473
	*** 004443	e9 10 00 		jmp	$I1910
					$JCC17473:
;|***                 t1->current_txbuf[i] = 0;
; Line 1731
	*** 004446	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004449	d1 e6 			shl	si,1
	*** 00444b	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00444f	26 c7 80 7e 01 00 00 	mov	WORD PTR es:[bx+382][si],0
;|***               //goto try_again_tx;
;|***               }
; Line 1733
					$I1910:
					$I1906:
;|***             }
; Line 1734
;|***           else
; Line 1735
	*** 004456	e9 10 00 		jmp	$I1911
					$I1901:
;|***             {
; Line 1736
;|***             t1->istxing[i] = 0; //no valid frames we are done txing
; Line 1737
	*** 004459	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00445c	d1 e6 			shl	si,1
	*** 00445e	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004462	26 c7 80 92 01 00 00 	mov	WORD PTR es:[bx+402][si],0
;|***             }
; Line 1738
					$I1911:
;|***           }
; Line 1739
;|***         else
; Line 1740
	*** 004469	e9 9f 01 		jmp	$I1912
					$I1899:
;|***           {
; Line 1741
;|***           //do DMA xpr here
;|***           if(t1->txbuffer[i][t1->current_txbuf[i]]->valid==1)
; Line 1743
	*** 00446c	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00446f	d1 e6 			shl	si,1
	*** 004471	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004475	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 004478	c1 e7 04 		shl	di,4
	*** 00447b	26 03 b8 7e 01 		add	di,WORD PTR es:[bx+382][si]
	*** 004480	c1 e7 02 		shl	di,2
	*** 004483	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004487	26 c4 99 fa 00 		les	bx,DWORD PTR es:[bx+250][di]
	*** 00448c	26 83 3f 01 		cmp	WORD PTR es:[bx],1
	*** 004490	74 03 			je	$JCC17552
	*** 004492	e9 76 01 		jmp	$I1913
					$JCC17552:
;|***             {
; Line 1744
;|***             t1->txbuffer[i][t1->current_txbuf[i]]->valid = 0;   
; Line 1745
	*** 004495	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004498	d1 e6 			shl	si,1
	*** 00449a	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00449e	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 0044a1	c1 e7 04 		shl	di,4
	*** 0044a4	26 03 b8 7e 01 		add	di,WORD PTR es:[bx+382][si]
	*** 0044a9	c1 e7 02 		shl	di,2
	*** 0044ac	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0044b0	26 c4 99 fa 00 		les	bx,DWORD PTR es:[bx+250][di]
	*** 0044b5	26 c7 07 00 00 		mov	WORD PTR es:[bx],0
;|***             t1->txbuffer[i][t1->current_txbuf[i]]->no_bytes = t1->txbuffer[i][t1->current_txbuf[i]]->max;
; Line 1746
	*** 0044ba	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0044bd	d1 e6 			shl	si,1
	*** 0044bf	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0044c3	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 0044c6	c1 e7 04 		shl	di,4
	*** 0044c9	26 03 b8 7e 01 		add	di,WORD PTR es:[bx+382][si]
	*** 0044ce	c1 e7 02 		shl	di,2
	*** 0044d1	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0044d5	26 c4 99 fa 00 		les	bx,DWORD PTR es:[bx+250][di]
	*** 0044da	26 8b 47 04 		mov	ax,WORD PTR es:[bx+4]
	*** 0044de	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0044e1	d1 e6 			shl	si,1
	*** 0044e3	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0044e7	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 0044ea	c1 e7 04 		shl	di,4
	*** 0044ed	26 03 b8 7e 01 		add	di,WORD PTR es:[bx+382][si]
	*** 0044f2	c1 e7 02 		shl	di,2
	*** 0044f5	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0044f9	26 c4 99 fa 00 		les	bx,DWORD PTR es:[bx+250][di]
	*** 0044fe	26 89 47 02 		mov	WORD PTR es:[bx+2],ax
;|***             t1->istxing[i] = 0;
; Line 1747
	*** 004502	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004505	d1 e6 			shl	si,1
	*** 004507	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00450b	26 c7 80 92 01 00 00 	mov	WORD PTR es:[bx+402][si],0
;|***             t1->current_txbuf[i]++;
; Line 1748
	*** 004512	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004515	d1 e6 			shl	si,1
	*** 004517	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00451b	26 8b 80 7e 01 		mov	ax,WORD PTR es:[bx+382][si]
	*** 004520	40 			inc	ax
	*** 004521	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004524	d1 e6 			shl	si,1
	*** 004526	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00452a	26 89 80 7e 01 		mov	WORD PTR es:[bx+382][si],ax
;|***             if(t1->current_txbuf[i]==t1->max_txbuf[i]) t1->current_txbuf[i]=0;
; Line 1749
	*** 00452f	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004532	d1 e6 			shl	si,1
	*** 004534	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004538	26 8b 80 86 01 		mov	ax,WORD PTR es:[bx+390][si]
	*** 00453d	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004540	d1 e6 			shl	si,1
	*** 004542	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004546	26 39 80 7e 01 		cmp	WORD PTR es:[bx+382][si],ax
	*** 00454b	74 03 			je	$JCC17739
	*** 00454d	e9 10 00 		jmp	$I1914
					$JCC17739:
	*** 004550	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004553	d1 e6 			shl	si,1
	*** 004555	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004559	26 c7 80 7e 01 00 00 	mov	WORD PTR es:[bx+382][si],0
;|***             if(t1->txbuffer[i][t1->current_txbuf[i]]->valid ==1)
; Line 1750
					$I1914:
	*** 004560	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 004563	d1 e6 			shl	si,1
	*** 004565	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004569	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 00456c	c1 e7 04 		shl	di,4
	*** 00456f	26 03 b8 7e 01 		add	di,WORD PTR es:[bx+382][si]
	*** 004574	c1 e7 02 		shl	di,2
	*** 004577	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00457b	26 c4 99 fa 00 		les	bx,DWORD PTR es:[bx+250][di]
	*** 004580	26 83 3f 01 		cmp	WORD PTR es:[bx],1
	*** 004584	74 03 			je	$JCC17796
	*** 004586	e9 82 00 		jmp	$I1915
					$JCC17796:
;|***               {
; Line 1751
;|***               setupdmat(i,t1->txbuffer[i][t1->current_txbuf[i]]->frame,t1->txbuffer[i][t1->current_txbuf[i]]->max);
; Line 1752
	*** 004589	ff 76 f8 		push	WORD PTR [bp-8]	;i
	*** 00458c	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 00458f	d1 e6 			shl	si,1
	*** 004591	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004595	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 004598	c1 e7 04 		shl	di,4
	*** 00459b	26 03 b8 7e 01 		add	di,WORD PTR es:[bx+382][si]
	*** 0045a0	c1 e7 02 		shl	di,2
	*** 0045a3	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0045a7	26 8b 81 fa 00 		mov	ax,WORD PTR es:[bx+250][di]
	*** 0045ac	26 8b 91 fc 00 		mov	dx,WORD PTR es:[bx+252][di]
	*** 0045b1	05 06 00 		add	ax,6
	*** 0045b4	52 			push	dx
	*** 0045b5	50 			push	ax
	*** 0045b6	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0045b9	d1 e6 			shl	si,1
	*** 0045bb	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0045bf	8b 7e f8 		mov	di,WORD PTR [bp-8]	;i
	*** 0045c2	c1 e7 04 		shl	di,4
	*** 0045c5	26 03 b8 7e 01 		add	di,WORD PTR es:[bx+382][si]
	*** 0045ca	c1 e7 02 		shl	di,2
	*** 0045cd	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0045d1	26 c4 99 fa 00 		les	bx,DWORD PTR es:[bx+250][di]
	*** 0045d6	26 ff 77 04 		push	WORD PTR es:[bx+4]
	*** 0045da	ff 76 02 		push	WORD PTR [bp+2]
	*** 0045dd	ff 76 00 		push	WORD PTR [bp]	;this
	*** 0045e0	9a 00 00 00 00 		call	FAR PTR ?setupdmat@Cescc@@JECXIPEXI@Z	; Cescc::setupdmat
;|***               t1->istxing[i] = 1;
; Line 1753
	*** 0045e5	8b 76 f8 		mov	si,WORD PTR [bp-8]	;i
	*** 0045e8	d1 e6 			shl	si,1
	*** 0045ea	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0045ee	26 c7 80 92 01 01 00 	mov	WORD PTR es:[bx+402][si],1
;|***               outp(t1->port_list[i]+CMDR,0x08);
; Line 1754
	*** 0045f5	6a 08 			push	8
	*** 0045f7	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 0045fa	d1 e3 			shl	bx,1
	*** 0045fc	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004600	26 ff 30 		push	WORD PTR es:[bx][si]
	*** 004603	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004608	83 c4 04 		add	sp,4
;|***               }  // end if()
; Line 1755
;|***             }  // end if()
; Line 1756
					$I1915:
;|***           }  // end else do DMA
; Line 1757
					$I1913:
					$I1912:
;|***         } // end do ASYNC
; Line 1758
;|***       }  // end XPR
; Line 1759
					$I1898:
;|***         
;|***     
;|***     if((pis&0x80)==0x80)
; Line 1762
					$I1878:
	*** 00460b	8a 46 fa 		mov	al,BYTE PTR [bp-6]	;pis
	*** 00460e	24 80 			and	al,128	;0080H
	*** 004610	3c 80 			cmp	al,128	;0080H
	*** 004612	74 03 			je	$JCC17938
	*** 004614	e9 00 00 		jmp	$I1916
					$JCC17938:
;|***       {
; Line 1763
;|***       //DMA TC reached
;|***       }               
; Line 1765
;|***       
;|***     
;|***     if((pis&0x40)==0x40)
; Line 1768
					$I1916:
	*** 004617	8a 46 fa 		mov	al,BYTE PTR [bp-6]	;pis
	*** 00461a	24 40 			and	al,64	;0040H
	*** 00461c	3c 40 			cmp	al,64	;0040H
	*** 00461e	74 03 			je	$JCC17950
	*** 004620	e9 14 00 		jmp	$I1917
					$JCC17950:
;|***       {
; Line 1769
;|***       if((_inp(0x240+PVR) & 0x40) == 0x40);
; Line 1770
	*** 004623	68 5c 02 		push	604	;025cH
	*** 004626	9a 00 00 00 00 		call	FAR PTR __inp
	*** 00462b	83 c4 02 		add	sp,2
	*** 00462e	24 40 			and	al,64	;0040H
	*** 004630	3c 40 			cmp	al,64	;0040H
	*** 004632	74 03 			je	$JCC17970
	*** 004634	e9 00 00 		jmp	$I1918
					$JCC17970:
;|***         //com_request = 1;     //DSR channel 1 changed
;|***       }
; Line 1772
					$I1918:
;|***     
;|***     
;|***     if((pis&0x20)==0x20)
; Line 1775
					$I1917:
	*** 004637	8a 46 fa 		mov	al,BYTE PTR [bp-6]	;pis
	*** 00463a	24 20 			and	al,32	;0020H
	*** 00463c	3c 20 			cmp	al,32	;0020H
	*** 00463e	74 03 			je	$JCC17982
	*** 004640	e9 00 00 		jmp	$I1919
					$JCC17982:
;|***       {
; Line 1776
;|***       //DSR channel 0 changed
;|***       }
; Line 1778
;|***         
;|***     nextpt:
; Line 1780
					$I1919:
					$nextpt1760:
;|***     
;|***   
;|***     // restore escc ports to channel
;|***     //  that was active when ISR started
;|***     outp(t1->port_list[i]+PVR,(inp(t1->port_list[i]+PVR)&0xfe)+chanstor); //set channel
; Line 1785
	*** 004643	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 004646	d1 e3 			shl	bx,1
	*** 004648	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00464c	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00464f	05 1c 00 		add	ax,28	;001cH
	*** 004652	50 			push	ax
	*** 004653	9a 00 00 00 00 		call	FAR PTR _inp
	*** 004658	83 c4 02 		add	sp,2
	*** 00465b	25 fe 00 		and	ax,254	;00feH
	*** 00465e	03 46 f6 		add	ax,WORD PTR [bp-10]	;chanstor
	*** 004661	50 			push	ax
	*** 004662	8b 5e f8 		mov	bx,WORD PTR [bp-8]	;i
	*** 004665	d1 e3 			shl	bx,1
	*** 004667	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 00466b	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 00466e	05 1c 00 		add	ax,28	;001cH
	*** 004671	50 			push	ax
	*** 004672	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004677	83 c4 04 		add	sp,4
;|***     
;|***     }  // end for all open ports
; Line 1787
	*** 00467a	e9 85 e0 		jmp	$FC1756
					$FB1757:
;|***   
;|***   if(inthit==1) goto startisr;
; Line 1789
	*** 00467d	83 7e f0 01 		cmp	WORD PTR [bp-16],1	;inthit
	*** 004681	74 03 			je	$JCC18049
	*** 004683	e9 03 00 		jmp	$I1920
					$JCC18049:
	*** 004686	e9 6c e0 		jmp	$startisr1754
;|***   
;|***   //_disable();  // rem out 12/08/03
;|***   
;|*** /*
;|***   if(ok_to_tx)
;|***     {
;|***     ok_to_tx = 0;
;|***     t1->tx_port(1, pcm,96);
;|***     }
;|*** */  
;|***   // no more interrupts set
;|***   // do eoi's and leave
;|***   outp(0x20,0x20);
; Line 1802
					$I1920:
	*** 004689	6a 20 			push	32	;0020H
	*** 00468b	6a 20 			push	32	;0020H
	*** 00468d	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004692	83 c4 04 		add	sp,4
;|***   if(t1->upper_irq!=0) outp(0xa0,0x20);
; Line 1803
	*** 004695	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004699	26 83 7f 78 00 		cmp	WORD PTR es:[bx+120],0
	*** 00469e	75 03 			jne	$JCC18078
	*** 0046a0	e9 0d 00 		jmp	$I1921
					$JCC18078:
	*** 0046a3	6a 20 			push	32	;0020H
	*** 0046a5	68 a0 00 		push	160	;00a0H
	*** 0046a8	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0046ad	83 c4 04 		add	sp,4
;|***   } //  end isr
; Line 1804
					$I1921:
	*** 0046b0	e9 06 00 		jmp	$EX1734
					$TH161763:
	*** 0046b3	e9 8d ff 		jmp	$nextpt1760
					$TH161761:
	*** 0046b6	e9 8a ff 		jmp	$nextpt1760
					$EX1734:
	*** 0046b9	8b e5 			mov	sp,bp
	*** 0046bb	07 			pop	es
	*** 0046bc	1f 			pop	ds
	ASSUME DS: DGROUP
	*** 0046bd	61 			popa
	*** 0046be	cf 			iret	

?escc_isr@Cescc@@JEAXXZ	ENDP
	PUBLIC	?setupdmat@Cescc@@JECXIPEXI@Z	; Cescc::setupdmat
?setupdmat@Cescc@@JECXIPEXI@Z	PROC FAR	; Cescc::setupdmat
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** void Cescc::setupdmat(unsigned port, void far *address,unsigned numbytes)
;|***   {
; Line 1812
	*** 0046bf	c8 0a 00 00 		enter	10,0
	*** 0046c3	57 			push	di
	*** 0046c4	56 			push	si
;	i = -2
;	size = -4
;	linaddress = -8
;	chanstor = -10
;	this = 6
;	port = 16
;	address = 12
;	numbytes = 10
;|***   unsigned i,size;
;|***   unsigned long linaddress;
;|***   unsigned chanstor;
;|***   
;|***   if (numbytes == 0) size = FRAME_SIZE;
; Line 1817
	*** 0046c5	83 7e 0a 00 		cmp	WORD PTR [bp+10],0	;numbytes
	*** 0046c9	74 03 			je	$JCC18121
	*** 0046cb	e9 08 00 		jmp	$I1931
					$JCC18121:
	*** 0046ce	c7 46 fc 00 04 		mov	WORD PTR [bp-4],1024	;0400H	;size
;|***   else size = numbytes;
; Line 1818
	*** 0046d3	e9 06 00 		jmp	$I1932
					$I1931:
	*** 0046d6	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;numbytes
	*** 0046d9	89 46 fc 		mov	WORD PTR [bp-4],ax	;size
					$I1932:
;|***   
;|***   if(t1->port_dmat_list[port]>3)
; Line 1820
	*** 0046dc	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0046e0	83 c3 0c 		add	bx,12	;000cH
	*** 0046e3	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 0046e6	d1 e6 			shl	si,1
	*** 0046e8	26 83 38 03 		cmp	WORD PTR es:[bx][si],3
	*** 0046ec	77 03 			ja	$JCC18156
	*** 0046ee	e9 10 00 		jmp	$I1933
					$JCC18156:
;|***     {
; Line 1821
;|***     size = (size/2) +(numbytes&1);//word transfers...half the size..add 1 for odd bytelenghts
; Line 1822
	*** 0046f1	8b 46 fc 		mov	ax,WORD PTR [bp-4]	;size
	*** 0046f4	d1 e8 			shr	ax,1
	*** 0046f6	8a 4e 0a 		mov	cl,BYTE PTR [bp+10]	;numbytes
	*** 0046f9	83 e1 01 		and	cx,1
	*** 0046fc	03 c1 			add	ax,cx
	*** 0046fe	89 46 fc 		mov	WORD PTR [bp-4],ax	;size
;|***     }
; Line 1823
;|*** 
;|***   if(t1->port_dmat_list[port]==1)
; Line 1825
					$I1933:
	*** 004701	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004705	83 c3 0c 		add	bx,12	;000cH
	*** 004708	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 00470b	d1 e6 			shl	si,1
	*** 00470d	26 83 38 01 		cmp	WORD PTR es:[bx][si],1
	*** 004711	74 03 			je	$JCC18193
	*** 004713	e9 d4 00 		jmp	$I1934
					$JCC18193:
;|***     {
; Line 1826
;|***     outp(DMA_COMMAND_LO,4);             //disables 8 bit dma
; Line 1827
	*** 004716	6a 04 			push	4
	*** 004718	6a 08 			push	8
	*** 00471a	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00471f	83 c4 04 		add	sp,4
;|***     outp(DMA_MODE_LO,0x19);             //sets demand xfer on ch1
; Line 1828
	*** 004722	6a 19 			push	25	;0019H
	*** 004724	6a 0b 			push	11	;000bH
	*** 004726	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00472b	83 c4 04 		add	sp,4
;|***     outp(DMA_CLEAR_FFLO,0);             //reset count hi/lo
; Line 1829
	*** 00472e	6a 00 			push	0
	*** 004730	6a 0c 			push	12	;000cH
	*** 004732	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004737	83 c4 04 		add	sp,4
;|***     outp(DMA_COUNT_CH1,(size-1)&0xff);    //program byte count 
; Line 1830
	*** 00473a	8a 46 fc 		mov	al,BYTE PTR [bp-4]	;size
	*** 00473d	fe c8 			dec	al
	*** 00473f	2a e4 			sub	ah,ah
	*** 004741	50 			push	ax
	*** 004742	6a 03 			push	3
	*** 004744	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004749	83 c4 04 		add	sp,4
;|***     outp(DMA_COUNT_CH1,(size-1)>>8);      //controller will do 
; Line 1831
	*** 00474c	8b 46 fc 		mov	ax,WORD PTR [bp-4]	;size
	*** 00474f	48 			dec	ax
	*** 004750	8a c4 			mov	al,ah
	*** 004752	2a e4 			sub	ah,ah
	*** 004754	50 			push	ax
	*** 004755	6a 03 			push	3
	*** 004757	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00475c	83 c4 04 		add	sp,4
;|***     linaddress = (((unsigned long)address & 0xffff0000)>>12) + ((unsigned long)address & 0xffff);
; Line 1832
	*** 00475f	8b 46 0c 		mov	ax,WORD PTR [bp+12]	;address
	*** 004762	8b 56 0e 		mov	dx,WORD PTR [bp+14]
	*** 004765	25 ff 0f 		and	ax,4095	;0fffH
	*** 004768	83 e2 ff 		and	dx,-1	;ffffH
	*** 00476b	d1 e0 			shl	ax,1
	*** 00476d	d1 d2 			rcl	dx,1
	*** 00476f	d1 d0 			rcl	ax,1
	*** 004771	d1 d2 			rcl	dx,1
	*** 004773	d1 d0 			rcl	ax,1
	*** 004775	d1 d2 			rcl	dx,1
	*** 004777	d1 d0 			rcl	ax,1
	*** 004779	d1 d2 			rcl	dx,1
	*** 00477b	d1 d0 			rcl	ax,1
	*** 00477d	92 			xchg	ax,dx
	*** 00477e	83 e2 0f 		and	dx,15	;000fH
	*** 004781	03 46 0c 		add	ax,WORD PTR [bp+12]	;address
	*** 004784	83 d2 00 		adc	dx,0
	*** 004787	89 46 f8 		mov	WORD PTR [bp-8],ax	;linaddress
	*** 00478a	89 56 fa 		mov	WORD PTR [bp-6],dx
;|***     outp(DMA_PAGE_CH1,(char)(linaddress>>16));             //calculate linear address of buffer
; Line 1833
	*** 00478d	8a 46 fa 		mov	al,BYTE PTR [bp-6]
	*** 004790	98 			cbw	
	*** 004791	50 			push	ax
	*** 004792	68 83 00 		push	131	;0083H
	*** 004795	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00479a	83 c4 04 		add	sp,4
;|***     outp(DMA_CLEAR_FFLO,0);                     //and store in DMA controller
; Line 1834
	*** 00479d	6a 00 			push	0
	*** 00479f	6a 0c 			push	12	;000cH
	*** 0047a1	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0047a6	83 c4 04 		add	sp,4
;|***     outp(DMA_ADD_CH1,(char)(linaddress&0xff));
; Line 1835
	*** 0047a9	8a 46 f8 		mov	al,BYTE PTR [bp-8]	;linaddress
	*** 0047ac	98 			cbw	
	*** 0047ad	50 			push	ax
	*** 0047ae	6a 02 			push	2
	*** 0047b0	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0047b5	83 c4 04 		add	sp,4
;|***     outp(DMA_ADD_CH1,(char)(linaddress>>8));
; Line 1836
	*** 0047b8	8b 46 f8 		mov	ax,WORD PTR [bp-8]	;linaddress
	*** 0047bb	8b 56 fa 		mov	dx,WORD PTR [bp-6]
	*** 0047be	8a c4 			mov	al,ah
	*** 0047c0	8a e2 			mov	ah,dl
	*** 0047c2	8a d6 			mov	dl,dh
	*** 0047c4	2a f6 			sub	dh,dh
	*** 0047c6	98 			cbw	
	*** 0047c7	50 			push	ax
	*** 0047c8	6a 02 			push	2
	*** 0047ca	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0047cf	83 c4 04 		add	sp,4
;|***     outp(DMA_MASK_LO,1);                        //enable ch1 mask
; Line 1837
	*** 0047d2	6a 01 			push	1
	*** 0047d4	6a 0a 			push	10	;000aH
	*** 0047d6	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0047db	83 c4 04 		add	sp,4
;|***     outp(DMA_COMMAND_LO,0);                     //enable 8bit dma
; Line 1838
	*** 0047de	6a 00 			push	0
	*** 0047e0	6a 08 			push	8
	*** 0047e2	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0047e7	83 c4 04 		add	sp,4
;|***     }
; Line 1839
;|***   
;|***   if(t1->port_dmat_list[port]==3)
; Line 1841
					$I1934:
	*** 0047ea	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0047ee	83 c3 0c 		add	bx,12	;000cH
	*** 0047f1	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 0047f4	d1 e6 			shl	si,1
	*** 0047f6	26 83 38 03 		cmp	WORD PTR es:[bx][si],3
	*** 0047fa	74 03 			je	$JCC18426
	*** 0047fc	e9 d4 00 		jmp	$I1940
					$JCC18426:
;|***     {
; Line 1842
;|***     outp(DMA_COMMAND_LO,4);
; Line 1843
	*** 0047ff	6a 04 			push	4
	*** 004801	6a 08 			push	8
	*** 004803	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004808	83 c4 04 		add	sp,4
;|***     outp(DMA_MODE_LO,0x1B);
; Line 1844
	*** 00480b	6a 1b 			push	27	;001bH
	*** 00480d	6a 0b 			push	11	;000bH
	*** 00480f	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004814	83 c4 04 		add	sp,4
;|***     outp(DMA_CLEAR_FFLO,0);
; Line 1845
	*** 004817	6a 00 			push	0
	*** 004819	6a 0c 			push	12	;000cH
	*** 00481b	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004820	83 c4 04 		add	sp,4
;|***     outp(DMA_COUNT_CH3,(size-1)&0xff);
; Line 1846
	*** 004823	8a 46 fc 		mov	al,BYTE PTR [bp-4]	;size
	*** 004826	fe c8 			dec	al
	*** 004828	2a e4 			sub	ah,ah
	*** 00482a	50 			push	ax
	*** 00482b	6a 07 			push	7
	*** 00482d	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004832	83 c4 04 		add	sp,4
;|***     outp(DMA_COUNT_CH3,(size-1)>>8);
; Line 1847
	*** 004835	8b 46 fc 		mov	ax,WORD PTR [bp-4]	;size
	*** 004838	48 			dec	ax
	*** 004839	8a c4 			mov	al,ah
	*** 00483b	2a e4 			sub	ah,ah
	*** 00483d	50 			push	ax
	*** 00483e	6a 07 			push	7
	*** 004840	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004845	83 c4 04 		add	sp,4
;|***     linaddress = (((unsigned long)address & 0xffff0000)>>12) + ((unsigned long)address & 0xffff);
; Line 1848
	*** 004848	8b 46 0c 		mov	ax,WORD PTR [bp+12]	;address
	*** 00484b	8b 56 0e 		mov	dx,WORD PTR [bp+14]
	*** 00484e	25 ff 0f 		and	ax,4095	;0fffH
	*** 004851	83 e2 ff 		and	dx,-1	;ffffH
	*** 004854	d1 e0 			shl	ax,1
	*** 004856	d1 d2 			rcl	dx,1
	*** 004858	d1 d0 			rcl	ax,1
	*** 00485a	d1 d2 			rcl	dx,1
	*** 00485c	d1 d0 			rcl	ax,1
	*** 00485e	d1 d2 			rcl	dx,1
	*** 004860	d1 d0 			rcl	ax,1
	*** 004862	d1 d2 			rcl	dx,1
	*** 004864	d1 d0 			rcl	ax,1
	*** 004866	92 			xchg	ax,dx
	*** 004867	83 e2 0f 		and	dx,15	;000fH
	*** 00486a	03 46 0c 		add	ax,WORD PTR [bp+12]	;address
	*** 00486d	83 d2 00 		adc	dx,0
	*** 004870	89 46 f8 		mov	WORD PTR [bp-8],ax	;linaddress
	*** 004873	89 56 fa 		mov	WORD PTR [bp-6],dx
;|***     outp(DMA_PAGE_CH3,(char)(linaddress>>16));
; Line 1849
	*** 004876	8a 46 fa 		mov	al,BYTE PTR [bp-6]
	*** 004879	98 			cbw	
	*** 00487a	50 			push	ax
	*** 00487b	68 82 00 		push	130	;0082H
	*** 00487e	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004883	83 c4 04 		add	sp,4
;|***     outp(DMA_CLEAR_FFLO,0);
; Line 1850
	*** 004886	6a 00 			push	0
	*** 004888	6a 0c 			push	12	;000cH
	*** 00488a	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00488f	83 c4 04 		add	sp,4
;|***     outp(DMA_ADD_CH3,(char)(linaddress&0xff));
; Line 1851
	*** 004892	8a 46 f8 		mov	al,BYTE PTR [bp-8]	;linaddress
	*** 004895	98 			cbw	
	*** 004896	50 			push	ax
	*** 004897	6a 06 			push	6
	*** 004899	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00489e	83 c4 04 		add	sp,4
;|***     outp(DMA_ADD_CH3,(char)(linaddress>>8));
; Line 1852
	*** 0048a1	8b 46 f8 		mov	ax,WORD PTR [bp-8]	;linaddress
	*** 0048a4	8b 56 fa 		mov	dx,WORD PTR [bp-6]
	*** 0048a7	8a c4 			mov	al,ah
	*** 0048a9	8a e2 			mov	ah,dl
	*** 0048ab	8a d6 			mov	dl,dh
	*** 0048ad	2a f6 			sub	dh,dh
	*** 0048af	98 			cbw	
	*** 0048b0	50 			push	ax
	*** 0048b1	6a 06 			push	6
	*** 0048b3	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0048b8	83 c4 04 		add	sp,4
;|***     outp(DMA_MASK_LO,3);
; Line 1853
	*** 0048bb	6a 03 			push	3
	*** 0048bd	6a 0a 			push	10	;000aH
	*** 0048bf	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0048c4	83 c4 04 		add	sp,4
;|***     outp(DMA_COMMAND_LO,0);
; Line 1854
	*** 0048c7	6a 00 			push	0
	*** 0048c9	6a 08 			push	8
	*** 0048cb	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0048d0	83 c4 04 		add	sp,4
;|***     }
; Line 1855
;|***   
;|***   if(t1->port_dmat_list[port]==5)
; Line 1857
					$I1940:
	*** 0048d3	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0048d7	83 c3 0c 		add	bx,12	;000cH
	*** 0048da	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 0048dd	d1 e6 			shl	si,1
	*** 0048df	26 83 38 05 		cmp	WORD PTR es:[bx][si],5
	*** 0048e3	74 03 			je	$JCC18659
	*** 0048e5	e9 e4 00 		jmp	$I1946
					$JCC18659:
;|***     {
; Line 1858
;|***     outp(DMA_COMMAND_HI,4);     //disable dma
; Line 1859
	*** 0048e8	6a 04 			push	4
	*** 0048ea	68 d0 00 		push	208	;00d0H
	*** 0048ed	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0048f2	83 c4 04 		add	sp,4
;|***     outp(DMA_MODE_HI,0x19);     //demand xfr on ch5
; Line 1860
	*** 0048f5	6a 19 			push	25	;0019H
	*** 0048f7	68 d6 00 		push	214	;00d6H
	*** 0048fa	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0048ff	83 c4 04 		add	sp,4
;|***     outp(DMA_CLEAR_FFHI,0);     //reset flip-flop
; Line 1861
	*** 004902	6a 00 			push	0
	*** 004904	68 d8 00 		push	216	;00d8H
	*** 004907	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00490c	83 c4 04 		add	sp,4
;|***     outp(DMA_COUNT_CH5,(size-1)&0xff);
; Line 1862
	*** 00490f	8a 46 fc 		mov	al,BYTE PTR [bp-4]	;size
	*** 004912	fe c8 			dec	al
	*** 004914	2a e4 			sub	ah,ah
	*** 004916	50 			push	ax
	*** 004917	68 c6 00 		push	198	;00c6H
	*** 00491a	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00491f	83 c4 04 		add	sp,4
;|***     outp(DMA_COUNT_CH5,(size-1)>>8);
; Line 1863
	*** 004922	8b 46 fc 		mov	ax,WORD PTR [bp-4]	;size
	*** 004925	48 			dec	ax
	*** 004926	8a c4 			mov	al,ah
	*** 004928	2a e4 			sub	ah,ah
	*** 00492a	50 			push	ax
	*** 00492b	68 c6 00 		push	198	;00c6H
	*** 00492e	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004933	83 c4 04 		add	sp,4
;|***     linaddress = (((unsigned long)address & 0xffff0000)>>12) + ((unsigned long)address & 0xffff);
; Line 1864
	*** 004936	8b 46 0c 		mov	ax,WORD PTR [bp+12]	;address
	*** 004939	8b 56 0e 		mov	dx,WORD PTR [bp+14]
	*** 00493c	25 ff 0f 		and	ax,4095	;0fffH
	*** 00493f	83 e2 ff 		and	dx,-1	;ffffH
	*** 004942	d1 e0 			shl	ax,1
	*** 004944	d1 d2 			rcl	dx,1
	*** 004946	d1 d0 			rcl	ax,1
	*** 004948	d1 d2 			rcl	dx,1
	*** 00494a	d1 d0 			rcl	ax,1
	*** 00494c	d1 d2 			rcl	dx,1
	*** 00494e	d1 d0 			rcl	ax,1
	*** 004950	d1 d2 			rcl	dx,1
	*** 004952	d1 d0 			rcl	ax,1
	*** 004954	92 			xchg	ax,dx
	*** 004955	83 e2 0f 		and	dx,15	;000fH
	*** 004958	03 46 0c 		add	ax,WORD PTR [bp+12]	;address
	*** 00495b	83 d2 00 		adc	dx,0
	*** 00495e	89 46 f8 		mov	WORD PTR [bp-8],ax	;linaddress
	*** 004961	89 56 fa 		mov	WORD PTR [bp-6],dx
;|***     outp(DMA_PAGE_CH5,(char)(linaddress>>16));
; Line 1865
	*** 004964	8a 46 fa 		mov	al,BYTE PTR [bp-6]
	*** 004967	98 			cbw	
	*** 004968	50 			push	ax
	*** 004969	68 8b 00 		push	139	;008bH
	*** 00496c	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004971	83 c4 04 		add	sp,4
;|***     linaddress = linaddress>>1; //adjust for 16bit dma
; Line 1866
	*** 004974	d1 6e fa 		shr	WORD PTR [bp-6],1
	*** 004977	d1 5e f8 		rcr	WORD PTR [bp-8],1	;linaddress
;|***     outp(DMA_CLEAR_FFHI,0);
; Line 1867
	*** 00497a	6a 00 			push	0
	*** 00497c	68 d8 00 		push	216	;00d8H
	*** 00497f	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004984	83 c4 04 		add	sp,4
;|***     outp(DMA_ADD_CH5,(char)(linaddress&0xff));
; Line 1868
	*** 004987	8a 46 f8 		mov	al,BYTE PTR [bp-8]	;linaddress
	*** 00498a	98 			cbw	
	*** 00498b	50 			push	ax
	*** 00498c	68 c4 00 		push	196	;00c4H
	*** 00498f	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004994	83 c4 04 		add	sp,4
;|***     outp(DMA_ADD_CH5,(char)(linaddress>>8));
; Line 1869
	*** 004997	8b 46 f8 		mov	ax,WORD PTR [bp-8]	;linaddress
	*** 00499a	8b 56 fa 		mov	dx,WORD PTR [bp-6]
	*** 00499d	8a c4 			mov	al,ah
	*** 00499f	8a e2 			mov	ah,dl
	*** 0049a1	8a d6 			mov	dl,dh
	*** 0049a3	2a f6 			sub	dh,dh
	*** 0049a5	98 			cbw	
	*** 0049a6	50 			push	ax
	*** 0049a7	68 c4 00 		push	196	;00c4H
	*** 0049aa	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0049af	83 c4 04 		add	sp,4
;|***     outp(DMA_MASK_HI,1);        //enable chan5
; Line 1870
	*** 0049b2	6a 01 			push	1
	*** 0049b4	68 d4 00 		push	212	;00d4H
	*** 0049b7	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0049bc	83 c4 04 		add	sp,4
;|***     outp(DMA_COMMAND_HI,0);     //enable dma
; Line 1871
	*** 0049bf	6a 00 			push	0
	*** 0049c1	68 d0 00 		push	208	;00d0H
	*** 0049c4	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0049c9	83 c4 04 		add	sp,4
;|***     }
; Line 1872
;|*** 
;|***   if(t1->port_dmat_list[port]==7)
; Line 1874
					$I1946:
	*** 0049cc	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0049d0	83 c3 0c 		add	bx,12	;000cH
	*** 0049d3	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 0049d6	d1 e6 			shl	si,1
	*** 0049d8	26 83 38 07 		cmp	WORD PTR es:[bx][si],7
	*** 0049dc	74 03 			je	$JCC18908
	*** 0049de	e9 e4 00 		jmp	$I1952
					$JCC18908:
;|***     {
; Line 1875
;|***     outp(DMA_COMMAND_HI,4);     //disable dma
; Line 1876
	*** 0049e1	6a 04 			push	4
	*** 0049e3	68 d0 00 		push	208	;00d0H
	*** 0049e6	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0049eb	83 c4 04 		add	sp,4
;|***     outp(DMA_MODE_HI,0x1b);     //demand xfr on ch7
; Line 1877
	*** 0049ee	6a 1b 			push	27	;001bH
	*** 0049f0	68 d6 00 		push	214	;00d6H
	*** 0049f3	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0049f8	83 c4 04 		add	sp,4
;|***     outp(DMA_CLEAR_FFHI,0);     //reset flip-flop
; Line 1878
	*** 0049fb	6a 00 			push	0
	*** 0049fd	68 d8 00 		push	216	;00d8H
	*** 004a00	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004a05	83 c4 04 		add	sp,4
;|***     outp(DMA_COUNT_CH7,(size-1)&0xff);
; Line 1879
	*** 004a08	8a 46 fc 		mov	al,BYTE PTR [bp-4]	;size
	*** 004a0b	fe c8 			dec	al
	*** 004a0d	2a e4 			sub	ah,ah
	*** 004a0f	50 			push	ax
	*** 004a10	68 ce 00 		push	206	;00ceH
	*** 004a13	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004a18	83 c4 04 		add	sp,4
;|***     outp(DMA_COUNT_CH7,(size-1)>>8);
; Line 1880
	*** 004a1b	8b 46 fc 		mov	ax,WORD PTR [bp-4]	;size
	*** 004a1e	48 			dec	ax
	*** 004a1f	8a c4 			mov	al,ah
	*** 004a21	2a e4 			sub	ah,ah
	*** 004a23	50 			push	ax
	*** 004a24	68 ce 00 		push	206	;00ceH
	*** 004a27	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004a2c	83 c4 04 		add	sp,4
;|***     linaddress = (((unsigned long)address & 0xffff0000)>>12) + ((unsigned long)address & 0xffff);
; Line 1881
	*** 004a2f	8b 46 0c 		mov	ax,WORD PTR [bp+12]	;address
	*** 004a32	8b 56 0e 		mov	dx,WORD PTR [bp+14]
	*** 004a35	25 ff 0f 		and	ax,4095	;0fffH
	*** 004a38	83 e2 ff 		and	dx,-1	;ffffH
	*** 004a3b	d1 e0 			shl	ax,1
	*** 004a3d	d1 d2 			rcl	dx,1
	*** 004a3f	d1 d0 			rcl	ax,1
	*** 004a41	d1 d2 			rcl	dx,1
	*** 004a43	d1 d0 			rcl	ax,1
	*** 004a45	d1 d2 			rcl	dx,1
	*** 004a47	d1 d0 			rcl	ax,1
	*** 004a49	d1 d2 			rcl	dx,1
	*** 004a4b	d1 d0 			rcl	ax,1
	*** 004a4d	92 			xchg	ax,dx
	*** 004a4e	83 e2 0f 		and	dx,15	;000fH
	*** 004a51	03 46 0c 		add	ax,WORD PTR [bp+12]	;address
	*** 004a54	83 d2 00 		adc	dx,0
	*** 004a57	89 46 f8 		mov	WORD PTR [bp-8],ax	;linaddress
	*** 004a5a	89 56 fa 		mov	WORD PTR [bp-6],dx
;|***     outp(DMA_PAGE_CH7,(char)(linaddress>>16));
; Line 1882
	*** 004a5d	8a 46 fa 		mov	al,BYTE PTR [bp-6]
	*** 004a60	98 			cbw	
	*** 004a61	50 			push	ax
	*** 004a62	68 8a 00 		push	138	;008aH
	*** 004a65	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004a6a	83 c4 04 		add	sp,4
;|***     linaddress = linaddress>>1; //adjust for 16bit dma
; Line 1883
	*** 004a6d	d1 6e fa 		shr	WORD PTR [bp-6],1
	*** 004a70	d1 5e f8 		rcr	WORD PTR [bp-8],1	;linaddress
;|***     outp(DMA_CLEAR_FFHI,0);
; Line 1884
	*** 004a73	6a 00 			push	0
	*** 004a75	68 d8 00 		push	216	;00d8H
	*** 004a78	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004a7d	83 c4 04 		add	sp,4
;|***     outp(DMA_ADD_CH7,(char)(linaddress&0xff));
; Line 1885
	*** 004a80	8a 46 f8 		mov	al,BYTE PTR [bp-8]	;linaddress
	*** 004a83	98 			cbw	
	*** 004a84	50 			push	ax
	*** 004a85	68 cc 00 		push	204	;00ccH
	*** 004a88	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004a8d	83 c4 04 		add	sp,4
;|***     outp(DMA_ADD_CH7,(char)(linaddress>>8));
; Line 1886
	*** 004a90	8b 46 f8 		mov	ax,WORD PTR [bp-8]	;linaddress
	*** 004a93	8b 56 fa 		mov	dx,WORD PTR [bp-6]
	*** 004a96	8a c4 			mov	al,ah
	*** 004a98	8a e2 			mov	ah,dl
	*** 004a9a	8a d6 			mov	dl,dh
	*** 004a9c	2a f6 			sub	dh,dh
	*** 004a9e	98 			cbw	
	*** 004a9f	50 			push	ax
	*** 004aa0	68 cc 00 		push	204	;00ccH
	*** 004aa3	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004aa8	83 c4 04 		add	sp,4
;|***     outp(DMA_MASK_HI,3);        //enable chan7
; Line 1887
	*** 004aab	6a 03 			push	3
	*** 004aad	68 d4 00 		push	212	;00d4H
	*** 004ab0	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004ab5	83 c4 04 		add	sp,4
;|***     outp(DMA_COMMAND_HI,0);     //enable dma
; Line 1888
	*** 004ab8	6a 00 			push	0
	*** 004aba	68 d0 00 		push	208	;00d0H
	*** 004abd	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004ac2	83 c4 04 		add	sp,4
;|***     }
; Line 1889
;|*** 
;|***   if(numbytes ==0) size =FRAME_SIZE;
; Line 1891
					$I1952:
	*** 004ac5	83 7e 0a 00 		cmp	WORD PTR [bp+10],0	;numbytes
	*** 004ac9	74 03 			je	$JCC19145
	*** 004acb	e9 08 00 		jmp	$I1958
					$JCC19145:
	*** 004ace	c7 46 fc 00 04 		mov	WORD PTR [bp-4],1024	;0400H	;size
;|***   else size = numbytes;
; Line 1892
	*** 004ad3	e9 06 00 		jmp	$I1959
					$I1958:
	*** 004ad6	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;numbytes
	*** 004ad9	89 46 fc 		mov	WORD PTR [bp-4],ax	;size
					$I1959:
;|***   i = size-1;
; Line 1893
	*** 004adc	8b 46 fc 		mov	ax,WORD PTR [bp-4]	;size
	*** 004adf	48 			dec	ax
	*** 004ae0	89 46 fe 		mov	WORD PTR [bp-2],ax	;i
;|***   i = i&0x0fff;
; Line 1894
	*** 004ae3	81 66 fe ff 0f 		and	WORD PTR [bp-2],4095	;0fffH	;i
;|***   i = i|0x8000;
; Line 1895
	*** 004ae8	81 4e fe 00 80 		or	WORD PTR [bp-2],-32768	;8000H	;i
;|***   chanstor = inp(t1->port_list[port]+PVR)&0x1;
; Line 1896
	*** 004aed	8b 5e 10 		mov	bx,WORD PTR [bp+16]	;port
	*** 004af0	d1 e3 			shl	bx,1
	*** 004af2	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004af6	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 004af9	05 1c 00 		add	ax,28	;001cH
	*** 004afc	50 			push	ax
	*** 004afd	9a 00 00 00 00 		call	FAR PTR _inp
	*** 004b02	83 c4 02 		add	sp,2
	*** 004b05	25 01 00 		and	ax,1
	*** 004b08	89 46 f6 		mov	WORD PTR [bp-10],ax	;chanstor
;|***   outp(t1->port_list[port]+PVR,(inp(t1->port_list[port]+PVR)&0xfe)+t1->channel[port]); //set channel
; Line 1897
	*** 004b0b	8b 5e 10 		mov	bx,WORD PTR [bp+16]	;port
	*** 004b0e	d1 e3 			shl	bx,1
	*** 004b10	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004b14	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 004b17	05 1c 00 		add	ax,28	;001cH
	*** 004b1a	50 			push	ax
	*** 004b1b	9a 00 00 00 00 		call	FAR PTR _inp
	*** 004b20	83 c4 02 		add	sp,2
	*** 004b23	25 fe 00 		and	ax,254	;00feH
	*** 004b26	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004b2a	81 c3 9a 01 		add	bx,410	;019aH
	*** 004b2e	8b 76 10 		mov	si,WORD PTR [bp+16]	;port
	*** 004b31	d1 e6 			shl	si,1
	*** 004b33	26 03 00 		add	ax,WORD PTR es:[bx][si]
	*** 004b36	50 			push	ax
	*** 004b37	8b 5e 10 		mov	bx,WORD PTR [bp+16]	;port
	*** 004b3a	d1 e3 			shl	bx,1
	*** 004b3c	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004b40	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 004b43	05 1c 00 		add	ax,28	;001cH
	*** 004b46	50 			push	ax
	*** 004b47	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004b4c	83 c4 04 		add	sp,4
;|***   outp(t1->port_list[port]+XBCL,i&0xff);
; Line 1898
	*** 004b4f	8a 46 fe 		mov	al,BYTE PTR [bp-2]	;i
	*** 004b52	2a e4 			sub	ah,ah
	*** 004b54	50 			push	ax
	*** 004b55	8b 5e 10 		mov	bx,WORD PTR [bp+16]	;port
	*** 004b58	d1 e3 			shl	bx,1
	*** 004b5a	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004b5e	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 004b61	05 0a 00 		add	ax,10	;000aH
	*** 004b64	50 			push	ax
	*** 004b65	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004b6a	83 c4 04 		add	sp,4
;|***   outp(t1->port_list[port]+XBCH,i>>8);    //set for dma mode and FRAME_SIZE bytes per frame
; Line 1899
	*** 004b6d	8a 46 ff 		mov	al,BYTE PTR [bp-1]
	*** 004b70	2a e4 			sub	ah,ah
	*** 004b72	50 			push	ax
	*** 004b73	8b 5e 10 		mov	bx,WORD PTR [bp+16]	;port
	*** 004b76	d1 e3 			shl	bx,1
	*** 004b78	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004b7c	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 004b7f	05 0b 00 		add	ax,11	;000bH
	*** 004b82	50 			push	ax
	*** 004b83	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004b88	83 c4 04 		add	sp,4
;|***   outp(t1->port_list[port]+PVR,(inp(t1->port_list[port]+PVR)&0xfe)+chanstor); //set channel
; Line 1900
	*** 004b8b	8b 5e 10 		mov	bx,WORD PTR [bp+16]	;port
	*** 004b8e	d1 e3 			shl	bx,1
	*** 004b90	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004b94	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 004b97	05 1c 00 		add	ax,28	;001cH
	*** 004b9a	50 			push	ax
	*** 004b9b	9a 00 00 00 00 		call	FAR PTR _inp
	*** 004ba0	83 c4 02 		add	sp,2
	*** 004ba3	25 fe 00 		and	ax,254	;00feH
	*** 004ba6	03 46 f6 		add	ax,WORD PTR [bp-10]	;chanstor
	*** 004ba9	50 			push	ax
	*** 004baa	8b 5e 10 		mov	bx,WORD PTR [bp+16]	;port
	*** 004bad	d1 e3 			shl	bx,1
	*** 004baf	c4 36 00 00 		les	si,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004bb3	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 004bb6	05 1c 00 		add	ax,28	;001cH
	*** 004bb9	50 			push	ax
	*** 004bba	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004bbf	83 c4 04 		add	sp,4
;|***   
;|***   }
; Line 1902
	*** 004bc2	e9 00 00 		jmp	$EX1926
					$EX1926:
	*** 004bc5	5e 			pop	si
	*** 004bc6	5f 			pop	di
	*** 004bc7	c9 			leave	
	*** 004bc8	ca 0c 00 		ret	12	;0000000cH

?setupdmat@Cescc@@JECXIPEXI@Z	ENDP
	PUBLIC	?setupdmar@Cescc@@JECXIPEX@Z	; Cescc::setupdmar
?setupdmar@Cescc@@JECXIPEX@Z	PROC FAR	; Cescc::setupdmar
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** void Cescc::setupdmar(unsigned port,void far *address)
;|***   {
; Line 1909
	*** 004bcb	c8 06 00 00 		enter	6,0
	*** 004bcf	57 			push	di
	*** 004bd0	56 			push	si
;	linaddress = -4
;	size = -6
;	this = 6
;	port = 14
;	address = 10
;|***   unsigned long linaddress;
;|***   unsigned size;
;|*** 
;|***   size = 0;
; Line 1913
	*** 004bd1	c7 46 fa 00 00 		mov	WORD PTR [bp-6],0	;size
;|***   //size = 32; //so max received is framesize+32
;|***   //the extra transfers are added to the frame size so if FRAME_SIZE+1 
;|***   //( the +1 is for the status bytes that is pushed into the RXFIFO) is set to 
;|***   //a non multiple of 32 the receive[] array will be valid and not overwritten
;|***   //by the unexpected transfers at the end of a frame. and subsequent frames
;|***   //will be received correctly
;|***   //in other words if a frame size of say 40 is used:
;|***   // frame_size+1 = 41
;|***   // then ther;|***   // 9 bytes will force a 16 byte DMA cycle giving us 7 extra bytes
;|***   // so we add 7 to the frame size to get the total number of cycles in a
;|***   // received frame( the received length will be 48 bytes 41 of which are valid)
;|***   if(t1->port_dmar_list[port]==1)
; Line 1926
	*** 004bd6	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004bda	83 c3 10 		add	bx,16	;0010H
	*** 004bdd	8b 76 0e 		mov	si,WORD PTR [bp+14]	;port
	*** 004be0	d1 e6 			shl	si,1
	*** 004be2	26 83 38 01 		cmp	WORD PTR es:[bx][si],1
	*** 004be6	74 03 			je	$JCC19430
	*** 004be8	e9 d6 00 		jmp	$I1966
					$JCC19430:
;|***     {
; Line 1927
;|***     outp(DMA_COMMAND_LO,4);     //disable dma
; Line 1928
	*** 004beb	6a 04 			push	4
	*** 004bed	6a 08 			push	8
	*** 004bef	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004bf4	83 c4 04 		add	sp,4
;|***     outp(DMA_MODE_LO,0x15);     //demand xfer ch1
; Line 1929
	*** 004bf7	6a 15 			push	21	;0015H
	*** 004bf9	6a 0b 			push	11	;000bH
	*** 004bfb	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004c00	83 c4 04 		add	sp,4
;|***     outp(DMA_CLEAR_FFLO,0);     //clear ctrlr flip flop
; Line 1930
	*** 004c03	6a 00 			push	0
	*** 004c05	6a 0c 			push	12	;000cH
	*** 004c07	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004c0c	83 c4 04 		add	sp,4
;|***     outp(DMA_COUNT_CH1,(FRAME_SIZE+size-1)&0xff);//write corrected word count
; Line 1931
	*** 004c0f	8a 46 fa 		mov	al,BYTE PTR [bp-6]	;size
	*** 004c12	fe c8 			dec	al
	*** 004c14	2a e4 			sub	ah,ah
	*** 004c16	50 			push	ax
	*** 004c17	6a 03 			push	3
	*** 004c19	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004c1e	83 c4 04 		add	sp,4
;|***     outp(DMA_COUNT_CH1,(FRAME_SIZE+size-1)>>8);
; Line 1932
	*** 004c21	8b 46 fa 		mov	ax,WORD PTR [bp-6]	;size
	*** 004c24	05 ff 03 		add	ax,1023	;03ffH
	*** 004c27	8a c4 			mov	al,ah
	*** 004c29	2a e4 			sub	ah,ah
	*** 004c2b	50 			push	ax
	*** 004c2c	6a 03 			push	3
	*** 004c2e	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004c33	83 c4 04 		add	sp,4
;|***     linaddress = (((unsigned long)address & 0xffff0000)>>12) + ((unsigned long)address & 0xffff);
; Line 1933
	*** 004c36	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;address
	*** 004c39	8b 56 0c 		mov	dx,WORD PTR [bp+12]
	*** 004c3c	25 ff 0f 		and	ax,4095	;0fffH
	*** 004c3f	83 e2 ff 		and	dx,-1	;ffffH
	*** 004c42	d1 e0 			shl	ax,1
	*** 004c44	d1 d2 			rcl	dx,1
	*** 004c46	d1 d0 			rcl	ax,1
	*** 004c48	d1 d2 			rcl	dx,1
	*** 004c4a	d1 d0 			rcl	ax,1
	*** 004c4c	d1 d2 			rcl	dx,1
	*** 004c4e	d1 d0 			rcl	ax,1
	*** 004c50	d1 d2 			rcl	dx,1
	*** 004c52	d1 d0 			rcl	ax,1
	*** 004c54	92 			xchg	ax,dx
	*** 004c55	83 e2 0f 		and	dx,15	;000fH
	*** 004c58	03 46 0a 		add	ax,WORD PTR [bp+10]	;address
	*** 004c5b	83 d2 00 		adc	dx,0
	*** 004c5e	89 46 fc 		mov	WORD PTR [bp-4],ax	;linaddress
	*** 004c61	89 56 fe 		mov	WORD PTR [bp-2],dx
;|***     outp(DMA_PAGE_CH1,(char)(linaddress>>16));
; Line 1934
	*** 004c64	8a 46 fe 		mov	al,BYTE PTR [bp-2]
	*** 004c67	98 			cbw	
	*** 004c68	50 			push	ax
	*** 004c69	68 83 00 		push	131	;0083H
	*** 004c6c	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004c71	83 c4 04 		add	sp,4
;|***     outp(DMA_CLEAR_FFLO,0);
; Line 1935
	*** 004c74	6a 00 			push	0
	*** 004c76	6a 0c 			push	12	;000cH
	*** 004c78	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004c7d	83 c4 04 		add	sp,4
;|***     outp(DMA_ADD_CH1,(char)(linaddress&0xff));     //and store it in the controller
; Line 1936
	*** 004c80	8a 46 fc 		mov	al,BYTE PTR [bp-4]	;linaddress
	*** 004c83	98 			cbw	
	*** 004c84	50 			push	ax
	*** 004c85	6a 02 			push	2
	*** 004c87	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004c8c	83 c4 04 		add	sp,4
;|***     outp(DMA_ADD_CH1,(char)(linaddress>>8));
; Line 1937
	*** 004c8f	8b 46 fc 		mov	ax,WORD PTR [bp-4]	;linaddress
	*** 004c92	8b 56 fe 		mov	dx,WORD PTR [bp-2]
	*** 004c95	8a c4 			mov	al,ah
	*** 004c97	8a e2 			mov	ah,dl
	*** 004c99	8a d6 			mov	dl,dh
	*** 004c9b	2a f6 			sub	dh,dh
	*** 004c9d	98 			cbw	
	*** 004c9e	50 			push	ax
	*** 004c9f	6a 02 			push	2
	*** 004ca1	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004ca6	83 c4 04 		add	sp,4
;|***     outp(DMA_MASK_LO,1);                //unmask ch1
; Line 1938
	*** 004ca9	6a 01 			push	1
	*** 004cab	6a 0a 			push	10	;000aH
	*** 004cad	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004cb2	83 c4 04 		add	sp,4
;|***     outp(DMA_COMMAND_LO,0);             //enable DMA
; Line 1939
	*** 004cb5	6a 00 			push	0
	*** 004cb7	6a 08 			push	8
	*** 004cb9	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004cbe	83 c4 04 		add	sp,4
;|***     }
; Line 1940
;|***   
;|***   if(t1->port_dmar_list[port]==3)
; Line 1942
					$I1966:
	*** 004cc1	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004cc5	83 c3 10 		add	bx,16	;0010H
	*** 004cc8	8b 76 0e 		mov	si,WORD PTR [bp+14]	;port
	*** 004ccb	d1 e6 			shl	si,1
	*** 004ccd	26 83 38 03 		cmp	WORD PTR es:[bx][si],3
	*** 004cd1	74 03 			je	$JCC19665
	*** 004cd3	e9 d6 00 		jmp	$I1972
					$JCC19665:
;|***     {
; Line 1943
;|***     outp(DMA_COMMAND_LO,4);
; Line 1944
	*** 004cd6	6a 04 			push	4
	*** 004cd8	6a 08 			push	8
	*** 004cda	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004cdf	83 c4 04 		add	sp,4
;|***     outp(DMA_MODE_LO,0x17);
; Line 1945
	*** 004ce2	6a 17 			push	23	;0017H
	*** 004ce4	6a 0b 			push	11	;000bH
	*** 004ce6	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004ceb	83 c4 04 		add	sp,4
;|***     outp(DMA_CLEAR_FFLO,0);
; Line 1946
	*** 004cee	6a 00 			push	0
	*** 004cf0	6a 0c 			push	12	;000cH
	*** 004cf2	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004cf7	83 c4 04 		add	sp,4
;|***     outp(DMA_COUNT_CH3,(FRAME_SIZE+size-1)&0xff);
; Line 1947
	*** 004cfa	8a 46 fa 		mov	al,BYTE PTR [bp-6]	;size
	*** 004cfd	fe c8 			dec	al
	*** 004cff	2a e4 			sub	ah,ah
	*** 004d01	50 			push	ax
	*** 004d02	6a 07 			push	7
	*** 004d04	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004d09	83 c4 04 		add	sp,4
;|***     outp(DMA_COUNT_CH3,(FRAME_SIZE+size-1)>>8);
; Line 1948
	*** 004d0c	8b 46 fa 		mov	ax,WORD PTR [bp-6]	;size
	*** 004d0f	05 ff 03 		add	ax,1023	;03ffH
	*** 004d12	8a c4 			mov	al,ah
	*** 004d14	2a e4 			sub	ah,ah
	*** 004d16	50 			push	ax
	*** 004d17	6a 07 			push	7
	*** 004d19	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004d1e	83 c4 04 		add	sp,4
;|***     linaddress = (((unsigned long)address & 0xffff0000)>>12) + ((unsigned long)address & 0xffff);
; Line 1949
	*** 004d21	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;address
	*** 004d24	8b 56 0c 		mov	dx,WORD PTR [bp+12]
	*** 004d27	25 ff 0f 		and	ax,4095	;0fffH
	*** 004d2a	83 e2 ff 		and	dx,-1	;ffffH
	*** 004d2d	d1 e0 			shl	ax,1
	*** 004d2f	d1 d2 			rcl	dx,1
	*** 004d31	d1 d0 			rcl	ax,1
	*** 004d33	d1 d2 			rcl	dx,1
	*** 004d35	d1 d0 			rcl	ax,1
	*** 004d37	d1 d2 			rcl	dx,1
	*** 004d39	d1 d0 			rcl	ax,1
	*** 004d3b	d1 d2 			rcl	dx,1
	*** 004d3d	d1 d0 			rcl	ax,1
	*** 004d3f	92 			xchg	ax,dx
	*** 004d40	83 e2 0f 		and	dx,15	;000fH
	*** 004d43	03 46 0a 		add	ax,WORD PTR [bp+10]	;address
	*** 004d46	83 d2 00 		adc	dx,0
	*** 004d49	89 46 fc 		mov	WORD PTR [bp-4],ax	;linaddress
	*** 004d4c	89 56 fe 		mov	WORD PTR [bp-2],dx
;|***     outp(DMA_PAGE_CH3,(char)(linaddress>>16));
; Line 1950
	*** 004d4f	8a 46 fe 		mov	al,BYTE PTR [bp-2]
	*** 004d52	98 			cbw	
	*** 004d53	50 			push	ax
	*** 004d54	68 82 00 		push	130	;0082H
	*** 004d57	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004d5c	83 c4 04 		add	sp,4
;|***     outp(DMA_CLEAR_FFLO,0);
; Line 1951
	*** 004d5f	6a 00 			push	0
	*** 004d61	6a 0c 			push	12	;000cH
	*** 004d63	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004d68	83 c4 04 		add	sp,4
;|***     outp(DMA_ADD_CH3,(char)(linaddress&0xff));
; Line 1952
	*** 004d6b	8a 46 fc 		mov	al,BYTE PTR [bp-4]	;linaddress
	*** 004d6e	98 			cbw	
	*** 004d6f	50 			push	ax
	*** 004d70	6a 06 			push	6
	*** 004d72	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004d77	83 c4 04 		add	sp,4
;|***     outp(DMA_ADD_CH3,(char)(linaddress>>8));
; Line 1953
	*** 004d7a	8b 46 fc 		mov	ax,WORD PTR [bp-4]	;linaddress
	*** 004d7d	8b 56 fe 		mov	dx,WORD PTR [bp-2]
	*** 004d80	8a c4 			mov	al,ah
	*** 004d82	8a e2 			mov	ah,dl
	*** 004d84	8a d6 			mov	dl,dh
	*** 004d86	2a f6 			sub	dh,dh
	*** 004d88	98 			cbw	
	*** 004d89	50 			push	ax
	*** 004d8a	6a 06 			push	6
	*** 004d8c	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004d91	83 c4 04 		add	sp,4
;|***     outp(DMA_MASK_LO,3);
; Line 1954
	*** 004d94	6a 03 			push	3
	*** 004d96	6a 0a 			push	10	;000aH
	*** 004d98	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004d9d	83 c4 04 		add	sp,4
;|***     outp(DMA_COMMAND_LO,0);
; Line 1955
	*** 004da0	6a 00 			push	0
	*** 004da2	6a 08 			push	8
	*** 004da4	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004da9	83 c4 04 		add	sp,4
;|***     }
; Line 1956
;|***   
;|***   if(t1->port_dmar_list[port]==5)
; Line 1958
					$I1972:
	*** 004dac	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004db0	83 c3 10 		add	bx,16	;0010H
	*** 004db3	8b 76 0e 		mov	si,WORD PTR [bp+14]	;port
	*** 004db6	d1 e6 			shl	si,1
	*** 004db8	26 83 38 05 		cmp	WORD PTR es:[bx][si],5
	*** 004dbc	74 03 			je	$JCC19900
	*** 004dbe	e9 eb 00 		jmp	$I1978
					$JCC19900:
;|***     {
; Line 1959
;|***     outp(DMA_COMMAND_HI,4);     //disable dma
; Line 1960
	*** 004dc1	6a 04 			push	4
	*** 004dc3	68 d0 00 		push	208	;00d0H
	*** 004dc6	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004dcb	83 c4 04 		add	sp,4
;|***     outp(DMA_MODE_HI,0x15);     //demand xfr on ch5
; Line 1961
	*** 004dce	6a 15 			push	21	;0015H
	*** 004dd0	68 d6 00 		push	214	;00d6H
	*** 004dd3	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004dd8	83 c4 04 		add	sp,4
;|***     outp(DMA_CLEAR_FFHI,0);     //reset flip-flop
; Line 1962
	*** 004ddb	6a 00 			push	0
	*** 004ddd	68 d8 00 		push	216	;00d8H
	*** 004de0	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004de5	83 c4 04 		add	sp,4
;|***     outp(DMA_COUNT_CH5,(((FRAME_SIZE+size)/2)-1)&0xff);
; Line 1963
	*** 004de8	8b 46 fa 		mov	ax,WORD PTR [bp-6]	;size
	*** 004deb	d1 e8 			shr	ax,1
	*** 004ded	fe c8 			dec	al
	*** 004def	2a e4 			sub	ah,ah
	*** 004df1	50 			push	ax
	*** 004df2	68 c6 00 		push	198	;00c6H
	*** 004df5	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004dfa	83 c4 04 		add	sp,4
;|***     outp(DMA_COUNT_CH5,(((FRAME_SIZE+size)/2)-1)>>8);
; Line 1964
	*** 004dfd	8b 46 fa 		mov	ax,WORD PTR [bp-6]	;size
	*** 004e00	05 00 04 		add	ax,1024	;0400H
	*** 004e03	d1 e8 			shr	ax,1
	*** 004e05	48 			dec	ax
	*** 004e06	8a c4 			mov	al,ah
	*** 004e08	2a e4 			sub	ah,ah
	*** 004e0a	50 			push	ax
	*** 004e0b	68 c6 00 		push	198	;00c6H
	*** 004e0e	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004e13	83 c4 04 		add	sp,4
;|***     linaddress = (((unsigned long)address & 0xffff0000)>>12) + ((unsigned long)address & 0xffff);
; Line 1965
	*** 004e16	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;address
	*** 004e19	8b 56 0c 		mov	dx,WORD PTR [bp+12]
	*** 004e1c	25 ff 0f 		and	ax,4095	;0fffH
	*** 004e1f	83 e2 ff 		and	dx,-1	;ffffH
	*** 004e22	d1 e0 			shl	ax,1
	*** 004e24	d1 d2 			rcl	dx,1
	*** 004e26	d1 d0 			rcl	ax,1
	*** 004e28	d1 d2 			rcl	dx,1
	*** 004e2a	d1 d0 			rcl	ax,1
	*** 004e2c	d1 d2 			rcl	dx,1
	*** 004e2e	d1 d0 			rcl	ax,1
	*** 004e30	d1 d2 			rcl	dx,1
	*** 004e32	d1 d0 			rcl	ax,1
	*** 004e34	92 			xchg	ax,dx
	*** 004e35	83 e2 0f 		and	dx,15	;000fH
	*** 004e38	03 46 0a 		add	ax,WORD PTR [bp+10]	;address
	*** 004e3b	83 d2 00 		adc	dx,0
	*** 004e3e	89 46 fc 		mov	WORD PTR [bp-4],ax	;linaddress
	*** 004e41	89 56 fe 		mov	WORD PTR [bp-2],dx
;|***     outp(DMA_PAGE_CH5,(char)(linaddress>>16));
; Line 1966
	*** 004e44	8a 46 fe 		mov	al,BYTE PTR [bp-2]
	*** 004e47	98 			cbw	
	*** 004e48	50 			push	ax
	*** 004e49	68 8b 00 		push	139	;008bH
	*** 004e4c	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004e51	83 c4 04 		add	sp,4
;|***     linaddress = linaddress>>1; //adjust for 16bit dma
; Line 1967
	*** 004e54	d1 6e fe 		shr	WORD PTR [bp-2],1
	*** 004e57	d1 5e fc 		rcr	WORD PTR [bp-4],1	;linaddress
;|***     outp(DMA_CLEAR_FFHI,0);
; Line 1968
	*** 004e5a	6a 00 			push	0
	*** 004e5c	68 d8 00 		push	216	;00d8H
	*** 004e5f	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004e64	83 c4 04 		add	sp,4
;|***     outp(DMA_ADD_CH5,(char)(linaddress&0xff));
; Line 1969
	*** 004e67	8a 46 fc 		mov	al,BYTE PTR [bp-4]	;linaddress
	*** 004e6a	98 			cbw	
	*** 004e6b	50 			push	ax
	*** 004e6c	68 c4 00 		push	196	;00c4H
	*** 004e6f	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004e74	83 c4 04 		add	sp,4
;|***     outp(DMA_ADD_CH5,(char)(linaddress>>8));
; Line 1970
	*** 004e77	8b 46 fc 		mov	ax,WORD PTR [bp-4]	;linaddress
	*** 004e7a	8b 56 fe 		mov	dx,WORD PTR [bp-2]
	*** 004e7d	8a c4 			mov	al,ah
	*** 004e7f	8a e2 			mov	ah,dl
	*** 004e81	8a d6 			mov	dl,dh
	*** 004e83	2a f6 			sub	dh,dh
	*** 004e85	98 			cbw	
	*** 004e86	50 			push	ax
	*** 004e87	68 c4 00 		push	196	;00c4H
	*** 004e8a	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004e8f	83 c4 04 		add	sp,4
;|***     outp(DMA_MASK_HI,1);        //enable chan5
; Line 1971
	*** 004e92	6a 01 			push	1
	*** 004e94	68 d4 00 		push	212	;00d4H
	*** 004e97	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004e9c	83 c4 04 		add	sp,4
;|***     outp(DMA_COMMAND_HI,0);     //enable dma
; Line 1972
	*** 004e9f	6a 00 			push	0
	*** 004ea1	68 d0 00 		push	208	;00d0H
	*** 004ea4	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004ea9	83 c4 04 		add	sp,4
;|***     }
; Line 1973
;|***   
;|***   if(t1->port_dmar_list[port]==7)
; Line 1975
					$I1978:
	*** 004eac	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004eb0	83 c3 10 		add	bx,16	;0010H
	*** 004eb3	8b 76 0e 		mov	si,WORD PTR [bp+14]	;port
	*** 004eb6	d1 e6 			shl	si,1
	*** 004eb8	26 83 38 07 		cmp	WORD PTR es:[bx][si],7
	*** 004ebc	74 03 			je	$JCC20156
	*** 004ebe	e9 eb 00 		jmp	$I1984
					$JCC20156:
;|***     {
; Line 1976
;|***     outp(DMA_COMMAND_HI,4);     //disable dma
; Line 1977
	*** 004ec1	6a 04 			push	4
	*** 004ec3	68 d0 00 		push	208	;00d0H
	*** 004ec6	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004ecb	83 c4 04 		add	sp,4
;|***     outp(DMA_MODE_HI,0x17);     //demand xfr on ch7
; Line 1978
	*** 004ece	6a 17 			push	23	;0017H
	*** 004ed0	68 d6 00 		push	214	;00d6H
	*** 004ed3	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004ed8	83 c4 04 		add	sp,4
;|***     outp(DMA_CLEAR_FFHI,0);     //reset flip-flop
; Line 1979
	*** 004edb	6a 00 			push	0
	*** 004edd	68 d8 00 		push	216	;00d8H
	*** 004ee0	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004ee5	83 c4 04 		add	sp,4
;|***     outp(DMA_COUNT_CH7,(((FRAME_SIZE+size)/2)-1)&0xff);
; Line 1980
	*** 004ee8	8b 46 fa 		mov	ax,WORD PTR [bp-6]	;size
	*** 004eeb	d1 e8 			shr	ax,1
	*** 004eed	fe c8 			dec	al
	*** 004eef	2a e4 			sub	ah,ah
	*** 004ef1	50 			push	ax
	*** 004ef2	68 ce 00 		push	206	;00ceH
	*** 004ef5	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004efa	83 c4 04 		add	sp,4
;|***     outp(DMA_COUNT_CH7,(((FRAME_SIZE+size)/2)-1)>>8);
; Line 1981
	*** 004efd	8b 46 fa 		mov	ax,WORD PTR [bp-6]	;size
	*** 004f00	05 00 04 		add	ax,1024	;0400H
	*** 004f03	d1 e8 			shr	ax,1
	*** 004f05	48 			dec	ax
	*** 004f06	8a c4 			mov	al,ah
	*** 004f08	2a e4 			sub	ah,ah
	*** 004f0a	50 			push	ax
	*** 004f0b	68 ce 00 		push	206	;00ceH
	*** 004f0e	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004f13	83 c4 04 		add	sp,4
;|***     linaddress = (((unsigned long)address & 0xffff0000)>>12) + ((unsigned long)address & 0xffff);
; Line 1982
	*** 004f16	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;address
	*** 004f19	8b 56 0c 		mov	dx,WORD PTR [bp+12]
	*** 004f1c	25 ff 0f 		and	ax,4095	;0fffH
	*** 004f1f	83 e2 ff 		and	dx,-1	;ffffH
	*** 004f22	d1 e0 			shl	ax,1
	*** 004f24	d1 d2 			rcl	dx,1
	*** 004f26	d1 d0 			rcl	ax,1
	*** 004f28	d1 d2 			rcl	dx,1
	*** 004f2a	d1 d0 			rcl	ax,1
	*** 004f2c	d1 d2 			rcl	dx,1
	*** 004f2e	d1 d0 			rcl	ax,1
	*** 004f30	d1 d2 			rcl	dx,1
	*** 004f32	d1 d0 			rcl	ax,1
	*** 004f34	92 			xchg	ax,dx
	*** 004f35	83 e2 0f 		and	dx,15	;000fH
	*** 004f38	03 46 0a 		add	ax,WORD PTR [bp+10]	;address
	*** 004f3b	83 d2 00 		adc	dx,0
	*** 004f3e	89 46 fc 		mov	WORD PTR [bp-4],ax	;linaddress
	*** 004f41	89 56 fe 		mov	WORD PTR [bp-2],dx
;|***     outp(DMA_PAGE_CH7,(char)(linaddress>>16));
; Line 1983
	*** 004f44	8a 46 fe 		mov	al,BYTE PTR [bp-2]
	*** 004f47	98 			cbw	
	*** 004f48	50 			push	ax
	*** 004f49	68 8a 00 		push	138	;008aH
	*** 004f4c	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004f51	83 c4 04 		add	sp,4
;|***     linaddress = linaddress>>1; //adjust for 16bit dma
; Line 1984
	*** 004f54	d1 6e fe 		shr	WORD PTR [bp-2],1
	*** 004f57	d1 5e fc 		rcr	WORD PTR [bp-4],1	;linaddress
;|***     outp(DMA_CLEAR_FFHI,0);
; Line 1985
	*** 004f5a	6a 00 			push	0
	*** 004f5c	68 d8 00 		push	216	;00d8H
	*** 004f5f	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004f64	83 c4 04 		add	sp,4
;|***     outp(DMA_ADD_CH7,(char)(linaddress&0xff));
; Line 1986
	*** 004f67	8a 46 fc 		mov	al,BYTE PTR [bp-4]	;linaddress
	*** 004f6a	98 			cbw	
	*** 004f6b	50 			push	ax
	*** 004f6c	68 cc 00 		push	204	;00ccH
	*** 004f6f	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004f74	83 c4 04 		add	sp,4
;|***     outp(DMA_ADD_CH7,(char)(linaddress>>8));
; Line 1987
	*** 004f77	8b 46 fc 		mov	ax,WORD PTR [bp-4]	;linaddress
	*** 004f7a	8b 56 fe 		mov	dx,WORD PTR [bp-2]
	*** 004f7d	8a c4 			mov	al,ah
	*** 004f7f	8a e2 			mov	ah,dl
	*** 004f81	8a d6 			mov	dl,dh
	*** 004f83	2a f6 			sub	dh,dh
	*** 004f85	98 			cbw	
	*** 004f86	50 			push	ax
	*** 004f87	68 cc 00 		push	204	;00ccH
	*** 004f8a	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004f8f	83 c4 04 		add	sp,4
;|***     outp(DMA_MASK_HI,3);        //enable chan7
; Line 1988
	*** 004f92	6a 03 			push	3
	*** 004f94	68 d4 00 		push	212	;00d4H
	*** 004f97	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004f9c	83 c4 04 		add	sp,4
;|***     outp(DMA_COMMAND_HI,0);     //enable dma
; Line 1989
	*** 004f9f	6a 00 			push	0
	*** 004fa1	68 d0 00 		push	208	;00d0H
	*** 004fa4	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004fa9	83 c4 04 		add	sp,4
;|***     }
; Line 1990
;|***   
;|***   //this really isn't necessary except for the DMA bit of XBCH
;|***   //but the transmit count is programmed in setup_dmat()
;|***   //so make sure that setup_dmar() is called before setup_dmat() if an
;|***   //odd size frame is being sent..or you won't get what you expect
;|***   //i = FRAME_SIZE-1;       //transmit XBCH:XBCL +1 bytes so set XBCH:XBCL to framesize-1
;|***   //i = i&0x0fff;
;|***   //i = i|0x8000;
;|***   //outp(XBCL,i&0xff);
;|***   //outp(XBCH,i>>8);    //set for dma mode and FRAME_SIZE bytes per frame
;|***   //!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
;|***   //SETUPDMAT must be called before the receive section will work, preferably in init!!!
;|***   //!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
;|***   //this is the only way to set the dma bit of XBCH without knowing the transmitted size
;|***   }
; Line 2005
					$I1984:
	*** 004fac	e9 00 00 		jmp	$EX1963
					$EX1963:
	*** 004faf	5e 			pop	si
	*** 004fb0	5f 			pop	di
	*** 004fb1	c9 			leave	
	*** 004fb2	ca 0a 00 		ret	10	;0000000aH

?setupdmar@Cescc@@JECXIPEX@Z	ENDP
	PUBLIC	?getdmarcount@Cescc@@JECII@Z	; Cescc::getdmarcount
?getdmarcount@Cescc@@JECII@Z	PROC FAR	; Cescc::getdmarcount
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** unsigned Cescc::getdmarcount(unsigned port)
;|***   {
; Line 2012
	*** 004fb5	c8 06 00 00 		enter	6,0
	*** 004fb9	57 			push	di
	*** 004fba	56 			push	si
;	size = -2
;	lo = -4
;	hi = -6
;	this = 6
;	port = 10
;|***   unsigned size;
;|***   unsigned lo,hi;
;|***   size = 0;
; Line 2015
	*** 004fbb	c7 46 fe 00 00 		mov	WORD PTR [bp-2],0	;size
;|***   if(t1->port_dmar_list[port]==1)
; Line 2016
	*** 004fc0	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 004fc4	83 c3 10 		add	bx,16	;0010H
	*** 004fc7	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 004fca	d1 e6 			shl	si,1
	*** 004fcc	26 83 38 01 		cmp	WORD PTR es:[bx][si],1
	*** 004fd0	74 03 			je	$JCC20432
	*** 004fd2	e9 3d 00 		jmp	$I1996
					$JCC20432:
;|***     {
; Line 2017
;|***     outp(DMA_CLEAR_FFLO,0);     //clear ctrlr flip flop
; Line 2018
	*** 004fd5	6a 00 			push	0
	*** 004fd7	6a 0c 			push	12	;000cH
	*** 004fd9	9a 00 00 00 00 		call	FAR PTR _outp
	*** 004fde	83 c4 04 		add	sp,4
;|***     lo = inp(DMA_COUNT_CH1);
; Line 2019
	*** 004fe1	6a 03 			push	3
	*** 004fe3	9a 00 00 00 00 		call	FAR PTR _inp
	*** 004fe8	83 c4 02 		add	sp,2
	*** 004feb	89 46 fc 		mov	WORD PTR [bp-4],ax	;lo
;|***     hi = inp(DMA_COUNT_CH1);
; Line 2020
	*** 004fee	6a 03 			push	3
	*** 004ff0	9a 00 00 00 00 		call	FAR PTR _inp
	*** 004ff5	83 c4 02 		add	sp,2
	*** 004ff8	89 46 fa 		mov	WORD PTR [bp-6],ax	;hi
;|***     size = (hi<<8) + lo;
; Line 2021
	*** 004ffb	8a 66 fa 		mov	ah,BYTE PTR [bp-6]	;hi
	*** 004ffe	2a c0 			sub	al,al
	*** 005000	03 46 fc 		add	ax,WORD PTR [bp-4]	;lo
	*** 005003	89 46 fe 		mov	WORD PTR [bp-2],ax	;size
;|***     size = size +1;
; Line 2022
	*** 005006	ff 46 fe 		inc	WORD PTR [bp-2]	;size
;|***     size = FRAME_SIZE - size;
; Line 2023
	*** 005009	b8 00 04 		mov	ax,1024	;0400H
	*** 00500c	2b 46 fe 		sub	ax,WORD PTR [bp-2]	;size
	*** 00500f	89 46 fe 		mov	WORD PTR [bp-2],ax	;size
;|***     }
; Line 2024
;|*** 
;|***   if(t1->port_dmar_list[port]==3)
; Line 2026
					$I1996:
	*** 005012	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 005016	83 c3 10 		add	bx,16	;0010H
	*** 005019	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 00501c	d1 e6 			shl	si,1
	*** 00501e	26 83 38 03 		cmp	WORD PTR es:[bx][si],3
	*** 005022	74 03 			je	$JCC20514
	*** 005024	e9 3d 00 		jmp	$I1997
					$JCC20514:
;|***     {
; Line 2027
;|***     outp(DMA_CLEAR_FFLO,0);
; Line 2028
	*** 005027	6a 00 			push	0
	*** 005029	6a 0c 			push	12	;000cH
	*** 00502b	9a 00 00 00 00 		call	FAR PTR _outp
	*** 005030	83 c4 04 		add	sp,4
;|***     lo = inp(DMA_COUNT_CH3);
; Line 2029
	*** 005033	6a 07 			push	7
	*** 005035	9a 00 00 00 00 		call	FAR PTR _inp
	*** 00503a	83 c4 02 		add	sp,2
	*** 00503d	89 46 fc 		mov	WORD PTR [bp-4],ax	;lo
;|***     hi = inp(DMA_COUNT_CH3);
; Line 2030
	*** 005040	6a 07 			push	7
	*** 005042	9a 00 00 00 00 		call	FAR PTR _inp
	*** 005047	83 c4 02 		add	sp,2
	*** 00504a	89 46 fa 		mov	WORD PTR [bp-6],ax	;hi
;|***     size = (hi<<8) + lo;
; Line 2031
	*** 00504d	8a 66 fa 		mov	ah,BYTE PTR [bp-6]	;hi
	*** 005050	2a c0 			sub	al,al
	*** 005052	03 46 fc 		add	ax,WORD PTR [bp-4]	;lo
	*** 005055	89 46 fe 		mov	WORD PTR [bp-2],ax	;size
;|***     size = size +1;
; Line 2032
	*** 005058	ff 46 fe 		inc	WORD PTR [bp-2]	;size
;|***     size = FRAME_SIZE - size;
; Line 2033
	*** 00505b	b8 00 04 		mov	ax,1024	;0400H
	*** 00505e	2b 46 fe 		sub	ax,WORD PTR [bp-2]	;size
	*** 005061	89 46 fe 		mov	WORD PTR [bp-2],ax	;size
;|***     }
; Line 2034
;|*** 
;|***   if(t1->port_dmar_list[port]==5)
; Line 2036
					$I1997:
	*** 005064	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 005068	83 c3 10 		add	bx,16	;0010H
	*** 00506b	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 00506e	d1 e6 			shl	si,1
	*** 005070	26 83 38 05 		cmp	WORD PTR es:[bx][si],5
	*** 005074	74 03 			je	$JCC20596
	*** 005076	e9 43 00 		jmp	$I1998
					$JCC20596:
;|***     {
; Line 2037
;|***     outp(DMA_CLEAR_FFHI,0);     //reset flip-flop
; Line 2038
	*** 005079	6a 00 			push	0
	*** 00507b	68 d8 00 		push	216	;00d8H
	*** 00507e	9a 00 00 00 00 		call	FAR PTR _outp
	*** 005083	83 c4 04 		add	sp,4
;|***     lo = inp(DMA_COUNT_CH5);
; Line 2039
	*** 005086	68 c6 00 		push	198	;00c6H
	*** 005089	9a 00 00 00 00 		call	FAR PTR _inp
	*** 00508e	83 c4 02 		add	sp,2
	*** 005091	89 46 fc 		mov	WORD PTR [bp-4],ax	;lo
;|***     hi = inp(DMA_COUNT_CH5);
; Line 2040
	*** 005094	68 c6 00 		push	198	;00c6H
	*** 005097	9a 00 00 00 00 		call	FAR PTR _inp
	*** 00509c	83 c4 02 		add	sp,2
	*** 00509f	89 46 fa 		mov	WORD PTR [bp-6],ax	;hi
;|***     size = (hi<<8) + lo;
; Line 2041
	*** 0050a2	8a 66 fa 		mov	ah,BYTE PTR [bp-6]	;hi
	*** 0050a5	2a c0 			sub	al,al
	*** 0050a7	03 46 fc 		add	ax,WORD PTR [bp-4]	;lo
	*** 0050aa	89 46 fe 		mov	WORD PTR [bp-2],ax	;size
;|***     size = size +1;
; Line 2042
	*** 0050ad	ff 46 fe 		inc	WORD PTR [bp-2]	;size
;|***     size = size <<1;
; Line 2043
	*** 0050b0	d1 66 fe 		shl	WORD PTR [bp-2],1	;size
;|***     size = FRAME_SIZE - size;
; Line 2044
	*** 0050b3	b8 00 04 		mov	ax,1024	;0400H
	*** 0050b6	2b 46 fe 		sub	ax,WORD PTR [bp-2]	;size
	*** 0050b9	89 46 fe 		mov	WORD PTR [bp-2],ax	;size
;|***     }
; Line 2045
;|*** 
;|***   if(t1->port_dmar_list[port]==7)
; Line 2047
					$I1998:
	*** 0050bc	c4 1e 00 00 		les	bx,DWORD PTR ?t1@@3PEVCescc@@E	;t1
	*** 0050c0	83 c3 10 		add	bx,16	;0010H
	*** 0050c3	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 0050c6	d1 e6 			shl	si,1
	*** 0050c8	26 83 38 07 		cmp	WORD PTR es:[bx][si],7
	*** 0050cc	74 03 			je	$JCC20684
	*** 0050ce	e9 43 00 		jmp	$I1999
					$JCC20684:
;|***     {
; Line 2048
;|***     outp(DMA_CLEAR_FFHI,0);     //reset flip-flop
; Line 2049
	*** 0050d1	6a 00 			push	0
	*** 0050d3	68 d8 00 		push	216	;00d8H
	*** 0050d6	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0050db	83 c4 04 		add	sp,4
;|***     lo = inp(DMA_COUNT_CH7);
; Line 2050
	*** 0050de	68 ce 00 		push	206	;00ceH
	*** 0050e1	9a 00 00 00 00 		call	FAR PTR _inp
	*** 0050e6	83 c4 02 		add	sp,2
	*** 0050e9	89 46 fc 		mov	WORD PTR [bp-4],ax	;lo
;|***     hi = inp(DMA_COUNT_CH7);
; Line 2051
	*** 0050ec	68 ce 00 		push	206	;00ceH
	*** 0050ef	9a 00 00 00 00 		call	FAR PTR _inp
	*** 0050f4	83 c4 02 		add	sp,2
	*** 0050f7	89 46 fa 		mov	WORD PTR [bp-6],ax	;hi
;|***     size = (hi<<8) + lo;
; Line 2052
	*** 0050fa	8a 66 fa 		mov	ah,BYTE PTR [bp-6]	;hi
	*** 0050fd	2a c0 			sub	al,al
	*** 0050ff	03 46 fc 		add	ax,WORD PTR [bp-4]	;lo
	*** 005102	89 46 fe 		mov	WORD PTR [bp-2],ax	;size
;|***     size = size +1;
; Line 2053
	*** 005105	ff 46 fe 		inc	WORD PTR [bp-2]	;size
;|***     size = size <<1;
; Line 2054
	*** 005108	d1 66 fe 		shl	WORD PTR [bp-2],1	;size
;|***     size = FRAME_SIZE - size;
; Line 2055
	*** 00510b	b8 00 04 		mov	ax,1024	;0400H
	*** 00510e	2b 46 fe 		sub	ax,WORD PTR [bp-2]	;size
	*** 005111	89 46 fe 		mov	WORD PTR [bp-2],ax	;size
;|***     }
; Line 2056
;|*** 
;|***   return size;
; Line 2058
					$I1999:
	*** 005114	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;size
	*** 005117	e9 00 00 		jmp	$EX1992
;|***   }
; Line 2059
					$EX1992:
	*** 00511a	5e 			pop	si
	*** 00511b	5f 			pop	di
	*** 00511c	c9 			leave	
	*** 00511d	ca 06 00 		ret	6

?getdmarcount@Cescc@@JECII@Z	ENDP
	PUBLIC	?set_clock_generator@Cescc@@RECXIKI@Z	; Cescc::set_clock_generator
?set_clock_generator@Cescc@@RECXIKI@Z	PROC FAR	; Cescc::set_clock_generator
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** 
;|*** //sets the onboard Cypress ICD2053B Programmable Clock Generator
;|*** //to divide the 18.432 MHz system oscillator to your desired oscillator speed
;|*** //see data sheet at Cypress Web site, and Cypress' BitCalc program.
;|*** void Cescc::set_clock_generator(unsigned port, unsigned long hval,unsigned nmbits)
;|***   {
; Line 2070
	*** 005120	c8 0a 00 00 		enter	10,0
	*** 005124	57 			push	di
	*** 005125	56 			push	si
;	base = -2
;	curval = -4
;	tempval = -8
;	i = -10
;	this = 6
;	port = 16
;	hval = 12
;	nmbits = 10
;|***   unsigned base;
;|***   unsigned curval;
;|***   unsigned long tempval;
;|***   unsigned i;
;|*** 
;|***   base = port_list[port];
; Line 2076
	*** 005126	8b 5e 10 		mov	bx,WORD PTR [bp+16]	;port
	*** 005129	d1 e3 			shl	bx,1
	*** 00512b	c4 76 06 		les	si,DWORD PTR [bp+6]	;this
	*** 00512e	26 8b 00 		mov	ax,WORD PTR es:[bx][si]
	*** 005131	89 46 fe 		mov	WORD PTR [bp-2],ax	;base
;|***   curval = 0;
; Line 2077
	*** 005134	c7 46 fc 00 00 		mov	WORD PTR [bp-4],0	;curval
;|***   //curval bit 2 = data bit      (DATA on ICD2053B, parallel port bit2 on ESCC)
;|***   //curval bit 1 = clock toggle  (SCLK on ICD2053B, parallel port bit1 on ESCC)
;|***   outp(base+PVR,curval);   //writing to PVR (0x1c) writes to ESCC universal port (parallel port)
; Line 2080
	*** 005139	ff 76 fc 		push	WORD PTR [bp-4]	;curval
	*** 00513c	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;base
	*** 00513f	05 1c 00 		add	ax,28	;001cH
	*** 005142	50 			push	ax
	*** 005143	9a 00 00 00 00 		call	FAR PTR _outp
	*** 005148	83 c4 04 		add	sp,4
;|*** 
;|***   tempval = STARTWRD;      //0x1e05
; Line 2082
	*** 00514b	c7 46 f8 05 1e 		mov	WORD PTR [bp-8],7685	;1e05H	;tempval
	*** 005150	c7 46 fa 00 00 		mov	WORD PTR [bp-6],0
;|***   for(i=0;i<14;i++)        //writes 14 LSBs of STARTWRD into ICD2053 one bit at a time, LSB first
; Line 2083
	*** 005155	c7 46 f6 00 00 		mov	WORD PTR [bp-10],0	;i
	*** 00515a	e9 03 00 		jmp	$F2009
					$FC2010:
	*** 00515d	ff 46 f6 		inc	WORD PTR [bp-10]	;i
					$F2009:
	*** 005160	83 7e f6 0e 		cmp	WORD PTR [bp-10],14	;000eH	;i
	*** 005164	72 03 			jb	$JCC20836
	*** 005166	e9 58 00 		jmp	$FB2011
					$JCC20836:
;|***     {
; Line 2084
;|***     curval = 0;
; Line 2085
	*** 005169	c7 46 fc 00 00 		mov	WORD PTR [bp-4],0	;curval
;|***     curval = (char)(tempval&0x1)<<2;  //select LSB and rotate up to bit2 position (DATA)
; Line 2086
	*** 00516e	8a 46 f8 		mov	al,BYTE PTR [bp-8]	;tempval
	*** 005171	24 01 			and	al,1
	*** 005173	98 			cbw	
	*** 005174	c1 e0 02 		shl	ax,2
	*** 005177	89 46 fc 		mov	WORD PTR [bp-4],ax	;curval
;|***     outp(base+PVR,curval);              
; Line 2087
	*** 00517a	ff 76 fc 		push	WORD PTR [bp-4]	;curval
	*** 00517d	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;base
	*** 005180	05 1c 00 		add	ax,28	;001cH
	*** 005183	50 			push	ax
	*** 005184	9a 00 00 00 00 		call	FAR PTR _outp
	*** 005189	83 c4 04 		add	sp,4
;|***     curval = curval |0x02;    //force rising edge on SCLK (bit1 on parallel port)
; Line 2088
	*** 00518c	83 4e fc 02 		or	WORD PTR [bp-4],2	;curval
;|***     outp(base+PVR,curval);    //clock data into ICD 2053
; Line 2089
	*** 005190	ff 76 fc 		push	WORD PTR [bp-4]	;curval
	*** 005193	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;base
	*** 005196	05 1c 00 		add	ax,28	;001cH
	*** 005199	50 			push	ax
	*** 00519a	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00519f	83 c4 04 		add	sp,4
;|***     curval = curval &0x04;    //force falling edge
; Line 2090
	*** 0051a2	83 66 fc 04 		and	WORD PTR [bp-4],4	;curval
;|***     outp(base+PVR,curval);    //set clock low
; Line 2091
	*** 0051a6	ff 76 fc 		push	WORD PTR [bp-4]	;curval
	*** 0051a9	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;base
	*** 0051ac	05 1c 00 		add	ax,28	;001cH
	*** 0051af	50 			push	ax
	*** 0051b0	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0051b5	83 c4 04 		add	sp,4
;|***     tempval = tempval >> 1;   //get next bit
; Line 2092
	*** 0051b8	d1 6e fa 		shr	WORD PTR [bp-6],1
	*** 0051bb	d1 5e f8 		rcr	WORD PTR [bp-8],1	;tempval
;|***     }
; Line 2093
	*** 0051be	e9 9c ff 		jmp	$FC2010
					$FB2011:
;|***   
;|***   tempval = hval;
; Line 2095
	*** 0051c1	8b 46 0c 		mov	ax,WORD PTR [bp+12]	;hval
	*** 0051c4	8b 56 0e 		mov	dx,WORD PTR [bp+14]
	*** 0051c7	89 46 f8 		mov	WORD PTR [bp-8],ax	;tempval
	*** 0051ca	89 56 fa 		mov	WORD PTR [bp-6],dx
;|***   for(i=0;i<nmbits;i++)
; Line 2096
	*** 0051cd	c7 46 f6 00 00 		mov	WORD PTR [bp-10],0	;i
	*** 0051d2	e9 03 00 		jmp	$F2013
					$FC2014:
	*** 0051d5	ff 46 f6 		inc	WORD PTR [bp-10]	;i
					$F2013:
	*** 0051d8	8b 46 0a 		mov	ax,WORD PTR [bp+10]	;nmbits
	*** 0051db	39 46 f6 		cmp	WORD PTR [bp-10],ax	;i
	*** 0051de	72 03 			jb	$JCC20958
	*** 0051e0	e9 58 00 		jmp	$FB2015
					$JCC20958:
;|***     {
; Line 2097
;|***     curval = 0;
; Line 2098
	*** 0051e3	c7 46 fc 00 00 		mov	WORD PTR [bp-4],0	;curval
;|***     curval = (char)(tempval&0x1)<<2;  //set bit
; Line 2099
	*** 0051e8	8a 46 f8 		mov	al,BYTE PTR [bp-8]	;tempval
	*** 0051eb	24 01 			and	al,1
	*** 0051ed	98 			cbw	
	*** 0051ee	c1 e0 02 		shl	ax,2
	*** 0051f1	89 46 fc 		mov	WORD PTR [bp-4],ax	;curval
;|***     outp(base+PVR,curval);
; Line 2100
	*** 0051f4	ff 76 fc 		push	WORD PTR [bp-4]	;curval
	*** 0051f7	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;base
	*** 0051fa	05 1c 00 		add	ax,28	;001cH
	*** 0051fd	50 			push	ax
	*** 0051fe	9a 00 00 00 00 		call	FAR PTR _outp
	*** 005203	83 c4 04 		add	sp,4
;|***     curval = curval |0x02;    //force rising edge
; Line 2101
	*** 005206	83 4e fc 02 		or	WORD PTR [bp-4],2	;curval
;|***     outp(base+PVR,curval);    //clock in data
; Line 2102
	*** 00520a	ff 76 fc 		push	WORD PTR [bp-4]	;curval
	*** 00520d	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;base
	*** 005210	05 1c 00 		add	ax,28	;001cH
	*** 005213	50 			push	ax
	*** 005214	9a 00 00 00 00 		call	FAR PTR _outp
	*** 005219	83 c4 04 		add	sp,4
;|***     curval = curval &0x04;    //force falling edge
; Line 2103
	*** 00521c	83 66 fc 04 		and	WORD PTR [bp-4],4	;curval
;|***     outp(base+PVR,curval);    //set clock low
; Line 2104
	*** 005220	ff 76 fc 		push	WORD PTR [bp-4]	;curval
	*** 005223	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;base
	*** 005226	05 1c 00 		add	ax,28	;001cH
	*** 005229	50 			push	ax
	*** 00522a	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00522f	83 c4 04 		add	sp,4
;|***     tempval = tempval >> 1;   //get next bit
; Line 2105
	*** 005232	d1 6e fa 		shr	WORD PTR [bp-6],1
	*** 005235	d1 5e f8 		rcr	WORD PTR [bp-8],1	;tempval
;|***     }
; Line 2106
	*** 005238	e9 9a ff 		jmp	$FC2014
					$FB2015:
;|*** 
;|***   tempval = MIDWRD;        //0x1e04
; Line 2108
	*** 00523b	c7 46 f8 04 1e 		mov	WORD PTR [bp-8],7684	;1e04H	;tempval
	*** 005240	c7 46 fa 00 00 		mov	WORD PTR [bp-6],0
;|***   for(i=0;i<14;i++)
; Line 2109
	*** 005245	c7 46 f6 00 00 		mov	WORD PTR [bp-10],0	;i
	*** 00524a	e9 03 00 		jmp	$F2017
					$FC2018:
	*** 00524d	ff 46 f6 		inc	WORD PTR [bp-10]	;i
					$F2017:
	*** 005250	83 7e f6 0e 		cmp	WORD PTR [bp-10],14	;000eH	;i
	*** 005254	72 03 			jb	$JCC21076
	*** 005256	e9 58 00 		jmp	$FB2019
					$JCC21076:
;|***     {
; Line 2110
;|***     curval = 0;
; Line 2111
	*** 005259	c7 46 fc 00 00 		mov	WORD PTR [bp-4],0	;curval
;|***     curval = (char)(tempval&0x1)<<2;  //set bit
; Line 2112
	*** 00525e	8a 46 f8 		mov	al,BYTE PTR [bp-8]	;tempval
	*** 005261	24 01 			and	al,1
	*** 005263	98 			cbw	
	*** 005264	c1 e0 02 		shl	ax,2
	*** 005267	89 46 fc 		mov	WORD PTR [bp-4],ax	;curval
;|***     outp(base+PVR,curval);
; Line 2113
	*** 00526a	ff 76 fc 		push	WORD PTR [bp-4]	;curval
	*** 00526d	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;base
	*** 005270	05 1c 00 		add	ax,28	;001cH
	*** 005273	50 			push	ax
	*** 005274	9a 00 00 00 00 		call	FAR PTR _outp
	*** 005279	83 c4 04 		add	sp,4
;|***     curval = curval |0x02;    //force rising edge
; Line 2114
	*** 00527c	83 4e fc 02 		or	WORD PTR [bp-4],2	;curval
;|***     outp(base+PVR,curval);    //clock in data
; Line 2115
	*** 005280	ff 76 fc 		push	WORD PTR [bp-4]	;curval
	*** 005283	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;base
	*** 005286	05 1c 00 		add	ax,28	;001cH
	*** 005289	50 			push	ax
	*** 00528a	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00528f	83 c4 04 		add	sp,4
;|***     curval = curval &0x04;    //force falling edge
; Line 2116
	*** 005292	83 66 fc 04 		and	WORD PTR [bp-4],4	;curval
;|***     outp(base+PVR,curval);    //set clock low
; Line 2117
	*** 005296	ff 76 fc 		push	WORD PTR [bp-4]	;curval
	*** 005299	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;base
	*** 00529c	05 1c 00 		add	ax,28	;001cH
	*** 00529f	50 			push	ax
	*** 0052a0	9a 00 00 00 00 		call	FAR PTR _outp
	*** 0052a5	83 c4 04 		add	sp,4
;|***     tempval = tempval >> 1;   //get next bit
; Line 2118
	*** 0052a8	d1 6e fa 		shr	WORD PTR [bp-6],1
	*** 0052ab	d1 5e f8 		rcr	WORD PTR [bp-8],1	;tempval
;|***     }
; Line 2119
	*** 0052ae	e9 9c ff 		jmp	$FC2018
					$FB2019:
;|***   
;|***   //pause for >10ms --should be replaced with a regulation pause routine
;|***   for(i=0;i<32000;i++) inp(0x20);
; Line 2122
	*** 0052b1	c7 46 f6 00 00 		mov	WORD PTR [bp-10],0	;i
	*** 0052b6	e9 03 00 		jmp	$F2021
					$FC2022:
	*** 0052b9	ff 46 f6 		inc	WORD PTR [bp-10]	;i
					$F2021:
	*** 0052bc	81 7e f6 00 7d 		cmp	WORD PTR [bp-10],32000	;7d00H	;i
	*** 0052c1	72 03 			jb	$JCC21185
	*** 0052c3	e9 0d 00 		jmp	$FB2023
					$JCC21185:
	*** 0052c6	6a 20 			push	32	;0020H
	*** 0052c8	9a 00 00 00 00 		call	FAR PTR _inp
	*** 0052cd	83 c4 02 		add	sp,2
	*** 0052d0	e9 e6 ff 		jmp	$FC2022
					$FB2023:
;|*** 
;|***   tempval = ENDWRD;        //0x1e00
; Line 2124
	*** 0052d3	c7 46 f8 00 1e 		mov	WORD PTR [bp-8],7680	;1e00H	;tempval
	*** 0052d8	c7 46 fa 00 00 		mov	WORD PTR [bp-6],0
;|***   for(i=0;i<14;i++)
; Line 2125
	*** 0052dd	c7 46 f6 00 00 		mov	WORD PTR [bp-10],0	;i
	*** 0052e2	e9 03 00 		jmp	$F2024
					$FC2025:
	*** 0052e5	ff 46 f6 		inc	WORD PTR [bp-10]	;i
					$F2024:
	*** 0052e8	83 7e f6 0e 		cmp	WORD PTR [bp-10],14	;000eH	;i
	*** 0052ec	72 03 			jb	$JCC21228
	*** 0052ee	e9 58 00 		jmp	$FB2026
					$JCC21228:
;|***     {
; Line 2126
;|***     curval = 0;
; Line 2127
	*** 0052f1	c7 46 fc 00 00 		mov	WORD PTR [bp-4],0	;curval
;|***     curval = (char)(tempval&0x1)<<2;  //set bit
; Line 2128
	*** 0052f6	8a 46 f8 		mov	al,BYTE PTR [bp-8]	;tempval
	*** 0052f9	24 01 			and	al,1
	*** 0052fb	98 			cbw	
	*** 0052fc	c1 e0 02 		shl	ax,2
	*** 0052ff	89 46 fc 		mov	WORD PTR [bp-4],ax	;curval
;|***     outp(base+PVR,curval);
; Line 2129
	*** 005302	ff 76 fc 		push	WORD PTR [bp-4]	;curval
	*** 005305	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;base
	*** 005308	05 1c 00 		add	ax,28	;001cH
	*** 00530b	50 			push	ax
	*** 00530c	9a 00 00 00 00 		call	FAR PTR _outp
	*** 005311	83 c4 04 		add	sp,4
;|***     curval = curval |0x02;    //force rising edge
; Line 2130
	*** 005314	83 4e fc 02 		or	WORD PTR [bp-4],2	;curval
;|***     outp(base+PVR,curval);    //clock in data
; Line 2131
	*** 005318	ff 76 fc 		push	WORD PTR [bp-4]	;curval
	*** 00531b	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;base
	*** 00531e	05 1c 00 		add	ax,28	;001cH
	*** 005321	50 			push	ax
	*** 005322	9a 00 00 00 00 		call	FAR PTR _outp
	*** 005327	83 c4 04 		add	sp,4
;|***     curval = curval &0x04;    //force falling edge
; Line 2132
	*** 00532a	83 66 fc 04 		and	WORD PTR [bp-4],4	;curval
;|***     outp(base+PVR,curval);    //set clock low
; Line 2133
	*** 00532e	ff 76 fc 		push	WORD PTR [bp-4]	;curval
	*** 005331	8b 46 fe 		mov	ax,WORD PTR [bp-2]	;base
	*** 005334	05 1c 00 		add	ax,28	;001cH
	*** 005337	50 			push	ax
	*** 005338	9a 00 00 00 00 		call	FAR PTR _outp
	*** 00533d	83 c4 04 		add	sp,4
;|***     tempval = tempval >> 1;   //get next bit
; Line 2134
	*** 005340	d1 6e fa 		shr	WORD PTR [bp-6],1
	*** 005343	d1 5e f8 		rcr	WORD PTR [bp-8],1	;tempval
;|***     }
; Line 2135
	*** 005346	e9 9c ff 		jmp	$FC2025
					$FB2026:
;|***   }
; Line 2136
	*** 005349	e9 00 00 		jmp	$EX2004
					$EX2004:
	*** 00534c	5e 			pop	si
	*** 00534d	5f 			pop	di
	*** 00534e	c9 			leave	
	*** 00534f	ca 0c 00 		ret	12	;0000000cH

?set_clock_generator@Cescc@@RECXIKI@Z	ENDP
	PUBLIC	?wait_for_tx@Cescc@@RECII@Z	; Cescc::wait_for_tx
?wait_for_tx@Cescc@@RECII@Z	PROC FAR	; Cescc::wait_for_tx
;|***   
;|***   
;|***   
;|*** unsigned Cescc::wait_for_tx(unsigned port)
;|***   {
; Line 2141
	*** 005352	c8 04 00 00 		enter	4,0
	*** 005356	57 			push	di
	*** 005357	56 			push	si
;	i = -4
;	this = 6
;	port = 10
;|***   unsigned long i = 0;
; Line 2142
	*** 005358	2b c0 			sub	ax,ax
	*** 00535a	89 46 fe 		mov	WORD PTR [bp-2],ax
	*** 00535d	89 46 fc 		mov	WORD PTR [bp-4],ax	;i
;|***   if(port_open_list[port]!=0)
; Line 2143
	*** 005360	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 005363	83 c3 04 		add	bx,4
	*** 005366	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 005369	d1 e6 			shl	si,1
	*** 00536b	26 83 38 00 		cmp	WORD PTR es:[bx][si],0
	*** 00536f	75 03 			jne	$JCC21359
	*** 005371	e9 21 00 		jmp	$I2032
					$JCC21359:
;|***     {
; Line 2144
;|***     while(istxing[port]==1)
; Line 2145
					$FC2034:
	*** 005374	c4 5e 06 		les	bx,DWORD PTR [bp+6]	;this
	*** 005377	81 c3 92 01 		add	bx,402	;0192H
	*** 00537b	8b 76 0a 		mov	si,WORD PTR [bp+10]	;port
	*** 00537e	d1 e6 			shl	si,1
	*** 005380	26 83 38 01 		cmp	WORD PTR es:[bx][si],1
	*** 005384	74 03 			je	$JCC21380
	*** 005386	e9 03 00 		jmp	$FB2035
					$JCC21380:
;|***       {
; Line 2146
;|***       // The screen writes inserted here are a desperation move to avoid
;|***       // system crashes.  Perhaps it is a timing issue and the screen
;|***       // writes provide a small delay.  They do reduce the likelihood
;|***       // of system crashes substantially, but not completely.  The
;|***       // problem may also be due to sporadic misbehavior by the Tech 80
;|***       // motion controllers.  It was noted during development that
;|***       // occasional screen writes eliminated the Tech 80 anomalies.
;|***       // Go figure.  Let me know if you ever solve this problem.  JTM.
;|***       /*if(i++ > 10000000)  // jtm remove for autonomous
;|***         {
;|***         cout << "\t\t\t\t\t\t\t\t\tX\r" << flush;
;|***         return TRUE;
;|***         }
;|***       */  
;|***       }
; Line 2161
	*** 005389	e9 e8 ff 		jmp	$FC2034
					$FB2035:
;|***     return TRUE;
; Line 2162
	*** 00538c	b8 00 00 		mov	ax,0
	*** 00538f	e9 09 00 		jmp	$EX2030
;|***     }
; Line 2163
;|***   else 
; Line 2164
	*** 005392	e9 06 00 		jmp	$I2036
					$I2032:
;|***     {
; Line 2165
;|***     //printf("L\r");
;|***     return FALSE;
; Line 2167
	*** 005395	b8 01 00 		mov	ax,1
	*** 005398	e9 00 00 		jmp	$EX2030
;|***     }
; Line 2168
					$I2036:
;|***   }
; Line 2169
					$EX2030:
	*** 00539b	5e 			pop	si
	*** 00539c	5f 			pop	di
	*** 00539d	c9 			leave	
	*** 00539e	ca 06 00 		ret	6

?wait_for_tx@Cescc@@RECII@Z	ENDP
ESCCAUTO_TEXT	ENDS
END
